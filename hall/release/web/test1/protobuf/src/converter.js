"use strict";function genValuePartial_fromObject(e,t,s,r){if(t.resolvedType)if(t.resolvedType instanceof Enum){e("switch(d%s){",r);for(var a=t.resolvedType.values,n=Object.keys(a),o=0;o<n.length;++o)t.repeated&&a[n[o]]===t.typeDefault&&e("default:"),e("case%j:",n[o])("case %j:",a[n[o]])("m%s=%j",r,a[n[o]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%d].fromObject(d%s)",r,s,r);else{var i=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,i)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,i?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function genValuePartial_toObject(e,t,s,r){if(t.resolvedType)t.resolvedType instanceof Enum?e("d%s=o.enums===String?types[%d].values[m%s]:m%s",r,s,r,r):e("d%s=types[%d].toObject(m%s,o)",r,s,r);else{var a=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":a=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,a?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}var converter=exports,Enum=require("./enum"),util=require("./util");converter.fromObject=function(e){var t=e.fieldsArray,s=util.codegen("d")("if(d instanceof this.ctor)")("return d");if(!t.length)return s("return new this.ctor");s("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),n=util.safeProp(a.name);a.map?(s("if(d%s){",n)('if(typeof d%s!=="object")',n)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",n)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",n),genValuePartial_fromObject(s,a,r,n+"[ks[i]]")("}")("}")):a.repeated?(s("if(d%s){",n)("if(!Array.isArray(d%s))",n)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",n)("for(var i=0;i<d%s.length;++i){",n),genValuePartial_fromObject(s,a,r,n+"[i]")("}")("}")):(a.resolvedType instanceof Enum||s("if(d%s!=null){",n),genValuePartial_fromObject(s,a,r,n),a.resolvedType instanceof Enum||s("}"))}return s("return m")},converter.toObject=function(e){var t=e.fieldsArray.slice().sort(util.compareFieldsById);if(!t.length)return util.codegen()("return {}");for(var s=util.codegen("m","o")("if(!o)")("o={}")("var d={}"),r=[],a=[],n=[],o=0;o<t.length;++o)t[o].partOf||(t[o].resolve().repeated?r:t[o].map?a:n).push(t[o]);if(r.length){for(s("if(o.arrays||o.defaults){"),o=0;o<r.length;++o)s("d%s=[]",util.safeProp(r[o].name));s("}")}if(a.length){for(s("if(o.objects||o.defaults){"),o=0;o<a.length;++o)s("d%s={}",util.safeProp(a[o].name));s("}")}if(n.length){for(s("if(o.defaults){"),o=0;o<n.length;++o){var i=n[o],l=util.safeProp(i.name);i.resolvedType instanceof Enum?s("d%s=o.enums===String?%j:%j",l,i.resolvedType.valuesById[i.typeDefault],i.typeDefault):i.long?s("if(util.Long){")("var n=new util.Long(%d,%d,%j)",i.typeDefault.low,i.typeDefault.high,i.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%d",l,i.typeDefault.toString(),i.typeDefault.toNumber()):i.bytes?s("d%s=o.bytes===String?%j:%s",l,String.fromCharCode.apply(String,i.typeDefault),"["+Array.prototype.slice.call(i.typeDefault).join(",")+"]"):s("d%s=%j",l,i.typeDefault)}s("}")}var f=!1;for(o=0;o<t.length;++o){var i=t[o],u=e._fieldsArray.indexOf(i),l=util.safeProp(i.name);i.map?(f||(f=!0,s("var ks2")),s("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),genValuePartial_toObject(s,i,u,l+"[ks2[j]]")("}")):i.repeated?(s("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),genValuePartial_toObject(s,i,u,l+"[j]")("}")):(s("if(m%s!=null&&m.hasOwnProperty(%j)){",l,i.name),genValuePartial_toObject(s,i,u,l),i.partOf&&s("if(o.oneofs)")("d%s=%j",util.safeProp(i.partOf.name),i.name)),s("}")}return s("return d")};