"use strict";function unescape(e){return e.replace(unescapeRe,function(e,n){switch(n){case"\\":case"":return n;default:return unescapeMap[n]||""}})}function tokenize(e){function n(e){return Error("illegal "+e+" (line "+c+")")}function t(n){return e.charAt(n)}function r(n,t){f=e.charAt(n++),p=c;for(var r=e.substring(n,t).split(setCommentSplitRe),i=0;i<r.length;++i)r[i]=r[i].replace(setCommentRe,"").trim();a=r.join("\n").trim()}function i(){if(g.length>0)return g.shift();if(m)return function(){var t="'"===m?stringSingleRe:stringDoubleRe;t.lastIndex=s-1;var r=t.exec(e);if(!r)throw n("string");return s=t.lastIndex,u(m),m=null,unescape(r[1])}();var i,l,f,a,p;do{if(s===o)return null;for(i=!1;whitespaceRe.test(f=t(s));)if("\n"===f&&++c,++s===o)return null;if("/"===t(s)){if(++s===o)throw n("comment");if("/"===t(s)){for(p="/"===t(a=s+1);"\n"!==t(++s);)if(s===o)return null;++s,p&&r(a,s-1),++c,i=!0}else{if("*"!==(f=t(s)))return"/";p="*"===t(a=s+1);do{if("\n"===f&&++c,++s===o)throw n("comment");l=f,f=t(s)}while("*"!==l||"/"!==f);++s,p&&r(a,s-2),i=!0}}}while(i);var h=s;delimRe.lastIndex=0;if(!delimRe.test(t(h++)))for(;h<o&&!delimRe.test(t(h));)++h;var R=e.substring(s,s=h);return'"'!==R&&"'"!==R||(m=R),R}function u(e){g.push(e)}function l(){if(!g.length){var e=i();if(null===e)return null;u(e)}return g[0]}var s=0,o=(e=e.toString()).length,c=1,f=null,a=null,p=0,g=[],m=null;return{next:i,peek:l,push:u,skip:function(e,t){var r=l();if(r===e)return i(),!0;if(!t)throw n("token '"+r+"', '"+e+"' expected");return!1},line:function(){return c},cmnt:function(e){var n;return void 0===e?n=p===c-1&&a||null:(a||l(),n=p===e&&"/"===f&&a||null),f=a=null,p=0,n}}}module.exports=tokenize;var delimRe=/[\s{}=;:[\],'"()<>]/g,stringDoubleRe=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,stringSingleRe=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,setCommentRe=/^ *[*/]+ */,setCommentSplitRe=/\n/g,whitespaceRe=/\s/,unescapeRe=/\\(.?)/g,unescapeMap={0:"\0",r:"\r",n:"\n",t:"\t"};tokenize.unescape=unescape;