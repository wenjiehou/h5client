var tape=require("tape"),protobuf=require("..");tape.test("empty inner fields",function(e){var n=protobuf.Root.fromJSON({nested:{Inner:{fields:{}},Outer:{oneofs:{child:{oneof:["inner"]}},fields:{inner:{id:1,type:"Inner"}}}}}).lookup("Outer"),r=n.fromObject({inner:{}}),o=n.encode(r).finish();e.equal(o.length,2,"should always be present on the wire"),e.equal(o[0],10,"should write id 1, wireType 2"),e.equal(o[1],0,"should write a length of 0"),e.end()});