var tape=require("tape"),protobuf=require(".."),proto='syntax = "proto3";message Message {    oneof kind {        string str = 1;        int32 num = 2;        Type enm = 4;    }    bool other = 3;}enum Type {    ONE = 1;    TWO = 2;}';tape.test("oneofs",function(e){var t=protobuf.parse(proto).root.lookup("Message"),o=t.create({str:"a",num:1,other:!1});e.equal(o.num,1,"should initialize the last value"),e.equal(o.kind,"num","should reference the last value"),o.kind="num",e.notOk(o.hasOwnProperty("str"),"should delete other values"),o.str="a",o.kind="str",e.notOk(o.hasOwnProperty("num"),"should delete the previous value"),e.equal(o.str,"a","should set the new value"),e.equal(o.kind,"str","should reference the new value"),o.num=0,o.kind="num",e.notOk(o.hasOwnProperty("str"),"should delete the previous value"),e.equal(o.num,0,"should set the new value"),e.equal(o.kind,"num","should reference the new value"),e.equal(o.hasOwnProperty("num"),!0,"should have the new value on the instance, not just the prototype"),delete o.other;var u=t.encode(o).finish();e.equal(u.length,2,"should write a total of 2 bytes"),e.equal(u[0],16,"should write id 1, wireType 0"),e.equal(u[1],0,"should write a value of 0"),e.end()});