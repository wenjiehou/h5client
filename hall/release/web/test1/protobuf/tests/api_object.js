var tape=require("tape"),protobuf=require("..");tape.test("reflection objects",function(o){o.throws(function(){new protobuf.ReflectionObject(null)},TypeError,"should throw on construction if name is not a string"),o.throws(function(){new protobuf.ReflectionObject("name",!0)},TypeError,"should throw on construction if options is not an object if not omitted");var e=new protobuf.ReflectionObject("Test");e.resolve(),o.equal(e.resolved,!1,"should not resolve when not part of a root"),e.resolved=2,e.resolve(),o.equal(e.resolved,2,"should not resolve again when already resolved"),e.resolved=!1,e.setOptions({a:1,b:2}),o.same(e.options,{a:1,b:2},"should set multiple options"),e.setOptions(void 0),o.same(e.options,{a:1,b:2},"should accept undefined as options"),e.setOption("c",3),o.same(e.options,{a:1,b:2,c:3},"should set single options"),o.equal(e.toString(),"ReflectionObject Test","should convert to a string (even if not part of a root)"),e.name="",o.equal(e.toString(),"ReflectionObject","should convert to a string even with no full name"),o.end()});