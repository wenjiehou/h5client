var tape=require("tape"),base64=require(".."),strings={"":"",a:"YQ==",ab:"YWI=",abcdefg:"YWJjZGVmZw==",abcdefgh:"YWJjZGVmZ2g=",abcdefghi:"YWJjZGVmZ2hp"};tape.test("base64",function(e){Object.keys(strings).forEach(function(a){var r=strings[a];e.equal(base64.test(r),!0,"should detect '"+r+"' to be base64 encoded");var t=base64.length(r);e.equal(t,a.length,"should calculate '"+r+"' as "+a.length+" bytes");var o=new Array(t),s=base64.decode(r,o,0);e.equal(s,t,"should decode '"+r+"' to "+t+" bytes"),e.equal(String.fromCharCode.apply(String,o),a,"should decode '"+r+"' to '"+a+"'");var d=base64.encode(o,0,o.length);e.equal(d,r,"should encode '"+a+"' to '"+r+"'")}),e.throws(function(){var e=new Array(10);base64.decode("YQ!",e,0)},Error,"should throw if encoding is invalid"),e.throws(function(){var e=new Array(10);base64.decode("Y",e,0)},Error,"should throw if string is truncated"),e.end()});