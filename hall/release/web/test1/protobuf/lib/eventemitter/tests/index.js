var tape=require("tape"),EventEmitter=require("..");tape.test("eventemitter",function(e){var t,o=new EventEmitter,n={};e.doesNotThrow(function(){o.emit("a",1),o.off(),o.off("a"),o.off("a",function(){})},"should not throw if no listeners are registered"),e.equal(o.on("a",function(t){e.equal(this,n,"should be called with this = ctx"),e.equal(t,1,"should be called with arg1 = 1")},n),o,"should return itself when registering events"),o.emit("a",1),o.off("a"),e.same(o._listeners,{a:[]},"should remove all listeners of the respective event when calling off(evt)"),o.off(),e.same(o._listeners,{},"should remove all listeners when just calling off()"),o.on("a",t=function(t){e.equal(this,n,"should be called with this = ctx"),e.equal(t,1,"should be called with arg1 = 1")},n).emit("a",1),o.off("a",t),e.same(o._listeners,{a:[]},"should remove the exact listener when calling off(evt, fn)"),o.on("a",function(){e.equal(this,o,"should be called with this = ee")}).emit("a"),e.doesNotThrow(function(){o.off("a",t)},"should not throw if no such listener is found"),e.end()});