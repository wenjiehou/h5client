!function(i,e,t){var s=(t.un,t.uns,t.static),n=t.class,o=t.getset,a=t.__newvec,h=rb.framework.mvc.AbstractLayer,r=(ui.niuniuGame.niuniuPart.ActTipUI,laya.display.Animation,t.AppConfig),l=(laya.ui.Box,laya.utils.Browser),d=(laya.ui.Button,modules.gameCommon.chat.Chat),c=(modules.gameCommon.chat.ChatPage,common.CommonModule),u=(ui.niuniuGame.niuniuPart.CuoPartUI,laya.utils.Dictionary),f=(laya.events.Event,common.event.EventCenter),p=rb.framework.mvc.GameContext,m=ui.niuniuGame.GameTableUI,g=ui.gameCommon.items.GiftItemUI,_=hall.HallModule,C=laya.utils.Handler,y=(laya.ui.Image,laya.ui.Label,rb.framework.mvc.core.LayerTypes,net.Message,manager.MessageManager),v=rb.framework.mvc.Module,P=t.ModuleDef,k=laya.ani.swf.MovieClip,w=modules.gameCommon.view.NewDissolvePage,I=(ui.niuniuGame.niuniuPart.handlePart.OtherHandlePartUI,ui.niuniuGame.niuniuPart.handlePart.OwnerHandlePartUI,ui.niuniuGame.niuniuPart.PlayerCtlPartUI,ui.niuniuGame.PlayerInfoPageUI,ui.niuniuGame.niuniuPart.item.PockerItemUI,ui.niuniuGame.PockerPageUI),B=(common.view.PopBox,net.ProtoMessage),b=t.QuickUtils,S=hall.view.RecordView,A=laya.maths.Rectangle,x=modules.gameCommon.view.ReplayControlView,R=rb.framework.errors.SingletonError,D=laya.media.SoundManager,T=common.tools.SoundPlay,E=laya.display.Sprite,V=(laya.display.Stage,ui.niuniuGame.TableInfoPageUI,manager.TextManager,manager.TimeManager),N=laya.utils.Tween,G=manager.UIManager,M=t.UserData,z=ui.gameCommon.UserInfoUI,K=(laya.ui.View,t.WX),U=function(){function i(){this.valueArr=[],this.nValueArr=[],this.typeArr=[],this.isHuaArr=[],this.eightArr=[],this.sevenArr=[],this.sixArr=[],this.fiveArr=[],this.fourArr=[],this.threeArr=[],this.twoArr=[],this.danArr=[]}n(i,"modules.nnGame.inerGame.model.data.JishuArrData");var e=i.prototype;return e.clone=function(i){this.valueArr=i.valueArr.concat(),this.eightArr=i.eightArr.concat(),this.sevenArr=i.eightArr.concat(),this.sixArr=i.sixArr.concat(),this.fiveArr=i.fiveArr.concat(),this.fourArr=i.fourArr.concat(),this.threeArr=i.threeArr.concat(),this.twoArr=i.twoArr.concat(),this.danArr=i.danArr.concat()},i.getJishuArrData=function(e){var t=new i,s=[],n=[],o=[],a=[],h=0;for(h=0;h<e.length;h++)s.push(Z.getV(e[h])),n.push(Z.getT(e[h])),o.push(Z.getVNn(e[h])),a.push(Z.checkIsHua(e[h]));console.log("检测的牌值：：",s),t.valueArr=s.concat(),t.typeArr=n.concat(),t.nValueArr=o.concat(),t.isHuaArr=a.concat();var r=0,l=0,d=0;for(h=0;h<s.length;h++){for(l=1,r=s[h],s.splice(h,1),h-=1,d=s.indexOf(r);-1!=d;)s.splice(d,1),l+=1,d=s.indexOf(r);switch(l){case 1:t.danArr.push(r);break;case 2:t.twoArr.push(r);break;case 3:t.threeArr.push(r);break;case 4:t.fourArr.push(r);break;case 5:t.fiveArr.push(r);break;case 6:t.sixArr.push(r);break;case 7:t.sevenArr.push(r);break;case 8:t.eightArr.push(r)}}return t},i.checkValuelian=function(i){var e=0,t=i.length;for(e=0;t-1>e;e++)if(i[e+1]-i[e]!=1)return!1;return!0},i.compValue=function(e){e.sort(i.compVFun)},i.compVFun=function(i,e){return i>e?1:(i=e)?0:-1},i.conversValueArr=function(e){var t=0,s=e.length;for(t=0;s>t;t++)14==e[t]?e[t]=1:16==e[t]&&(e[t]=2);e.sort(i.compCardsFun)},i.compCardsFun=function(i,e){if(0==i||0==e)return 0;var t=Z.getT(i),s=Z.getT(e),n=Z.getV(i),o=Z.getV(e);return n>o?1:n==o?t>s?1:-1:-1},i}(),O=function(){function i(){this.cards=[],this.ThreeArr=[],this.twoArr=[],this.BigV=-1,this.BigT=-1,this.niuNum=0}n(i,"modules.nnGame.inerGame.model.data.NiuData");var e=i.prototype;return o(0,e,"bestOrder",function(){return this.niuNum>0?this.ThreeArr.concat(this.twoArr):this.cards}),i.getNiuData=function(e){var t=new i;t.cards=e.concat();for(var s=e.length,n=0,o=0;s>o;o++)for(var a=o+1;s>a;a++)for(var h=a+1;s>h;h++)if((Z.getVNn(e[o])+Z.getVNn(e[a])+Z.getVNn(e[h]))%10==0){var r=[e[o],e[a],e[h]],l=[];n=0;for(var d=0;s>d;d++)d!=o&&d!=a&&d!=h&&(n+=Z.getVNn(e[d]),l.push(e[d]));var c=n%10;0==c&&(c=10),c>t.niuNum&&(t.niuNum=c,t.ThreeArr=r.concat(),t.twoArr=l.concat())}return t},i}(),L=function(){function i(){}return n(i,"modules.nnGame.inerGame.model.data.PaixingLogic"),i.getPaixing=function(e,t,s){if(void 0===s&&(s=!0),s&&e.sort(i.compCardsFun),null==t&&(t=U.getJishuArrData(e)),1==i.isTongshun(e,t))return 17;if(1==i.isZhadan(e,t))return 16;if(1==i.isWuxiao(e,t))return 15;if(1==i.isWuhua(e,t))return 14;if(1==i.isHulu(e,t))return 13;if(1==i.isShunzi(e,t))return 12;if(1==i.isTonghua(e,t))return 11;var n=O.getNiuData(e);return 0==n.niuNum?0:1==n.niuNum?1:2==n.niuNum?2:3==n.niuNum?3:4==n.niuNum?4:5==n.niuNum?5:6==n.niuNum?6:7==n.niuNum?7:8==n.niuNum?8:9==n.niuNum?9:10==n.niuNum?10:0},i.isNiuPaixing=function(i){switch(i){case 17:case 16:case 15:case 14:case 13:case 13:case 12:case 11:case 0:return!1}return!0},i.isTongshun=function(e,t){return 1==i.isTonghua(e,t)&&1==i.isShunzi(e,t)?!0:!1},i.isZhadan=function(i,e){return null==e&&(e=U.getJishuArrData(i)),1==e.fourArr.length?!0:!1},i.isWuxiao=function(i,e){null==e&&(e=U.getJishuArrData(i));var t=0,s=0;for(t=0;t<e.nValueArr.length;t++){if(e.nValueArr[t]>=5)return!1;if(s+=e.nValueArr[t],s>=10)return!1}return!0},i.isWuhua=function(i,e){null==e&&(e=U.getJishuArrData(i));var t=0;for(t=0;t<e.isHuaArr.length;t++)if(0==e.isHuaArr[t])return!1;return!0},i.isHulu=function(i,e){return null==e&&(e=U.getJishuArrData(i)),1==e.threeArr.length&&1==e.twoArr.length?!0:!1},i.isShunzi=function(i,e){i.length;if(null==e&&(e=U.getJishuArrData(i)),0==e.fourArr.length&&0==e.threeArr.length&&0==e.twoArr.length&&e.danArr.length>=5){var t=e.danArr.concat(),s=e.danArr.indexOf(16);if(-1!=s&&M.needOneTwo&&U.conversValueArr(t),1==U.checkValuelian(t))return!0}return!1},i.isTonghua=function(i,e){null==e&&(e=U.getJishuArrData(i));var t=0,s=-1;for(t=0;t<e.typeArr.length;t++)if(0==t)s=e.typeArr[t];else if(e.typeArr[t]!=s)return!1;return!0},i.compCardsFun=function(i,e){if(0==i||0==e)return 0;var t=Z.getT(i),s=Z.getT(e),n=Z.getV(i),o=Z.getV(e);return n>o?1:n==o?t>s?1:-1:-1},i.getCardsFromValues=function(i,e){var t=[],s=i.concat(),n=0,o=0;for(n=0;n<e.length;n++)for(o=0;o<s.length;o++)if(Z.getV(s[o])==e[n]||Z.getVShang(s[o])==e[n]){t.push(s[o]),s.splice(o,1);break}return t},i.sortHandleCards=function(e){e.sort(i.compCardsFun)},i.sortOutputCards=function(e){var t;i.sortHandleCards(e);var s=U.getJishuArrData(e),n=i.getPaixing(e),o=[];switch(n){case 12:M.needOneTwo&&-1!=s.danArr.indexOf(16)&&(U.conversValueArr(s.danArr),e=i.getCardsFromValues(e,s.danArr));break;case 13:o=[s.threeArr[0],s.threeArr[0],s.threeArr[0],s.twoArr[0],s.twoArr[0]],e=i.getCardsFromValues(e,o)}return t=e.concat()},i.cutArrInArr=function(i,e){var t=i.concat(),s=0,n=0;for(s=0;s<e.length;s++)n=t.indexOf(e[s]),-1!=n&&(e.splice(s,1),s--,t.splice(n,1))},i}(),F=function(){function i(){this.ACKBC_Into_Room=null,this.ACK_RoomInfo=null,this.ACK_Room_User=null,this.ACKBC_CurPlayer=null,this.ACKBC_Sitdown=null,this.ACKBC_Standup=null,this.ACKBC_Ready=null,this.ACKBC_Exit_Room=null,this.NotifyStartGame=null,this.MSG_NOTIFY_SUMMARY=null,this.AckDisband=null,this.NotifyDisband=null,this.NotifyUserState=null,this.ACKBC_Sddz_Start=null,this.ACK_User_SeatCard=null,this.ACKBC_Sddz_Chupai=null,this.ACKBC_Sddz_End=null,this.ACKBC_Sddz_Total=null,this.ACKBC_Sddz_Card_Init=null,this.ACKBC_Sddz_JiaoDizhu=null,this.ACKBC_Sddz_Jiaofen=null,this.ACKBC_Sddz_Dizhu=null,this.ACKBC_Sddz_Mingpai=null,this.ACKBC_Sddz_Jiabei=null,this.ACKBC_Sddz_Pass=null,this.ACKBC_Nn_Xiazhu=null,this.ACKBC_Srddz_Baodao=null,this.ACKBC_Srddz_StrictWin=null}return n(i,"modules.nnGame.inerGame.model.NnMsgs"),i}(),H=function(){function i(i){this._skin=null,this.handlePart=null,this.handleBtns=null,this.timeTip=null,this.cuoPart=null,i&&(this._skin=i,this._skin.mouseThrough=!0,this.handlePart=new W(this._skin.handlePos0,this._skin.handlePos1,this._skin.handlePos2,this._skin.handlePos3,this._skin.handlePos4,this._skin.handlePos5,this._skin.handlePos6,this._skin.handlePos7,this._skin.handlePos8,this._skin.handlePos9),this.handleBtns=new Y(this._skin.ctlPart,this._skin.tishiBtn,this._skin.showBtn,this._skin.cuoBtn,this._skin.fanBtn),this.cuoPart=new q(this._skin.cuoPart),this.timeTip=new ie(this._skin.tipPart))}n(i,"modules.nnGame.inerGame.view.NnPage");var e=i.prototype;return e.setChairNum=function(i){void 0===i&&(i=10),this.handlePart.setChairNum(i)},e.reset=function(i){void 0===i&&(i=!0),this.handlePart.reset(),this.handleBtns.reset(),i&&this.timeTip.reset(),this.cuoPart.reset()},o(0,e,"skin",function(){return this._skin}),i}(),Q=function(){function i(i){this._skin=null,this._dir0=null,this._dir1=null,this._dir2=null,this._dir3=null,this._dir4=null,this._dir5=null,this._dir6=null,this._dir7=null,this._dir8=null,this._dir9=null,this._PosChairVec=[],this._skin=i,this._skin.mouseThrough=!0,this._dir0=new J(this._skin.pos0),this._dir1=new J(this._skin.pos1),this._dir2=new J(this._skin.pos2),this._dir3=new J(this._skin.pos3),this._dir4=new J(this._skin.pos4),this._dir5=new J(this._skin.pos5),this._dir6=new J(this._skin.pos6),this._dir7=new J(this._skin.pos7),this._dir8=new J(this._skin.pos8),this._dir9=new J(this._skin.pos9),this._skin.startBtn.visible=!1,this._skin.leaveBtn.visible=!1,this._skin.disbandBtn.visible=!1,this._skin.readyBtn.visible=!1,this._skin.startBtn.on("click",this,this.onClickStartBtn),this._skin.inviteBtn.on("click",this,this.onClickInviteBtn),this._skin.leaveBtn.on("click",this,this.onClickLeaveBtn),this._skin.disbandBtn.on("click",this,this.onClickDisbandBtn),this._skin.readyBtn.on("click",this,this.onClickReadyBtn),this._skin.gameEndBtn.on("click",this,this.onClickEndBtn),this.allReset()}n(i,"modules.nnGame.inerGame.view.PlayerInfoPage",null,"PlayerInfoPage$1");var e=i.prototype;return e.onClickEndBtn=function(){this.onConfirmEnd(0)},e.onConfirmEnd=function(i){0==i?r.isNewHall?b.gotoHall(1):(this.controller.endGameGotoHall(),t.timer.callLater(this,this.gotoReport)):r.isNewHall?b.gotoHall():this.controller.endGameGotoHall()},e.gotoReport=function(){_.instance.hallContext.hallView.hallLayer.onRecord({uniqueCode:M.uniqueCode})},e.onClickStartBtn=function(){var i={SID:M.SID};this.controller.sendMsgCommond(B.getProtoMessage(220,i))},e.onClickInviteBtn=function(){c.instance.commonContext.view.gameShareView.show()},e.onClickLeaveBtn=function(){var i={sid:M.SID};this.controller.sendMsgCommond(B.getProtoMessage(190,i),!1)},e.onClickDisbandBtn=function(){if(0==this.model.gameHasStarted){var i={sid:M.SID};this.controller.sendMsgCommond(B.getProtoMessage(151,i),!1)}else{var e={roomId:M.roomid};f.instance.event("SOCKET_SEND",B.getProtoMessage(400,e))}},e.onClickReadyBtn=function(){var i={sid:M.SID};this.controller.sendMsgCommond(B.getProtoMessage(210,i))},e.updateLeaveDisbandBtns=function(){this._skin.leaveBtn.visible=!1,this._skin.disbandBtn.visible=!1,this._skin.readyBtn.visible=0==this.model.isGameStart&&this.model.srddzMsgs.ACK_RoomInfo.RoundCount>0&&this.model.isSelfSitDown?!0:!1,0==this.model.gameHasStarted?M.selfuid==this.model.roomOwnerUid?this._skin.disbandBtn.visible=!0:this._skin.leaveBtn.visible=!0:this.model.isSelfSitDown?this._skin.disbandBtn.visible=!0:this._skin.leaveBtn.visible=!0},e.showGameEndBtn=function(){this._skin.gameEndBtn.visible=!0},e.showStartBtn=function(i){void 0===i&&(i=!0),this._skin.startBtn.visible=i},e.hideBtnsByGameStart=function(){this._skin.startBtn.visible=!1,this._skin.inviteBtn.visible=!1},e.updateStartBtn=function(){this._skin.startBtn.visible=!1},e.updateSitDownUpBtn=function(i){void 0===i&&(i=!0),i=!0,i?this.model.isSelfSitDown&&0==this.model.gameHasStarted?c.instance.commonContext.view.functionOption.onClickBtn(!1):c.instance.commonContext.view.functionOption.onClickBtn(!0):this.model.isSelfSitDown?c.instance.commonContext.view.functionOption.onClickBtn(!0):c.instance.commonContext.view.functionOption.onClickBtn(!0)},e.showZhuang=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].showZhuang(this.model.getChairPosByDir(i))},e.updateJiabei=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].updateJiabei(this.model.getChairPosByDir(i))},e.hideZhuang=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].hideZhuang()},e.hideQiangAndXia=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].hideQiangAndXia()},e.showQiangBei=function(i,e){this._PosChairVec[this.model.getChairDirByPos(i)].showQiangBei(i,e)},e.showXiazhu=function(i,e){this._PosChairVec[this.model.getChairDirByPos(i)].showXiazhu(i,e)},e.hideReadyBtn=function(){this._skin.readyBtn.visible=!1},e.allReset=function(){this._dir0.reset(),this._dir1.reset(),this._dir2.reset(),this._dir3.reset(),this._dir4.reset(),this._dir5.reset(),this._dir6.reset(),this._dir7.reset(),this._dir8.reset(),this._dir9.reset(),this._skin.gameEndBtn.visible=!1},e.setChairNum=function(i){switch(void 0===i&&(i=10),this._PosChairVec.length=0,console.log("playerinfo setChairNum::"+i),i){case 10:this._PosChairVec.push(this._dir0,this._dir1,this._dir2,this._dir3,this._dir4,this._dir5,this._dir6,this._dir7,this._dir8,this._dir9),this._dir0.dir=0,this._dir1.dir=1,this._dir2.dir=2,this._dir3.dir=3,this._dir4.dir=4,this._dir5.dir=5,this._dir6.dir=6,this._dir7.dir=7,this._dir8.dir=8,this._dir9.dir=9}this.bigReset()},e.bigReset=function(){this._skin.startBtn.visible=!1,this._skin.inviteBtn.visible=!0},e.reset=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].reset();this.updateSitDownUpBtn(),this._skin.gameEndBtn.visible=!1},e.havePiaoReset=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].reset(!0)},e.resetOnePos=function(i){var e=this.model.getChairDirByPos(i);this._PosChairVec[e].reset()},e.hideReadySimbol=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].hideReadySimbol()},e.showVoice=function(i){var e=this.model.getPlayerPosByUid(i),t=this.model.getChairDirByPos(e);console.log(t),-1==t?(this._skin.laba.visible=!0,this._skin.labaTip.play()):(this._PosChairVec[t].voice.visible=!0,this._PosChairVec[t].voice.ani.play())},e.hideVoice=function(i){var e=this.model.getPlayerPosByUid(i),t=this.model.getChairDirByPos(e);-1==t?(this._skin.laba.visible=!1,this._skin.labaTip.stop()):(this._PosChairVec[t].voice.visible=!1,this._PosChairVec[t].voice.ani.stop())},e.showReady=function(i){var e=this.model.getChairDirByPos(i);this._PosChairVec[e].showReady()},e.updateOnePlayerInfo=function(i,e){if(void 0===e&&(e=!1),-1!=i.pos){var t=this.model.getChairDirByPos(i.pos);t<this._PosChairVec.length&&this._PosChairVec[t].update(i,e)}},e.updateOnePlayerGolds=function(i){var e=this.model.getChairDirByPos(i.pos);e<this._PosChairVec.length&&(console.log("   updateOnePlayerInfo ::"+e+" obj.pos::"+i.pos),this._PosChairVec[e].updateGolds(i))},e.playDropJinBiFrom=function(i,e){var t=this.model.getChairDirByPos(i),s=this.model.getChairDirByPos(e);t<this._PosChairVec.length&&(this._PosChairVec[t].skin.parent&&this._PosChairVec[t].skin.parent.addChild(this._PosChairVec[t].skin),this._PosChairVec[t].playDropJinBiFrom(s))},e.playDropJinBiTo=function(i,e){var t=this.model.getChairDirByPos(i),s=this.model.getChairDirByPos(e);t<this._PosChairVec.length&&(this._PosChairVec[t].skin.parent&&this._PosChairVec[t].skin.parent.addChild(this._PosChairVec[t].skin),this._PosChairVec[t].playDropJinBiTo(s))},e.updatePlayerInfos=function(i,e,t){void 0===e&&(e=!0),void 0===t&&(t=!1),console.log("updatePlayerInfos ::"+i.length),this.reset();var s=0,n=i.length;for(s=0;n>s;s++)i[s]&&(console.log("updatePlayerInfos i::"+s),this.updateOnePlayerInfo(i[s],t))},e.updateGolds=function(i){console.log("updatePlayerInfos ::"+i.length),console.log(i);var e=0,t=i.length;for(e=0;t>e;e++)i[e]&&(console.log("updatePlayerInfos i::"+e),this.updateOnePlayerGolds(i[e]))},e.updateTirenBtn=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].updateTirenBtn()},e.showExpress=function(i,e){this._PosChairVec[i].showExpress(e)},e.setGrayhead=function(i,e,t,s){this._PosChairVec[i].setHeadGray(e,t,s)},e.playQZAni=function(i,e,s,n){var o=0;for(o=0;o<i.length;o++)t.timer.frameOnce(5*o,this,this.onSingleQiEff,[this.model.getChairDirByPos(i[o])],!1);for(o=0;o<i.length;o++)if(t.timer.frameOnce(5*(o+i.length),this,this.onSingleQiEff,[this.model.getChairDirByPos(i[o])],!1),i[o]==e){var a=5*(o+i.length);t.timer.frameOnce(5*(o+i.length),this,this.endShowZhuang,[a,s,n],!1),t.timer.frameOnce(5*(o+i.length+1),this,this.showQZAniEnd,[e,s,n],!1);break}},e.endShowZhuang=function(i,e,t){this.showZhuang(),t.apply(e,[i])},e.onSingleQiEff=function(i){for(var e=0;e<this._PosChairVec.length;e++)e==i?this._PosChairVec[e].showAndPlayQZAni():this._PosChairVec[e].hideAndStopQZAni()},e.showQZAniEnd=function(){},o(0,e,"model",function(){return ae.instance.gameContext.model}),o(0,e,"controller",function(){return ae.instance.gameContext.controller}),i}(),J=function(){function i(i){this.needPiao=!1,this._skin=null,this.headImg=null,this.nameTf=null,this.recordTf=null,this.readyImg=null,this.gangEff=null,this.tirenBtn=null,this.sitDownBtn=null,this.offlineTf=null,this.fenshuTf=null,this.voice=null,this.jinbiAni=null,this.qzAni=null,this.headw=0,this.headh=0,this.dir=0,this.expressImg=null,this.expressMov=null,this.expressUrl="res/swfs/Emoticon_",this.offlineimg=null,this.gangAni=null,this._skin=i,this.init()}n(i,"modules.nnGame.inerGame.view.playerInfoPart.BasePlayerInfoItem",null,"BasePlayerInfoItem$1");var e=i.prototype;return e.init=function(){this._skin.mouseThrough=!0,this._skin.haveBox.mouseThrough=!0,this.offlineTf=this._skin.offlineTf,this.offlineTf.overflow="visible",this.headImg=this._skin.headImg,this.nameTf=this._skin.nameTf,this.jinbiAni=this._skin.jinbiAni,this.qzAni=this._skin.zhuangAni,this.recordTf=this._skin.recordTf,this.readyImg=this._skin.readyImg,this.voice=this._skin.voice,this.gangEff=this._skin.gangEff,this.fenshuTf=this._skin.fenshuTf,this.tirenBtn=this._skin.tirenBtn,this.expressImg=this._skin.express,this.offlineimg=this._skin.offline,this.sitDownBtn=this._skin.sitdownBtn,this.tirenBtn.visible=!1,this.voice.visible=!1,this.offlineimg.visible=!1,this.headw=this.headImg.width,this.headh=this.headImg.height,this.loadGangEff(),this.loadExpressMov(),this.tirenBtn.on("click",this,this.onClickTiren),this.sitDownBtn.on("click",this,this.onClickSitdown)},e.onClickSitdown=function(){return 1==this.model.gameHasStarted&&this.model.isSelfSitDown?(b.popMessage("游戏开始之后不能换座位！"),void 0):(M.isCanSitdown&&this.onConFirm(0),void 0)},e.onConFirm=function(i){if(0==i){if(!M.isCanSitdown)return;var e={sid:M.SID,index:this.model.getChairPosByDir(this.dir)};this.controller.sendMsgCommond(B.getProtoMessage(195,e)),M.isCanSitdown=!1,t.timer.once(400,this,this.restCanSitdown)}},e.restCanSitdown=function(){M.isCanSitdown=!0,t.timer.clear(this,this.restCanSitdown)},e.onClickTiren=function(){return 0==this.model.isSelfSitDown?(b.popMessage("围观用户没有权限踢人"),void 0):(this.model.isGameStart?b.popMessageBox("踢人会导致当前游戏流局，确认踢人吗？","BTN_LABEL_QUEDINGQUXIAO",this,this.onConFirmTiren,"提示","left"):this.onConFirmTiren(0),void 0)},e.onConFirmTiren=function(i){if(0==i){var e={pos:this.model.getChairPosByDir(this.dir)};this.controller.sendMsgCommond(B.getProtoMessage(405,e))}},e.loadGangEff=function(){},e.loadExpressMov=function(){this.expressImg.removeChildren(),this.expressImg.skin="",this.expressMov=new k,this.expressMov.width=200,this.expressMov.height=200,this.expressImg.addChild(this.expressMov),this.expressMov.on("complete",this,this.onCompleteMov)},e.showExpress=function(i){null!=this.expressMov&&(this.expressMov.alpha=1,N.clearAll(this.expressMov),this.expressMov.parent&&this.expressMov.removeSelf()),this.expressMov=new k,this.expressMov.width=200,this.expressMov.height=200,this.expressMov.x=-85,this.expressMov.y=-85,this.expressImg.addChild(this.expressMov),this.expressMov.visible=!0,this.expressMov.alpha=1,10>i?this.expressMov.load(this.expressUrl+"0"+i+".swf",!0):this.expressMov.load(this.expressUrl+i+".swf",!0),N.to(this.expressMov,{alpha:.3},500,null,new C(this,this.onCompeteTween,[null]),2500)},e.onCompeteTween=function(){null!=this.expressMov&&(this.expressMov.visible=!1,this.expressMov.alpha=1,this.expressMov.parent&&this.expressMov.removeSelf(),this.expressMov=null)},e.onCompleteMov=function(){},e.onGangAniComp=function(){this.gangEff.visible=!1,this.gangAni.stop()},e.playGangEff=function(i){0!=i&&(this.fenshuTf.color=i>0?"#00ff00":"#ff0000",this.fenshuTf.visible=!0,this.fenshuTf.text=i>0?"+"+i:i+"",this.fenshuTf.y=60,N.to(this.fenshuTf,{y:20},2e3,null,C.create(this,this.onFenshuEffComp),2))},e.onFenshuEffComp=function(){this.fenshuTf.visible=!1},e.update=function(i,e){void 0===e&&(e=!1),this.sitDownBtn.visible=!1,this._skin.haveBox.visible=!0,void 0==i.score&&(i.score=0),this.nameTf.text=i.nickname,this.recordTf.text=1==M.Rule[4]?i.Coin:""+i.score,M.uid==i.uid&&(M.Diamond=i.Diamond,M.score=i.score,M.Coin=i.Coin),1==i.readystate?(0==this.model.isGameStart&&(this.readyImg.visible=!0),console.log("obj.piao::"+i.piao)):this.readyImg.visible=!1;var t=this.model.getPlayerPosByUid(i.uid);if(this._skin.chairPos.text="座位号："+t,this._skin.chairPos.visible=!1,this.headImg.width=this.headw,this.headImg.height=this.headh,this.headImg.on("click",this,this.onShowUserInfo,[i]),"h"==K.splitStr(i.Icon,"")[0]){var s=new E;s.loadImage(i.Icon,0,0,this.headw,this.headh,C.create(this,this.delayPhotoPhoto,[s,s])),s.mouseEnabled=!0,this.headImg.addChild(s)}var n=!1;2==i.state&&(n=!0),this.setHeadGray(n,!0,i.offlineTime),this.updateTirenBtn(),e&&this.playFlyHeadImg(this.model.getChairDirByPos(i.prePos))},e.onShowUserInfo=function(i){j.instance.show(i.uid,i.ip,i.Icon)},e.delayPhotoPhoto=function(){},e.updateGolds=function(i){var e=this.recordTf.text;1==M.Rule[4]?(this.recordTf.text=i.Coin,this.playGangEff(i.Coin-e)):(this.recordTf.text=""+i.score,this.playGangEff(i.score-e)),M.uid==i.uid&&(M.Diamond=i.Diamond,M.score=i.score,M.Coin=i.Coin)},e.playDropJinBiFrom=function(e){this.jinbiAni.visible=!0,this.jinbiAni.stop(),this.jinbiAni.index=0,this.jinbiAni.x=75+(i.DIRPOS_REFERENCE[e].x-i.DIRPOS_REFERENCE[this.dir].x),this.jinbiAni.y=53+(i.DIRPOS_REFERENCE[e].y-i.DIRPOS_REFERENCE[this.dir].y),N.to(this.jinbiAni,{x:75,y:53},400,null,new C(this,this.onTweenComp))},e.playDropJinBiTo=function(e){this.jinbiAni.visible=!0,this.jinbiAni.index=0,this.jinbiAni.stop(),this.jinbiAni.x=75,this.jinbiAni.y=53;var t=75+(i.DIRPOS_REFERENCE[e].x-i.DIRPOS_REFERENCE[this.dir].x),s=53+(i.DIRPOS_REFERENCE[e].y-i.DIRPOS_REFERENCE[this.dir].y);N.to(this.jinbiAni,{x:t,y:s},400,null,new C(this,this.onTweenComp))},e.onTweenComp=function(){this.jinbiAni.play(0,!1),this.jinbiAni.on("complete",this,this.onJinbiAniComp),D.playSound("res/sounds/pinshi/effect/dropJinbi.mp3")},e.onJinbiAniComp=function(){this.jinbiAni.visible=!1},e.show=function(){this._skin.visible=!0},e.hide=function(){this._skin.visible=!1},e.reset=function(i){void 0===i&&(i=!1),this._skin.haveBox.visible=!1,this.sitDownBtn.visible=!0,this._skin.zhuangImg.visible=!1,this.readyImg.visible=!1,this.gangEff.visible=!1,this.fenshuTf.visible=!1,this.tirenBtn.visible=!1,this.voice.visible=!1,this.voice.ani.stop(),this._skin.qiangImg.visible=!1,this._skin.zhuBox.visible=!1,this.jinbiAni.visible=!1,this.qzAni.visible=!1},e.showAndPlayQZAni=function(){this.qzAni.visible=!0,this.qzAni.play()},e.hideAndStopQZAni=function(){this.qzAni.visible=!1,this.qzAni.stop()},e.showZhuang=function(i){this._skin.qiangImg.visible=!1,this._skin.zhuangImg.visible=!1,i==this.model.zhuangPos&&(this._skin.zhuangImg.visible=!0,this.showQiangBei(i,this.model.difen),this.showAndPlayQZAni())},e.hideZhuang=function(){this._skin.zhuangImg.visible=!1,this.hideAndStopQZAni()},e.hideQiangAndXia=function(){this._skin.qiangImg.visible=!1,this._skin.zhuBox.visible=!1},e.showQiangBei=function(i,e){this._skin.qiangImg.visible=!0,this._skin.qiangImg.skin="gameCommon/qiangx"+e+".png"},e.showXiazhu=function(i,e){this._skin.zhuBox.visible=!0,this._skin.zhuTf.text=""+e},e.updateJiabei=function(){},e.hideReadySimbol=function(){this.readyImg.visible=!1},e.showReady=function(){this.readyImg.visible=!0},e.updateTirenBtn=function(){var i=this.model.playerByPos(this.model.getChairPosByDir(this.dir));null!=i&&(this.tirenBtn.visible=i.canKick)},e.setHeadGray=function(i,e,s){void 0===s&&(s=0),i&&e?(this._skin.offLineSp.visible=!0,this.headImg.filters=[b.grayscaleFilter],this.offlineimg.visible=!0,this.offlineTf.visible=!0,this.offlineTf.text=s+"",this.startCutDownOffline()):i&&!e?(this._skin.offLineSp.visible=!0,t.timer.once(1e4,this,this.setGrayhead)):(this._skin.offLineSp.visible=!1,this.tirenBtn.visible=!1,this.headImg.filters=null,this.offlineimg.visible=!1,this.offlineTf.visible=!1,t.timer.clear(this,this.setGrayhead),this.model.playerByPos(this.model.getChairPosByDir(this.dir)).canKick=!1,this.stopCutDownOffline())},e.startCutDownOffline=function(){f.instance.on("ON_LITTLETIMEER",this,this.onCutdown)},e.stopCutDownOffline=function(){f.instance.off("ON_LITTLETIMEER",this,this.onCutdown),this.offlineTf.visible=!1},e.onCutdown=function(){null!=this.model.playerByPos(this.model.getChairPosByDir(this.dir))&&(this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime--,this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime<=0&&(this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime=0,this.stopCutDownOffline()),(0/0==this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime||void 0==this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime)&&(this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime=0),this.offlineTf.text=this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime+"")},e.setGrayhead=function(){this.headImg.filters=[b.grayscaleFilter],this.offlineimg.visible=!0},e.playFlyHeadImg=function(){},o(0,e,"skin",function(){return this._skin}),o(0,e,"model",function(){return ae.instance.gameContext.model}),o(0,e,"controller",function(){return ae.instance.gameContext.controller}),s(i,["DIRPOS_REFERENCE",function(){return this.DIRPOS_REFERENCE=[{x:6,y:530},{x:955,y:326},{x:921,y:199},{x:794,y:114},{x:663,y:66},{x:465,y:53},{x:306,y:66},{x:172,y:114},{x:39,y:199},{x:4,y:325}]}]),i}(),X=function(){function i(){this.expressUrl="res/swfs/",this.loadedArr=[],this.offsetX=-60,this.offsetY=-60,this._mcMap=new u}var e;n(i,"modules.nnGame.inerGame.view.playerInfoPart.GiftEff",null,"GiftEff$1");var s=i.prototype;return s.showGiftEff=function(i,e,t){var s=new k;s.load(this.expressUrl+r.giftConfig[t-1].name+".swf",!0);var n=r.giftConfig[t-1].sound,o=parseInt(r.giftConfig[t-1].sounddelay);-1!=this.loadedArr.indexOf(s.basePath)?this.onLoaded(s,i,e,n,o):s.on("loaded",this,this.onLoaded,[s,i,e,n,o])},s.onLoaded=function(i,e,t,s,n){-1==this.loadedArr.indexOf(i.basePath)&&this.loadedArr.push(i.basePath),i.stop(),G.instance.popLayer.addChild(i),i.x=J.DIRPOS_REFERENCE[e].x+this.offsetX,i.y=J.DIRPOS_REFERENCE[e].y+this.offsetY;var o=0,a=0;o=J.DIRPOS_REFERENCE[t].x+this.offsetX,a=J.DIRPOS_REFERENCE[t].y+this.offsetY,N.to(i,{x:o,y:a},400,null,new C(this,this.onCompeteTween,[i,s,n]))},s.onCompeteTween=function(i,e,s){i.playTo(0,i.count-2,C.create(this,this.playEnd,[i])),t.timer.once(3e3,this,this.playEnd,[i]),0==s?T.playEffect(e):t.timer.once(s,this,this.playSound,[e],!1)},s.playSound=function(i){T.playEffect(i)},s.playEnd=function(i){i&&i.removeSelf()},o(1,i,"instance",function(){return null==i._instance&&(i._instance=new i(new e)),i._instance}),i._instance=null,i.__init$=function(){e=function(){function i(){}return n(i,""),i}()},i}(),j=function(){function i(){this.uid=0,this._skin=null,this._skin=new z,this._skin.giftList.itemRender=fe,this._skin.giftList.spaceX=10,this._skin.giftList.selectEnable=!0,this._skin.giftList.selectHandler=new C(this,this.onSelectRound),this._skin.giftList.renderHandler=new C(this,this.updateRoundItem),this._skin.giftList.dataSource=r.giftConfig,this._skin.giftList.refresh()}var e;n(i,"modules.nnGame.inerGame.view.playerInfoPart.UserInfoPage",null,"UserInfoPage$1");var t=i.prototype;return t.show=function(i,e,t){this.uid=i,this._skin.idTf.text="ID: "+i,this._skin.nickName.text=ae.instance.gameContext.model.playerByUid(i).nickname,this._skin.diamondTf.text=M.Diamond+"",b.AddCenter(this._skin,G.instance.popLayer);var s=new E;s.loadImage(t,0,0,this._skin.imgPhoto.width,this._skin.imgPhoto.height),this._skin.imgPhoto.addChild(s),this._skin.mouseEnabled=!0,this._skin.clickBg.once("click",this,this.onCloseUserInfo),this._skin.giftList.refresh(),i==M.uid?(this._skin.diamond.visible=!0,this._skin.diamondTf.visible=!0):(this._skin.diamond.visible=!1,this._skin.diamondTf.visible=!1)},t.onCloseUserInfo=function(i){this._skin&&i.target==this._skin.clickBg&&this._skin&&this._skin.removeSelf()},t.hide=function(){this._skin&&this._skin.removeSelf()},t.onSelectRound=function(i){console.log("当前选择的索引："+i)},t.updateRoundItem=function(i){i.setData(i.dataSource,this.uid)},o(1,i,"instance",function(){return null==i._instance&&(i._instance=new i(new e)),i._instance}),i._instance=null,i.__init$=function(){e=function(){function i(){}return n(i,""),i}()},i}(),Z=function(){function i(i){this.skin=null,this.state=-1,this.cardIdx=0,this.skin=i,this.init()}n(i,"modules.nnGame.inerGame.view.pockerPart.card.BasePocker");var e=i.prototype;return e.init=function(){},e.up=function(){0!=this.state&&(this.skin.valueImg.visible=!0,this.skin.backImg.visible=!1,this.state=0)},e.back=function(){1!=this.state&&(this.skin.backImg.visible=!0,this.skin.valueImg.visible=!1,this.state=1)},e.down=function(){2!=this.state&&(this.skin.backImg.visible=!1,this.skin.valueImg.visible=!0,this.state=2)},e.show=function(){this.skin.visible=!0},e.hide=function(){this.skin.visible=!1},e.setCardImg=function(e){this.cardIdx!=e&&(i.CARD_REFERENCE.hasOwnProperty(e.toString())&&(this.skin.valueImg.skin="poker/"+i.CARD_REFERENCE[e.toString()]),this.cardIdx=e)},e.reset=function(){this.hide(),this.skin.backImg.visible=!1,this.skin.valueImg.visible=!1,this.skin.shadowImg.visible=!1,this.state=-1,this.select=!1},o(0,e,"visible",function(){return this.skin.visible}),o(0,e,"canControl",null,function(){}),o(0,e,"select",function(){return!1},function(){}),o(0,e,"view",function(){return ae.instance.gameContext.view}),o(0,e,"model",function(){return ae.instance.gameContext.model}),i.getT=function(i){return Math.floor(i/100)},i.getV=function(i){return i%100},i.getVShang=function(i){var e=i%100;return 14==e?e=1:16==e&&(e=2),e},i.getVNn=function(i){var e=i%100;return 14==e?e=1:16==e&&(e=2),e>=10&&(e=10),e},i.checkIsHua=function(i){var e=i%100;return 11==e||12==e||13==e?!0:!1},i.PAIXING_MEINIU=0,i.PAIXING_NIUYI=1,i.PAIXING_NIUER=2,i.PAIXING_NIUSAN=3,i.PAIXING_NIUSI=4,i.PAIXING_NIUWU=5,i.PAIXING_NIULIU=6,i.PAIXING_NIUQI=7,i.PAIXING_NIUBA=8,i.PAIXING_NIUJIU=9,i.PAIXING_NIUNIU=10,i.PAIXING_TONGHUA=11,i.PAIXING_SHUNZI=12,i.PAIXING_HULU=13,i.PAIXING_WUHUA=14,i.PAIXING_WUXIAO=15,i.PAIXING_ZHADAN=16,i.PAIXING_TONGSHUN=17,i.TYPE_WANG=5,i.PREPATH="poker/",i.STATE_UP=0,i.STATE_BACK=1,i.STATE_DOWN=2,s(i,["CARD_REFERENCE",function(){return this.CARD_REFERENCE={551:"xiao_w.png",552:"da_w.png",414:"hong_1.png",416:"hong_2.png",403:"hong_3.png",404:"hong_4.png",405:"hong_5.png",406:"hong_6.png",407:"hong_7.png",408:"hong_8.png",409:"hong_9.png",410:"hong_10.png",411:"hong_j.png",412:"hong_q.png",413:"hong_k.png",314:"fang_1.png",316:"fang_2.png",303:"fang_3.png",304:"fang_4.png",305:"fang_5.png",306:"fang_6.png",307:"fang_7.png",308:"fang_8.png",309:"fang_9.png",310:"fang_10.png",311:"fang_j.png",312:"fang_q.png",313:"fang_k.png",214:"hei_1.png",216:"hei_2.png",203:"hei_3.png",204:"hei_4.png",205:"hei_5.png",206:"hei_6.png",207:"hei_7.png",208:"hei_8.png",209:"hei_9.png",210:"hei_10.png",211:"hei_j.png",212:"hei_q.png",213:"hei_k.png",114:"mei_1.png",116:"mei_2.png",103:"mei_3.png",104:"mei_4.png",105:"mei_5.png",106:"mei_6.png",107:"mei_7.png",108:"mei_8.png",109:"mei_9.png",110:"mei_10.png",111:"mei_j.png",112:"mei_q.png",113:"mei_k.png"}}]),i}(),q=function(){function i(i){this._skin=null,this.card=null,this.dragRec=new A(0,-180,0,660),this._skin=i,this.init()
}n(i,"modules.nnGame.inerGame.view.pockerPart.CuoPart");var e=i.prototype;return e.init=function(){this.card=new re(this._skin.card),this.card.reset(),this._skin.dragBox.on("mousedown",this,this.onDrag),this._skin.dragBox.on("mouseout",this,this.onStopDrag),this._skin.dragBox.on("mouseup",this,this.onStopDrag),this._skin.on("click",this,this.onClickThis),t.stage.on("click",this,this.onClickStage)},e.onClickStage=function(){this.hide()},e.onClickThis=function(i){i.stopPropagation()},e.onDrag=function(){this._skin.dragBox.startDrag(this.dragRec,!0,0)},e.onStopDrag=function(){this._skin.dragBox.y<=-180||this._skin.dragBox.y>=40?(this._skin.dragBox.visible=!1,ae.instance.gameContext.view.nnPage.handlePart.playFanEff(this.model.selfChairPos,!1),ae.instance.gameContext.view.nnPage.handleBtns.showCtlBtns()):(this._skin.dragBox.x=0,this._skin.dragBox.y=0)},e.show=function(i){this._skin.visible=!0,this.card.setCardImg(i),this.card.show(),this.card.down(),this._skin.dragBox.x=0,this._skin.dragBox.y=0,this._skin.dragBox.visible=!0},e.hide=function(){this._skin.visible=!1},e.reset=function(){this._skin.dragBox.x=0,this._skin.dragBox.y=0,this._skin.dragBox.visible=!0,this.hide()},o(0,e,"model",function(){return ae.instance.gameContext.model}),i}(),Y=function(){function i(i,e,t,s,n){this.singleBtnW=183,this.gap=20,this._skin=null,this.state=-1,this._tishiBtn=null,this._showBtn=null,this._cuoBtn=null,this._fanBtn=null,this._skin=i,this._tishiBtn=e,this._showBtn=t,this._cuoBtn=s,this._fanBtn=n,this.init()}n(i,"modules.nnGame.inerGame.view.pockerPart.HandleBtnsPart",null,"HandleBtnsPart$1");var e=i.prototype;return e.init=function(){this.addListener()},e.showQiangBox=function(){0!=this.model.isSelfSitDown&&0!=this.model.handleCards[this.model.selfChairPos].length&&(this.hide(),this._skin.visible=!0,this._skin.fenBox.visible=!1,this._skin.qiangBox.visible=!0)},e.showFenBox=function(){0!=this.model.isSelfSitDown&&0!=this.model.handleCards[this.model.selfChairPos].length&&(this.hide(),this._skin.visible=!0,this._skin.fenBox.visible=!0,this._skin.qiangBox.visible=!1)},e.showCuo=function(){0!=this.model.isSelfSitDown&&0!=this.model.handleCards[this.model.selfChairPos].length&&(this.hide(),this._cuoBtn.visible=!0,this._fanBtn.visible=!0)},e.showCtlBtns=function(){0!=this.model.isSelfSitDown&&0!=this.model.handleCards[this.model.selfChairPos].length&&(this.hide(),this._tishiBtn.visible=!0,this._showBtn.visible=!0)},e.addListener=function(){this._tishiBtn.on("click",this,this.onClickTishi),this._showBtn.on("click",this,this.onClickShowBtn),this._skin.bei0.on("click",this,this.onClickBeiBtn,[0]),this._skin.bei1.on("click",this,this.onClickBeiBtn,[1]),this._skin.bei2.on("click",this,this.onClickBeiBtn,[2]),this._skin.bei3.on("click",this,this.onClickBeiBtn,[3]),this._skin.bei4.on("click",this,this.onClickBeiBtn,[4]),this._skin.fen2.on("click",this,this.onClickFenBtn,[2]),this._skin.fen4.on("click",this,this.onClickFenBtn,[4]),this._cuoBtn.on("click",this,this.onClickCuo),this._fanBtn.on("click",this,this.onClickFan)},e.onClickCuo=function(i){this.view.nnPage.cuoPart.show(this.model.handleCards[this.model.selfChairPos][this.model.handleCards[this.model.selfChairPos].length-1]),i.stopPropagation()},e.onClickFan=function(){this.view.nnPage.handlePart.playFanEff(this.model.selfChairPos,!0),this.showCtlBtns()},e.onClickTishi=function(){var i=this.model.handleCards[this.model.selfChairPos].concat();i.sort(L.compCardsFun);var e=U.getJishuArrData(i),t=L.getPaixing(i,e,!1);if(this.view.nnPage.handlePart.showPaixing(this.model.selfChairPos,t),1==L.isNiuPaixing(t)){var s=O.getNiuData(i);s.niuNum>0&&this.view.nnPage.handlePart.setSelfPockSele(s.ThreeArr)}},e.onClickShowBtn=function(){var i={Sid:M.SID};this.controller.sendMsgCommond(B.getProtoMessage(1201,i)),this.reset()},e.onClickBeiBtn=function(i){var e={Sid:M.SID,Fen:i};this.controller.sendMsgCommond(B.getProtoMessage(1200,e)),this.reset()},e.onClickFenBtn=function(i){var e={Sid:M.SID,Fen:i};this.controller.sendMsgCommond(B.getProtoMessage(1207,e)),this.reset()},e.show=function(){this._skin.visible=!0},e.hide=function(){this._skin.visible=!1,this._tishiBtn.visible=!1,this._showBtn.visible=!1,this._cuoBtn.visible=!1,this._fanBtn.visible=!1},e.reset=function(){this.hide()},o(0,e,"model",function(){return ae.instance.gameContext.model}),o(0,e,"visible",function(){return this._skin.visible}),o(0,e,"controller",function(){return ae.instance.gameContext.controller}),o(0,e,"view",function(){return ae.instance.gameContext.view}),i}(),W=function(){function i(i,e,t,s,n,o,a,h,r,l){this._dir0=null,this._dir1=null,this._dir2=null,this._dir3=null,this._dir4=null,this._dir5=null,this._dir6=null,this._dir7=null,this._dir8=null,this._dir9=null,this._PosChairVec=[],this._dir0=new le(i),this._dir1=new de(e,1),this._dir2=new de(t,2),this._dir3=new de(s,3),this._dir4=new de(n,4),this._dir5=new de(o,5),this._dir6=new de(a,6),this._dir7=new de(h,7),this._dir8=new de(r,8),this._dir9=new de(l,9),this.allReset()}n(i,"modules.nnGame.inerGame.view.pockerPart.HandlePart",null,"HandlePart$1");var e=i.prototype;return e.allReset=function(){this._dir0.reset(),this._dir1.reset(),this._dir2.reset(),this._dir3.reset(),this._dir4.reset(),this._dir5.reset(),this._dir6.reset(),this._dir7.reset(),this._dir8.reset(),this._dir9.reset()},e.setChairNum=function(i){switch(void 0===i&&(i=10),this._PosChairVec.length=0,i){case 10:this._PosChairVec.push(this._dir0,this._dir1,this._dir2,this._dir3,this._dir4,this._dir5,this._dir6,this._dir7,this._dir8,this._dir9)}this.reset()},e.updateAllCards=function(i){var e=0,t=i.length;for(e=0;t>e;e++){var s=this.model.getChairDirByPos(e);this._PosChairVec[s].showCards(i[e],s)}},e.updateOnePosAllCards=function(i,e){console.log("pos ::"+i);var t=this.model.getChairDirByPos(i);console.log("dir ::"+t),console.log("_PosChairVec[dir] ::"+this._PosChairVec[t]),this._PosChairVec[t].showCards(e,t)},e.playQipaiEff=function(i,e){var t=this.model.getChairDirByPos(i);this._PosChairVec[t].playQipaiEff(e)},e.playFanEff=function(i,e){void 0===e&&(e=!0);var t=this.model.getChairDirByPos(i);this._PosChairVec[t].playFanEff(e)},e.setSelfPockSele=function(i){var e=this.model.getChairDirByPos(this.model.selfChairPos);this._PosChairVec[e].seleCards=i},e.getSelfSelePockers=function(){var i=this.model.getChairDirByPos(this.model.selfChairPos);return this._PosChairVec[i].seleCards},e.showPaixing=function(i,e){var t=this.model.getChairDirByPos(i);this._PosChairVec[t].showPaixing(i,e)},e.showComp=function(i){var e=this.model.getChairDirByPos(i);this._PosChairVec[e].showComp(i)},e.reset=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].reset();this.canControl(this.model.selfChairPos,!1)},e.canControl=function(i,e){this._PosChairVec[this.model.getChairDirByPos(i)].canControl=e},o(0,e,"model",function(){return ae.instance.gameContext.model}),i}(),$=function(){function i(i){this.state=0,this.skin=null,this.fromPos=[{x:174,y:-218},{x:174,y:-218},{x:174,y:-218},{x:174,y:-218},{x:217,y:-218}],this.toPos=[{x:0,y:0},{x:87,y:0},{x:174,y:0},{x:261,y:0},{x:390,y:0}],this._pockers=a(5,null),this.skin=i,this.init()}n(i,"modules.nnGame.inerGame.view.pockerPart.singlePart.handlePart.BaseSingleHandlePart",null,"BaseSingleHandlePart$1");var e=i.prototype;return e.init=function(){},e.showCards=function(){},e.up=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].up()},e.back=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].back()},e.down=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].down()},e.showComp=function(){},e.showPaixing=function(){},e.hideAll=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].hide()},e.playQipaiEff=function(i){var e=0,s=this._pockers.length;if(i)this._pockers[4].skin.alpha=0,this._pockers[4].skin.x=this.fromPos[4].x,this._pockers[4].skin.y=this.fromPos[4].y,this._pockers[4].back(),this.onSingleQiEff(4,i);else for(e=0;s-1>e;e++)this._pockers[e].skin.alpha=0,this._pockers[e].skin.x=this.fromPos[e].x,this._pockers[e].skin.y=this.fromPos[e].y,this._pockers[e].back(),t.timer.frameOnce(2*e,this,this.onSingleQiEff,[e,i],!1)},e.onSingleQiEff=function(i,e){D.playSound("res/sounds/pinshi/effect/sound_fapai.mp3"),this._pockers[i].skin.alpha=.1,N.to(this._pockers[i].skin,{x:this.toPos[i].x,y:this.toPos[i].y,alpha:1},100,null,C.create(this,this.onCompEff,[i,e]))},e.onCompEff=function(i){this._pockers[i].up()},e.playFanEff=function(i){void 0===i&&(i=!0)},e.reset=function(){var i=0,e=this._pockers.length;for(i=0;e>i;i++)this._pockers[i].reset()},e.show=function(){this.skin.visible=!0},e.hide=function(){this.skin.visible=!1},o(0,e,"canControl",null,function(i){var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].canControl=i}),o(0,e,"visible",function(){return this.skin.visible}),o(0,e,"seleCards",function(){return null},function(){}),o(0,e,"model",function(){return ae.instance.gameContext.model}),i.STATE_NOMAL=0,i}(),ie=function(){function i(i){this._skin=null,this.leftTime=0,this.stage=-1,this.isIncutDown=!1,this._skin=i}n(i,"modules.nnGame.inerGame.view.pockerPart.TimeTipView");var e=i.prototype;return e.showReadyLeft=function(i){void 0===i&&(i=8),this.stage=1,this.leftTime=i,this.show(),this.startCutdown()},e.showZhuangLeft=function(i){void 0===i&&(i=10),this.stage=2,this.leftTime=i,this.show(),this.startCutdown()},e.showXiazhuLeft=function(i){void 0===i&&(i=10),this.stage=3,this.leftTime=i,this.show(),this.startCutdown()},e.showLiangLeft=function(i){void 0===i&&(i=12),this.stage=4,this.leftTime=i,this.show(),this.startCutdown()},e.startCutdown=function(){1!=this.isIncutDown&&(this.isIncutDown=!0,V.instance.timer.loop(1e3,this,this.onCutDown))},e.stopCutdown=function(){0!=this.isIncutDown&&(this.isIncutDown=!1,V.instance.timer.clear(this,this.onCutDown))},e.onCutDown=function(){switch(this.leftTime-=1,this.leftTime<0&&(this.leftTime=0,this.stopCutdown()),this.stage){case 1:this._skin.tipTf.text="准备剩余"+this.leftTime+"s";break;case 2:this._skin.tipTf.text="抢庄剩余"+this.leftTime+"s";break;case 3:this._skin.tipTf.text="下注剩余"+this.leftTime+"s";break;case 4:this._skin.tipTf.text="亮牌剩余"+this.leftTime+"s"}},e.show=function(){this._skin.visible=!0},e.hide=function(){this._skin.visible=!1},e.reset=function(){this._skin.visible=!1},i}(),ee=function(){function i(i){this._skin=null,this._PowerBarOrignalW=0/0,this._infosimbol=null,this._skin=i,this._infosimbol=this._skin.infoSImg,this._infosimbol.visible=!1,i.mouseThrough=!0,this._skin.option.on("click",this,this.onClickOption),this._skin.scoreList.on("click",this,this.onClickScoreListBtn),this._skin.infoListBtn.on("click",this,this.onClickInfoListBtn),this._skin.helpBtn.on("click",this,this.onClickHelpBtn),this._skin.setBtn.on("click",this,this.onClickSetBtn),f.instance.on("COMMON_INFOLIST_NOTICE",this,this.onGotInfo)}n(i,"modules.nnGame.inerGame.view.TableInfoPage",null,"TableInfoPage$1");var e=i.prototype;return e.onClickHelpBtn=function(){c.instance.commonContext.view.gameHelpView.show()},e.playVoicePlay=function(){t.timer.frameLoop(1,this,this.onTimeLoop)},e.onTimeLoop=function(){this._skin.voicePlay.rotation%360==0&&(this._skin.voicePlay.rotation=0),this._skin.voicePlay.rotation+=10},e.stopVoicePlay=function(){t.timer.clear(this,this.onTimeLoop)},e.updateRoomId=function(){Number(this._skin.roomNumTf.text)!=M.roomid&&(this._skin.roomNumTf.text=""+M.roomid)},e.onClickSetBtn=function(){c.instance.commonContext.view.settingView.showOrHide()},e.onClickOption=function(i){i.stopPropagation(),T.instance.playClickBtnSound(),c.instance.commonContext.view.functionOption.showOrHide(-350,0)},e.onClickScoreListBtn=function(i){var e={uniqueCode:M.uniqueCode};console.log(M.roomid),f.instance.event("SOCKET_SEND",B.getProtoMessage(404,e)),T.instance.playClickBtnSound(),c.instance.commonContext.view.timeWarView.showOrHide(),i.stopPropagation()},e.onClickInfoListBtn=function(i){this._infosimbol.visible=!1,T.instance.playClickBtnSound(),c.instance.commonContext.view.infoListView.showOrHide(),i.stopPropagation()},e.onGotInfo=function(){this._infosimbol.visible=!0},e.updateLeftRound=function(i){void 0===i&&(i=!0);var e=this.model.srddzMsgs.ACK_RoomInfo,t=e.Rule,s=r.getRule(t[1]);0==s.type&&(e.totalRound=s.value,this._skin.roundCountTf.text=e.RoundCount+1>s.value?""+e.RoundCount+"/"+s.value:""+(e.RoundCount+1)+"/"+s.value),1==this.model.isGameStart||e.RoundCount>=1?this._skin.weikaishiBox.visible=!1:(M.leftDissolveTime=e.disbandLeftTime,this._skin.leftDissolveTf.text=r.getTFmt(M.leftDissolveTime,!0),this._skin.weikaishiBox.visible=!0,this.startDissolveCutdown())},e.updateKaijuren=function(i){(null==i||""==i)&&(i="无"),this._skin.kaijuTf.text="开局人："+i;var e=this.model.srddzMsgs.ACK_RoomInfo,t=e.Rule,s=r.getRule(t[2]);this._skin.payType.text=24==s.id?"房主付费":"共同付费"},e.startDissolveCutdown=function(){f.instance.on("ON_LITTLETIMEER",this,this.onCutDown1)},e.stopDissolveCutdown=function(){f.instance.off("ON_LITTLETIMEER",this,this.onCutDown1)},e.onCutDown1=function(i){M.leftDissolveTime-=i,M.leftDissolveTime<0&&(M.leftDissolveTime=0,this.stopDissolveCutdown()),this._skin.leftDissolveTf.text=r.getTFmt(M.leftDissolveTime,!0)},e.reset=function(){},o(0,e,"model",function(){return ae.instance.gameContext.model}),i}(),te=function(i){function e(){e.__super.call(this)}n(e,"modules.nnGame.controller.NnMainController",i);var t=e.prototype;return t.onAdd=function(){M.isReplay||f.instance.on("MESSAGE_GAME",this,this.onMsg)},t.onRemove=function(){M.isReplay||f.instance.off("MESSAGE_GAME",this,this.onMsg)},t.onMsg=function(i){1!=ae.isPauseGameQueue&&this.procMsg(i)},t.procMsg=function(i){i instanceof net.Message&&i.complete(),console.log("acc msgId::"+i.messageId);var e;switch(i.messageId){case 560:e=M.isReplay?i.body:r.proto.ACKBC_Into_Room.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Into_Room(e);break;case 607:e=M.isReplay?i.body:r.proto.ACKBC_Sitdown.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Sitdown(e);break;case 608:e=M.isReplay?i.body:r.proto.ACKBC_Standup.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Standup(e);break;case 520:e=M.isReplay?i.body:r.proto.ACK_RoomInfo.decode(i.params[0]),ae.instance.gameContext.controller.ACK_RoomInfo(e);break;case 525:e=M.isReplay?i.body:r.proto.ACK_Room_User.decode(i.params[0]),ae.instance.gameContext.controller.ACK_Room_User(e);break;case 1506:e=M.isReplay?i.body:r.proto.ACKBC_Sddz_Start.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Sddz_Start(e);break;case 615:e=M.isReplay?i.body:r.proto.ACK_User_SeatCard.decode(i.params[0]),ae.instance.gameContext.controller.ACK_User_SeatCard(e);break;case 1508:e=M.isReplay?i.body:r.proto.ACKBC_Sddz_JiaoDizhu.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Sddz_JiaoDizhu(e);break;case 1509:e=M.isReplay?i.body:r.proto.ACKBC_Sddz_Mingpai.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Sddz_Mingpai(e);break;case 1510:e=M.isReplay?i.body:r.proto.ACKBC_Sddz_Jiabei.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Sddz_Jiabei(e);break;case 1513:e=M.isReplay?i.body:r.proto.ACKBC_Nn_Xiazhu.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Nn_Xiazhu(e);break;case 700:e=M.isReplay?i.body:r.proto.ACKBC_CurPlayer.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_CurPlayer(e);break;case 1500:M.isReplay||(e=r.proto.ACKBC_Sddz_Jiaofen.decode(i.params[0])),ae.instance.gameContext.controller.ACKBC_Sddz_Jiaofen(e);break;case 1501:M.isReplay||(e=r.proto.ACKBC_Sddz_Dizhu.decode(i.params[0])),ae.instance.gameContext.controller.ACKBC_Sddz_Dizhu(e);break;case 600:e=M.isReplay?i.body:r.proto.ACKBC_Ready.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Ready(e);break;case 580:e=M.isReplay?i.body:r.proto.ACKBC_Exit_Room.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Exit_Room(e);break;case 900:e=M.isReplay?i.body:r.proto.NotifyStartGame.decode(i.params[0]),ae.instance.gameContext.controller.NotifyStartGame(e);break;case 880:e=M.isReplay?i.body:r.proto.ACKBC_SendMsg.decode(i.params[0]),ae.instance.gameContext.view.onRecChat(e);break;case 1503:e=M.isReplay?i.body:r.proto.ACKBC_Sddz_End.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Sddz_End(e);break;case 1505:e=M.isReplay?i.body:r.proto.ACKBC_Sddz_Card_Init.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Sddz_Card_Init(e);break;case 1504:e=M.isReplay?i.body:r.proto.ACKBC_Sddz_Total.decode(i.params[0]),ae.instance.gameContext.controller.ACKBC_Sddz_Total(e);break;case 920:e=M.isReplay?i.body:r.proto.TotalSummary.decode(i.params[0]),ae.instance.gameContext.controller.NOTIFY_Summary(e);break;case 800:e=M.isReplay?i.body:r.proto.AckDisband.decode(i.params[0]),ae.instance.gameContext.controller.AckDisband(e);break;case 940:e=M.isReplay?i.body:r.proto.NotifyDisband.decode(i.params[0]),ae.instance.gameContext.controller.NotifyDisband(e);break;case 960:e=M.isReplay?i.body:r.proto.NotifyUserState.decode(i.params[0]),ae.instance.gameContext.controller.NotifyUserState(e);break;case 972:e=M.isReplay?i.body:r.proto.NotifyDestoryRoom.decode(i.params[0]),ae.instance.gameContext.controller.NotifyDestoryRoom(e);break;case 971:e=M.isReplay?i.body:r.proto.NotifyKick.decode(i.params[0]),ae.instance.gameContext.controller.NotifyKick(e);break;case 980:e=M.isReplay?i.body:r.proto.KickResponse.decode(i.params[0]),ae.instance.gameContext.controller.KickResponse(e);break;case 1e3:e=M.isReplay?i.body:r.proto.MSG_ACK_Gift.decode(i.params[0]),ae.instance.gameContext.controller.MSG_ACK_Gift(e);break;case"":break;case"":}M.isReplay},e}(h),se=function(i){function e(){this.pop=null,this.dissolvePage=null,e.__super.call(this),this.setType(2)}n(e,"modules.nnGame.inerGame.controller.NnController",i);var s=e.prototype;return s.onAdd=function(){i.prototype.onAdd.call(this)},s.onRemove=function(){i.prototype.onRemove.call(this)},s.discard=function(){},s.ACK_RoomInfo=function(i){console.log("ACK_Room_Info",i,"ACK_Room_Info"),this.model.srddzMsgs.ACK_RoomInfo=i,this.model.roomOwnerUid=i.RoomOwner,M.uniqueCode=i.uniqueCode,M.roomtype=i.Type,M.Rule=i.Rule,M.isReplay&&(M.roomid=i.RID),1==this.model.gameHasStarted&&(this.view.nnPage.timeTip.showReadyLeft(i.leftTime),this.model.isReConn=!0),console.log(M.uniqueCode),1==i.gameState&&(this.model.isGameStart=!0,this.view.playerInfoPage.hideBtnsByGameStart(),this.view.playerInfoPage.hideReadySimbol()),this.view.playerInfoPage.updateLeaveDisbandBtns(),M.isReplay&&(this.model.srddzMsgs.ACK_RoomInfo.isGameStart=1),this.view.tableInfoPage.updateLeftRound(),this.view.tableInfoPage.updateKaijuren(i.nickName),i.direction||(i.direction=0),this.view.tableInfoPage.updateRoomId()},s.ACK_Room_User=function(i){console.log("ACK_Room_User",i,"ACK_Room_User"),this.model.srddzMsgs.ACK_Room_User=i,this.model.updatePlayerInfoVec(i.Users),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.updateLeaveDisbandBtns()},s.ACKBC_Into_Room=function(i){console.log("ACKBC_Into_Room"),console.log(i),console.log("ACKBC_Into_Room"),this.model.srddzMsgs.ACKBC_Into_Room=i,M.roomid=i.RID,this.view.tableInfoPage.updateRoomId(),i.nickname=i.Name,i.uid=i.UID,i.ip=i.IP,i.pos=i.Index,i.golds=i.Coin,this.model.updateOnePlayerInfo(i),this.view.playerInfoPage.updateOnePlayerInfo(i),this.view.playerInfoPage.updateSitDownUpBtn(),f.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+i.nickname+"]进入了房间！"})},s.ACKBC_Sitdown=function(i){if(this._actived&&(console.log("MSG_ACKBC_Sitdown",i),this.model.srddzMsgs.ACKBC_Sitdown=i,this.model.sitDown(i.uid,i.index,i.score),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.updateSitDownUpBtn(),this.view.playerInfoPage.updateLeaveDisbandBtns(),this.view.tableInfoPage.updateKaijuren(i.nickName),i.uid==M.selfuid))if(0==this.model.isGameStart){var e={sid:M.SID};this.sendMsgCommond(B.getProtoMessage(210,e))}else{this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.nnPage.handlePart.updateAllCards(this.model.handleCards);for(var t=0;t<this.model.chairNum;t++){var s=this.model.playerByPos(t);null!=s&&(1==this.model.stage?1==s.haveJiao&&this.view.playerInfoPage.showQiangBei(t,s.jiaofen):2==this.model.stage?t!=this.model.zhuangPos&&1==s.haveXiazhu&&this.view.playerInfoPage.showXiazhu(t,this.model.xiazhuVec[t]):3==this.model.stage&&(1==this.model.mingpaiVec[t]&&this.view.nnPage.handlePart.showComp(t),t!=this.model.zhuangPos&&this.view.playerInfoPage.showXiazhu(t,this.model.xiazhuVec[t])))}(2==this.model.stage||3==this.model.stage)&&this.view.playerInfoPage.showZhuang()}},s.ACKBC_Standup=function(i){this._actived&&(console.log("MSG_ACKBC_Standup",i),this.model.srddzMsgs.ACKBC_Standup=i,this.model.standup(i.uid,i.index),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.updateSitDownUpBtn(),this.view.playerInfoPage.updateStartBtn(),this.view.tableInfoPage.updateKaijuren(i.nickName),f.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+this.model.getPlayerNicknameByUid(i.uid)+"]站起了！"}))},s.ACKBC_Ready=function(i){if(this.actived){if(console.log("ACKBC_Ready"),console.log(i),console.log("ACKBC_Ready"),1==this.model.isGameStart)return;T.instance.playReadySound(),this.model.srddzMsgs.ACKBC_Ready=i,i.uid=i.UID,i.pos=this.model.getPlayerPosByUid(i.uid),this.model.updateReadyState(i.pos,!0,0),this.view.playerInfoPage.showReady(i.pos),i.pos==this.model.selfChairPos&&(this.view.playerInfoPage.hideReadyBtn(),this.view.playerInfoPage.hideZhuang(),this.view.playerInfoPage.hideQiangAndXia(),console.log("ready.........."),this.model.reset(),this.view.nnPage.reset(!1))}},s.NotifyStartGame=function(i){this.actived&&(console.log("NotifyStartGame::"+i+"NotifyStartGame"),this.model.srddzMsgs.NotifyStartGame=i,i.uid==M.selfuid&&this.view.playerInfoPage.showStartBtn())},s.ACKBC_Sddz_Start=function(i){this.actived&&(console.log("ACKBC_Sddz_Start",i,"ACKBC_Sddz_Start"),this.model.srddzMsgs.ACKBC_Sddz_Start=i,this.model.srddzMsgs.ACK_RoomInfo.RoundCount=i.RoundCount,this.resetSelf(),this.model.isGameStart=!0,this.view.startGame(),this.view.playerInfoPage.hideReadySimbol(),this.view.playerInfoPage.hideBtnsByGameStart(),this.view.playerInfoPage.updateLeaveDisbandBtns(),this.view.tableInfoPage.updateRoomId(),this.view.tableInfoPage.updateLeftRound(),D.playSound("res/sounds/pinshi/effect/gamestart.mp3"))},s.ACK_User_SeatCard=function(i){if(this.actived){this.model.isClientPrePop=!1,console.log("ACK_User_SeatCard",i,"ACK_User_SeatCard"),console.log(this.model.srddzMsgs.ACKBC_Sddz_Start,"----------------------------------"),this.model.srddzMsgs.ACK_User_SeatCard=i;var e=0,t=0,s=0,n=[];for(e=0;e<i.Cards.length;e++)if(null!=this.model.playerByPos(e)){if(i.Cards[e].List.length!=i.Cards[e].ListLen)for(s=0;s<i.Cards[e].ListLen;s++)i.Cards[e].List.push({CID:0});for(n.length=0,t=0;t<i.Cards[e].List.length;t++)n.push(i.Cards[e].List[t].CID);if(this.model.updateHandleCards(e,n),this.view.nnPage.handlePart.updateOnePosAllCards(e,this.model.handleCards[e]),4==n.length&&0==this.model.isReConn&&this.view.nnPage.handlePart.playQipaiEff(e,!1),5==n.length&&0==this.model.isReConn&&this.view.nnPage.handlePart.playQipaiEff(e,!0),i.Cards[e].Out)for(t=0;t<i.Cards[e].Out.length;t++)this.model.outputCards[e].push(i.Cards[e].Out[t].CID)}}},s.ACKBC_Sddz_Card_Init=function(i){if(this.actived){console.log("ACKBC_Sddz_Card_Init",i,"ACKBC_Sddz_Card_Init"),this.model.srddzMsgs.ACKBC_Sddz_Card_Init=i,this.model.stage=i.Stage,this.model.difen=i.Difen,this.model.beishu=i.Beishu,void 0==i.BaodaoNum&&(i.BaodaoNum=0);var e=0;for(e=0;e<this.model.chairNum;e++)1==this.model.stage?(this.view.nnPage.timeTip.showZhuangLeft(i.BaodaoNum),1==i.HaveJiao[e]?(this.model.playerByPos(e)&&(this.model.playerByPos(e).jiaofen=i.JiaoFen[e],this.model.playerByPos(e).haveJiao=!0),this.view.playerInfoPage.showQiangBei(e,i.JiaoFen[e])):(this.model.isSelfSitDown&&e==this.model.selfChairPos&&this.view.nnPage.handleBtns.showQiangBox(),this.model.playerByPos(e)&&(this.model.playerByPos(e).haveJiao=!1))):(this.model.zhuangPos=i.DizhuIndex,this.model.xiazhuVec[e]=i.XiaZhu[e],2==this.model.stage?(this.view.nnPage.timeTip.showXiazhuLeft(i.BaodaoNum),e!=this.model.zhuangPos&&(1==i.HaveJiabei[e]?(this.view.playerInfoPage.showXiazhu(e,this.model.xiazhuVec[e]),this.model.playerByPos(e)&&(this.model.playerByPos(e).haveXiazhu=!0)):(this.model.isSelfSitDown&&e==this.model.selfChairPos&&this.view.nnPage.handleBtns.showFenBox(),this.model.playerByPos(e)&&(this.model.playerByPos(e).haveXiazhu=!1)))):3==this.model.stage&&(this.view.nnPage.timeTip.showLiangLeft(i.BaodaoNum),this.model.mingpaiVec[e]=i.IsMing[e],1==this.model.mingpaiVec[e]&&this.view.nnPage.handlePart.showComp(e),e!=this.model.zhuangPos&&this.view.playerInfoPage.showXiazhu(e,this.model.xiazhuVec[e]),0==i.LastOpt[e]?this.model.isSelfSitDown&&this.view.nnPage.handleBtns.showCtlBtns():1==i.LastOpt[e]));(2==this.model.stage||3==this.model.stage)&&this.view.playerInfoPage.showZhuang()}},s.ACKBC_Sddz_JiaoDizhu=function(i){this.actived&&(console.log("ACKBC_Sddz_JiaoDizhu",i,"ACKBC_Sddz_JiaoDizhu"),this.model.srddzMsgs.ACKBC_Sddz_JiaoDizhu=i,this.view.nnPage.handleBtns.showQiangBox(),this.view.nnPage.timeTip.showZhuangLeft(),this.model.stage=1)},s.ACKBC_Sddz_Jiaofen=function(i){if(this.actived){console.log("ACKBC_Sddz_Jiaofen",i,"ACKBC_Sddz_Jiaofen"),this.model.srddzMsgs.ACKBC_Sddz_Jiaofen=i;var e=this.model.getPlayerPosByUid(i.Uid);this.model.playerByPos(e).jiaofen=i.Fen,this.model.playerByPos(e).haveJiao=!0,this.view.playerInfoPage.showQiangBei(e,i.Fen);var t="";t=0==i.Fen?"buqiang.mp3":"qiang.mp3",D.playSound("res/sounds/pinshi/"+T.instance.getSexRef(this.model.playerByPos(e).sex)+t)}},s.ACKBC_Sddz_Dizhu=function(i){if(this.actived){console.log("ACKBC_Sddz_Dizhu",i,"ACKBC_Sddz_Dizhu"),this.model.srddzMsgs.ACKBC_Sddz_Dizhu=i;var e=this.model.getPlayerPosByUid(i.Uid);this.model.zhuangPos=e,this.model.difen=i.Fen,this.model.stage=2;for(var t=[],s=0;s<this.model.chairNum;s++)null!=this.model.playerByPos(s)&&this.model.playerByPos(s).jiaofen==this.model.difen&&t.push(s);if(0==t.length)for(var s=0;s<this.model.chairNum;s++)null!=this.model.playerByPos(s)&&t.push(s);1==t.length?this.onQZAniEnd(0):(D.playSound("res/sounds/pinshi/effect/sound_bankert.mp3",0),this.view.playerInfoPage.playQZAni(t,e,this,this.onQZAniEnd))}},s.onQZAniEnd=function(i){i>0&&(D.stopSound("res/sounds/pinshi/effect/sound_bankert.mp3"),D.playSound("res/sounds/pinshi/effect/selectBankerEnd.mp3")),this.view.playerInfoPage.showZhuang(),this.view.nnPage.handleBtns.reset(),this.model.zhuangPos!=this.model.selfChairPos&&this.view.nnPage.handleBtns.showFenBox(),this.view.nnPage.timeTip.showXiazhuLeft(Math.round(10-i/30))},s.ACKBC_Sddz_Mingpai=function(i){if(this.actived){console.log("ACKBC_Sddz_Mingpai",i,"ACKBC_Sddz_Mingpai"),this.model.srddzMsgs.ACKBC_Sddz_Mingpai=i;var e=this.model.getPlayerPosByUid(i.Uid);1==i.Mingpai&&this.view.nnPage.handlePart.showComp(e)}},s.ACKBC_Sddz_Jiabei=function(i){if(this.actived){console.log("ACKBC_Sddz_Jiabei",i,"ACKBC_Sddz_Jiabei"),this.model.srddzMsgs.ACKBC_Sddz_Jiabei=i;var e=this.model.getPlayerPosByUid(i.Uid);1==i.Jiabei?(this.model.jiabeiVec[e]=!0,this.view.playerInfoPage.updateJiabei(),D.playSound("res/sounds/sddz/"+T.instance.getSexRef(this.model.playerByPos(e).sex)+"jiabei.mp3")):(this.model.jiabeiVec[e]=!1,D.playSound("res/sounds/sddz/"+T.instance.getSexRef(this.model.playerByPos(e).sex)+"bujiabei.mp3"))}},s.ACKBC_Nn_Xiazhu=function(i){if(this.actived){console.log("ACKBC_Nn_Xiazhu",i,"ACKBC_Nn_Xiazhu"),this.model.srddzMsgs.ACKBC_Nn_Xiazhu=i;var e=this.model.getPlayerPosByUid(i.Uid);this.model.playerByPos(e).haveXiazhu=!0,this.model.xiazhuVec[e]=i.Fen,this.view.playerInfoPage.showXiazhu(e,i.Fen),D.playSound("res/sounds/pinshi/effect/xiazhu.mp3")}},s.ACKBC_CurPlayer=function(i){this.actived&&(console.log("ACKBC_CurPlayer",i,"ACKBC_CurPlayer"),this.model.srddzMsgs.ACKBC_CurPlayer=i,this.model.stage=3,this.view.nnPage.handleBtns.showCuo(),this.view.nnPage.timeTip.showLiangLeft())},s.ACKBC_Sddz_End=function(i){if(this.actived){if(console.log("ACKBC_Sddz_End",i,"ACKBC_Sddz_End"),this.model.srddzMsgs.ACKBC_Sddz_End=i,this.view.nnPage.handleBtns.reset(),M.isReplay&&1==this.model.isStrictShowCalc)return;if(-1==i.Uid){if(this.view.nnPage.handleBtns.reset(),this.model.isLiu=!0,M.isReplay&&1==this.model.isStrictShowCalc)return}else{var e=this.model.getPlayerPosByUid(i.Uid),t=!1,s=!1;e==this.model.selfChairPos&&(t=!0),e==this.model.zhuangPos&&(s=!0),this.model.isLiu=!1}this.gameOverDownCards(i)}},s.gameOverDownCards=function(i){this.model.isEnd=!0,this.model.dipaiCards=i.Dipai;var e=[],s=0,n=0,o=0;for(s=0;s<i.Cards.length;s++){if(i.Cards[s].List.length!=i.Cards[s].ListLen)for(o=0;o<i.Cards[s].ListLen;o++)i.Cards[s].List.push({CID:0});for(e.length=0,n=0;n<i.Cards[s].List.length;n++)e.push(i.Cards[s].List[n].CID);void 0==i.Cards[s].Seat&&(i.Cards[s].Seat=0),this.model.updateHandleCards(i.Cards[s].Seat,e),this.view.nnPage.handlePart.updateOnePosAllCards(i.Cards[s].Seat,this.model.handleCards[i.Cards[s].Seat]);var a=L.getPaixing(this.model.handleCards[i.Cards[s].Seat]);this.view.nnPage.handlePart.showPaixing(i.Cards[s].Seat,a),t.timer.once(200*s,this,this.playEndPaixing,["res/sounds/pinshi/"+T.instance.getSexRef(this.model.playerByPos(i.Cards[s].Seat).sex)+"niu_"+a+".mp3"])}},s.playEndPaixing=function(i){D.playSound(i)},s.ACKBC_Sddz_Total=function(i){if(this.actived){console.log("ACKBC_Sddz_Total",i,"ACKBC_Sddz_Total"),this.model.srddzMsgs.ACKBC_Sddz_Total=i,this.model.srddzMsgs.ACK_RoomInfo.RoundCount=i.RoundCount,this.view.tableInfoPage.updateLeftRound(!1),this.view.playerInfoPage.updateSitDownUpBtn(!1);var e=b.getLocalVar("hasConcern",0);0==e&&(b.setLocalVar("hasConcern",1),c.instance.commonContext.view.showNotice("       微信搜索公众号<span style='color:#f6d368;'> "+r.nameTitle+"  </span>关注后即可获得更多福利哦！<br />",this,this.showCalculate)),this.showCalculate()}},s.showCalculate=function(){for(var i,e=this.model.srddzMsgs.ACKBC_Sddz_Total,s=e.List,n=0;n<s.length;n++)null!=this.model.playerByPos(n)&&(i=this.model.playerByPos(n),i.preScore=i.score,i.score=void 0!=s[n].TotalScore?s[n].TotalScore:0,1==M.Rule[4]&&(i.Coin=void 0!=s[n].TotalScore?s[n].TotalScore:0),this.view.playerInfoPage.updateOnePlayerGolds(i));for(var o=!1,n=0;n<s.length;n++)null!=this.model.playerByPos(n)&&(i=this.model.playerByPos(n),n!=this.model.zhuangPos&&i.score<i.preScore&&(this.view.playerInfoPage.playDropJinBiTo(n,this.model.zhuangPos),o=!0));0==o?this.playZSJinbiAni(this.model.zhuangPos):t.timer.once(1500,this,this.playZSJinbiAni,[this.model.zhuangPos]),this.model.isGameStart=!1,this.model.setPlayerReadyFalse(),1==this.model.srddzMsgs.ACKBC_Sddz_Total.Finished?(this.view.playerInfoPage.showGameEndBtn(),this.view.nnPage.timeTip.reset()):(this.model.srddzMsgs.ACKBC_Sddz_Total.Finished=!1,this.view.playerInfoPage.updateLeaveDisbandBtns(),""==e.Attached&&(e.Attached="8"),this.view.nnPage.timeTip.showReadyLeft(parseInt(e.Attached)))},s.playZSJinbiAni=function(i){for(var e,t=this.model.srddzMsgs.ACKBC_Sddz_Total,s=t.List,n=0;n<s.length;n++)null!=this.model.playerByPos(n)&&(e=this.model.playerByPos(n),n!=i&&e.score>e.preScore&&this.view.playerInfoPage.playDropJinBiFrom(n,i))},s.NOTIFY_Summary=function(){},s.ACKBC_Exit_Room=function(i){if(this.actived){if(console.log("ACKBC_Exit_Room"),console.log(i),console.log("ACKBC_Exit_Room"),this.model.srddzMsgs.ACKBC_Exit_Room=i,i.uid=i.UID,i.uid==M.selfuid)return r.isNewHall?b.gotoHall():this.endGameGotoHall(!0),void 0;f.instance.event("COMMON_INFOLIST_NOTICE",{color:1,msg:"玩家["+this.model.getPlayerNicknameByUid(i.uid)+"]离开了房间！"});var e=this.model.getPlayerPosByUid(i.uid);this.model.leavePlayer(i.uid),-1!=e&&(this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.showStartBtn(!1)),(this.model.isGameStart||0!=this.model.srddzMsgs.ACK_RoomInfo.RoundCount)&&this.view.playerInfoPage.showZhuang()
}},s.AckDisband=function(i){this.actived&&(console.log("AckDisband::",i,"解散相关"),this.model.srddzMsgs.AckDisband=i,this.popDissolveRoomDetail(i))},s.NotifyDisband=function(i){if(this.actived){console.log("NotifyDisband::",i,"解散相关"),this.model.srddzMsgs.NotifyDisband=i,this.hideDissolveRoomDetail();var e="";1==i.result?e="解散成功！":(e="解散失败！",b.popMessageBox(e,"BTN_NONE",this,null))}},s.NotifyUserState=function(i){if(this.actived){console.log("NotifyUserState",i,"NotifyUserState"),this.model.srddzMsgs.NotifyUserState=i;var e=this.model.playerByUid(i.id);e.state=i.state,e.offlineTime=i.offlineTime;var t=this.model.getPlayerPosByUid(parseInt(i.id)),s=this.model.getChairDirByPos(t),n=!1;2==i.state&&(n=!0),s>0&&this.view.playerInfoPage.setGrayhead(s,n,!0,i.offlineTime)}},s.NotifyKick=function(i){if(this.actived){console.log("NotifyKick",i,"NotifyKick");var e,t=0,s=i.indexs.length;for(t=0;s>t;t++)e=this.model.playerByPos(i.indexs[t]),e.offlineTime=0,e.canKick=!0;this.view.playerInfoPage.updateTirenBtn()}},s.KickResponse=function(i){this.actived&&(b.popBox&&b.popBox.onhide(),this.model.standup(i.uid,-1),this.model.beKickedPlayer[i.pos]=i.uid,this.model.playerByUid(i.uid).offlineTime=0,this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.updateSitDownUpBtn(),this.view.playerInfoPage.updateStartBtn(),this.view.tableInfoPage.updateKaijuren(i.nickName),f.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+this.model.getPlayerNicknameByUid(i.uid)+"]站起了！"}),b.popMessageBox("玩家["+this.model.getPlayerNicknameByUid(i.uid)+"]被其他玩家请离座位!","BTN_QUEREN",this,this.onQuerenBeiTi))},s.onQuerenBeiTi=function(){},s.NotifyDestoryRoom=function(i){this.actived&&(console.log("NotifyDestoryRoom",i,"NotifyDestoryRoom"),this.pop=void 0!=i.IsOwnerDisband&&1==i.IsOwnerDisband?b.popMessageBox("房主解散了房间！","BTN_QUEREN",this,this.onQueRenExit,"提示","left"):b.popMessageBox("由于在规定时间内未开始游戏，房间已经强制解散！","BTN_QUEREN",this,this.onQueRenExit,"提示","left"))},s.onQueRenExit=function(){r.isNewHall?b.gotoHall():this.endGameGotoHall()},s.onPopPanelCallBack=function(){r.isNewHall?b.gotoHall():this.endGameGotoHall()},s.endGameGotoHall=function(i){void 0===i&&(i=!0),console.log("send MsgTypes.BASE_QUEUE,PomeloMessage.hall_g_o..."),null!=this.pop&&this.pop.onhide(),this.hideDissolveRoomDetail(),this.contineGameQueue(),y.instance.resetGameQueue(),this.model.reset(),this.view.reset(),this.model.playerInfoVec.length=0,M.isReplay&&(M.isPreReplay=!0),c.instance.regotoCommonText(),ae.instance.stopGame(i),M.isReplay=!1,0==this.model.isGameStart},s.popDissolveRoomDetail=function(i){null==this.dissolvePage&&(this.dissolvePage=new w),this.dissolvePage.update(i),b.AddCenter(this.dissolvePage,G.instance.popLayer),b.popBox&&b.popBox.onhide()},s.hideDissolveRoomDetail=function(){this.dissolvePage&&this.dissolvePage.parent&&this.dissolvePage.parent.removeChild(this.dissolvePage)},s.clear=function(){this.model.reset(),this.view.reset(),this.model.playerInfoVec.length=0,M.isReplay&&f.instance.event("REPLAY_back",null),M.isReplay=!1,0==this.model.isGameStart},s.MSG_ACK_Gift=function(i){if(this.actived){console.log("MSG_ACK_Gift",i,"MSG_ACK_Gift");var e=this.model.playerByUid(i.uid),t=this.model.playerByUid(i.tUid);e.Diamond=i.diamond;var s=this.model.getChairDirByPos(e.pos),n=this.model.getChairDirByPos(t.pos);i.uid==M.uid&&(M.Diamond=i.diamond),X.instance.showGiftEff(s,n,i.id)}},s.clearTimeDelay=function(){t.timer.clear(this,this.contineGameQueue)},s.resetSelf=function(){this.model.reset(),this.view.playerInfoPage.hideReadyBtn(),this.view.playerInfoPage.hideZhuang(),this.view.playerInfoPage.hideQiangAndXia(),this.view.playerInfoPage.updateJiabei(),this.view.nnPage.reset()},s.sendMsgCommond=function(i,e){void 0===e&&(e=!0),e&&this.view.nnPage.handlePart.canControl(this.model.selfChairPos,!1),f.instance.event("SOCKET_SEND",i)},s.pauseGameQueue=function(){M.isReplay?this.model.needCutdownReplay=!0:y.instance.pauseQueue("MESSAGE_GAME")},s.contineGameQueue=function(){M.isReplay?this.model.needCutdownReplay=!1:y.instance.continueQueue("MESSAGE_GAME")},s.onTimeOver=function(){!this.model.isGameStart},o(0,s,"model",function(){return ae.instance.gameContext.model}),o(0,s,"view",function(){return ae.instance.gameContext.view}),e}(h),ne=function(i){function e(){this.isReConn=!1,this.roomOwnerUid="",this.isMouseDwon=!1,this.zhuangPos=-1,this.difen=0,this.beishu=1,this.stage=0,this.curHandlePos=0,this.isStrictShowCalc=!1,this.beKickedPlayer={},this.isAutoHandle=!1,this.isDragingcard=!1,this.isGameStart=!1,this.canStartInto=!0,this.preStepNum=4,this.replayData=[],this.replayCurStep=0,this.replayState=0,this.needCutdownReplay=!1,this.isClientPrePop=!1,this.isClientPrePopCards=0,this.dipaiCards=[],this.curOutputPos=-1,this.curOptPos=-1,this.isLiu=!1,this.isEnd=!1,this.isSelfSitDown=!1,this.selfChairPos=0,this._chairNum=4,this.curOutputCards=[],this.srddzMsgs=new F,this.playerInfoVec=[],this.mingpaiVec=[],this.jiabeiVec=[],this.xiazhuVec=[],this.handleCards=[],this.outputCards=[],e.__super.call(this)}n(e,"modules.nnGame.inerGame.model.NnModel",i);var t=e.prototype;return t.onAdd=function(){},t.onRemove=function(){},t.resetCard=function(){console.log("resetCard /////////////////////////////////resetCard"),this.zhuangPos=-1,this.difen=0,this.beishu=1,this.curOutputPos=-1,this.curOptPos=-1,this.curOutputCards.length=0,this.dipaiCards.length=0;var i=0,e=this._chairNum;for(i=0;e>i;i++){this.outputCards[i].length=0,this.handleCards[i].length=0,this.mingpaiVec[i]=!1,this.jiabeiVec[i]=!1;var t=this.playerByPos(i);null!=t&&(t.haveJiao=!1,this.playerByPos(i).haveXiazhu=!1,this.playerByPos(i).jiaofen=0),this.xiazhuVec[i]=0}this.isEnd=!1,this.isLiu=!1},t.reset=function(){this.stage=0,this.isReConn=!1,this.beKickedPlayer={},this.resetCard()},t.updateHandleCards=function(i,e){this.handleCards[i]=e.concat()},t.addDipaiToHandleCards=function(i,e){this.dipaiCards=e.concat(),this.handleCards[i]=this.handleCards[i].concat(e),this.handleCards[i].sort(L.compCardsFun)},t.updateMingpai=function(i,e){this.mingpaiVec[i]=!0,this.handleCards[i]=e.concat(),this.handleCards[i].sort(L.compCardsFun)},t.outputPockers=function(i,e){this.curOutputPos=i,this.curOutputCards=e.concat(),this.curOutputCards.sort(L.compCardsFun),this.outputCards[i].push(e);var t=0,s=e.length;for(t=0;s>t;t++){var n=this.handleCards[i].indexOf(e[t]);-1!=n?this.handleCards[i].splice(n,1):this.handleCards[i].splice(0,1)}},t.getChairDirByPos=function(i){if(-1==i)return-1;var e=0;return e=i-this.selfChairPos,0>e&&(e+=this.chairNum),e},t.getChairPosByDir=function(i){var e=0;return e=this.selfChairPos+i,e>this.chairNum-1&&(e-=this.chairNum),e},t.updateOnePlayerInfo=function(i){var e=0,t=this.playerInfoVec.length+0,s=!1;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].uid==i.uid){this.playerInfoVec[e].pos!=i.pos&&console.log("传过来的数据有错误!!!!!!"),this.updateObjFromObj(this.playerInfoVec[e],i),s=!0;break}0==s&&this.playerInfoVec.push(i),i.uid==M.selfuid&&(this.selfChairPos=i.pos,-1==this.selfChairPos?(this.isSelfSitDown=!1,this.selfChairPos=0):this.isSelfSitDown=!0)},t.playerByPos=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].pos==i)return this.playerInfoVec[e];return null},t.playerByUid=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].uid==i)return this.playerInfoVec[e];return null},t.getPlayerPosByUid=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].uid==i)return this.playerInfoVec[e].pos;return 0},t.getPlayerUidByPos=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].pos==i)return this.playerInfoVec[e].uid;return 0},t.getPlayerNicknameByUid=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].uid==i)return this.playerInfoVec[e].nickname;return""},t.updateObjFromObj=function(i,e){i.prePos=i.pos;for(var t in e)void 0!=e[t]&&(i[t]=e[t])},t.sitDown=function(i,e,t){var s=0,n=this.playerInfoVec.length;for(s=0;n>s;s++)this.playerInfoVec[s]&&this.playerInfoVec[s].uid==i&&(this.playerInfoVec[s].pos=e,this.playerInfoVec[s].score=t,this.playerInfoVec[s].canKick=!1,i==M.selfuid&&(-1!=e?(this.isSelfSitDown=!0,this.selfChairPos=e):(this.isSelfSitDown=!1,this.selfChairPos=0)))},t.standup=function(i,e){var t=0,s=this.playerInfoVec.length;for(t=0;s>t;t++)this.playerInfoVec[t]&&this.playerInfoVec[t].uid==i&&(this.playerInfoVec[t].pos=e,this.playerInfoVec[t].canKick=!1,i==M.selfuid&&(-1!=e?(this.isSelfSitDown=!0,this.selfChairPos=e):(this.isSelfSitDown=!1,this.selfChairPos=0)))},t.updateReadyState=function(i,e,t){var s=0,n=this.playerInfoVec.length;for(s=0;n>s;s++)if(this.playerInfoVec[s]&&this.playerInfoVec[s].pos==i){this.playerInfoVec[s].readystate=!0,this.playerInfoVec[s].piao=t;break}},t.leavePlayer=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].uid==i){this.playerInfoVec.splice(e,1);break}},t.updatePlayerInfoVec=function(i){var e,t=0,s=i.length;for(t=0;s>t;t++)e=i[t],M.isReplay&&(e.index=void 0!=e.index?e.index:0,e.diamond=void 0!=e.diamond?e.diamond:0,e.Icon=void 0!=e.Icon?e.Icon:"",e.score=void 0!=e.score?e.score:0,e.coin=void 0!=e.coin?e.coin:0,e.readystate=void 0!=e.readystate?e.readystate:0,e.uid=void 0!=e.uid?e.uid:0,e.IP=void 0!=e.IP?e.IP:"",e.Name=e.name,e.Index=e.index,e.Coin=e.coin,e.readystate=1,e.UID=e.uid,e.Diamond=e.diamond,e.icon&&(e.Icon=e.icon)),e.nickname=e.Name,e.uid=e.UID,e.ip=e.IP,e.pos=e.Index,e.golds=e.Coin,(""!=e.uid||0!=e.uid)&&(3==e.state?(this.beKickedPlayer[e.pos]=e.uid,e.state=1,e.pos=-1):4==e.state&&(this.beKickedPlayer[e.pos]=e.uid,e.state=2,e.pos=-1),this.updateOnePlayerInfo(i[t]))},t.setPlayerReadyFalse=function(){var i=0,e=this.playerInfoVec.length;for(i=0;e>i;i++)this.playerInfoVec[i].readystate=0},o(0,t,"gameHasStarted",function(){return this.isGameStart||this.srddzMsgs.ACK_RoomInfo.RoundCount>0?!0:!1}),o(0,t,"chairNum",function(){return this._chairNum},function(i){this._chairNum=i,this.playerInfoVec.length=0,this.outputCards.length=this.chairNum,this.handleCards.length=this.chairNum,this.mingpaiVec.length=this.chairNum,this.jiabeiVec.length=this.chairNum,this.xiazhuVec.length=this.chairNum,this.dipaiCards.length=0;var e=0,t=this._chairNum;for(e=0;t>e;e++)this.outputCards[e]=[],this.handleCards[e]=[],this.mingpaiVec[e]=!1,this.jiabeiVec[e]=!1,this.xiazhuVec[e]=0;this.isGameStart=!1,this.isEnd=!1,this.isLiu=!1}),e.Stage_jiaofen=1,e.Stage_jiabei=2,e.Stage_dapai=3,s(e,["DissolveResult_REF",function(){return this.DissolveResult_REF=["等待操作","同意","拒绝"]}]),e}(h),oe=function(i){function e(){this.popChatArr=null,this.expressloaderArr=null,this._replayControlView=null,this._nnPage=null,this._playerInfoPage=null,this._tableInfoPage=null,this._chatPage=null,this._gui=null,this._voiceRecording=-1,this.isPlayVoice=!1,this.isClick=!1,this.isRecording=!1,e.__super.call(this),this.setType(3)}n(e,"modules.nnGame.inerGame.view.NnView",i);var s=e.prototype;return s.onAdd=function(){this.onAddUI(),this.onAddListener()},s.onRemove=function(){this.onRemoveUI(),this.onRemoveListener()},s.onAddUI=function(){null==this._gui&&(this._gui=new m,this._gui.mouseThrough=!0),console.log("桌面被添加到舞台！！"),G.instance.uiLayer.addChild(this._gui),null==this._nnPage&&(this._nnPage=new H(new I),this._gui.pokerContainer.addChild(this._nnPage.skin)),null==this._tableInfoPage&&(this._tableInfoPage=new ee(this.gui.tableInfoPage)),null==this._playerInfoPage&&(this._playerInfoPage=new Q(this.gui.playerInfoPage)),null==this._replayControlView&&(this._replayControlView=new x(this.gui.replayControlView)),this._chatPage=d.schatPage,this.gui.chatContainer.addChild(this._chatPage.skin),this._chatPage.hide(),1==M.isReplay?this._replayControlView.show():this._replayControlView.hide(),this._gui.popChat0.visible=!1,this._gui.popChat1.visible=!1,this._gui.popChat2.visible=!1,this._gui.popChat3.visible=!1,this._gui.popChat4.visible=!1,this._gui.popChat5.visible=!1,this._gui.popChat6.visible=!1,this._gui.popChat7.visible=!1,this._gui.popChat8.visible=!1,this._gui.popChat9.visible=!1,f.instance.on("SEND_CHAT_MESSAGE",this,this.onSendChat),this._gui.tableInfoPage.voiceIntercomBtn.on("click",this,this.onVoiceOpClick),this._gui.tableInfoPage.voiceIntercomBtn.on("mouseout",this,this.onVoiceOpOut),this._gui.tableInfoPage.chatBtn.on("click",this,this.onShowChatPage)},s.initPopChat=function(i){switch(void 0===i&&(i=10),this.popChatArr=[],i){case 10:this.popChatArr.push(this._gui.popChat0,this._gui.popChat1,this._gui.popChat2,this._gui.popChat3,this._gui.popChat4,this._gui.popChat5,this._gui.popChat6,this._gui.popChat7,this._gui.popChat8,this._gui.popChat9)}},s.onSendChat=function(i){this.chatPage.switchState();var e={message:i,type:2};f.instance.event("SOCKET_SEND",B.getProtoMessage(370,e))},s.onVoiceOpClick=function(i){this.isClick=!0,console.log("点击了？？？？？？ "),this.isRecording?this.stopRecord():this.startRecord(),i.stopPropagation()},s.onVoiceOpOut=function(){return this.isClick?(this.isClick=!1,void 0):(console.log("滑动了？？？？？？ "),1==this.isRecording&&(K.stopRecord(-1),t.timer.clear(this,this.onRecording),this._gui.tableInfoPage.voiceTip.visible=!1,this._gui.tableInfoPage.voicePlay.visible=!1,this.tableInfoPage.stopVoicePlay(),this.onStopSuccess(),this.isRecording=!1,this.isPlayVoice||this.Voice()),void 0)},s.startRecord=function(){K.startRecord(),this._gui.tableInfoPage.voicePlay.visible=!0,this.tableInfoPage.playVoicePlay(),this._gui.tableInfoPage.voiceTip.visible=!0,this._voiceRecording=V.unixtime,this._gui.tableInfoPage._time.text="15'",t.timer.loop(100,this,this.onRecording),this.isRecording=!0},s.stopRecord=function(){var i=V.unixtime-this._voiceRecording;500>i||(1e3>i?(K.stopRecord(-1),b.VoiceTip(3),t.timer.clear(this,this.onRecording),this._gui.tableInfoPage.voiceTip.visible=!1,this._gui.tableInfoPage.voicePlay.visible=!1,this.tableInfoPage.stopVoicePlay(),this.onStopSuccess()):(K.stopRecord(0,this,this.onStopSuccess),t.timer.clear(this,this.onRecording),this._gui.tableInfoPage.voiceTip.visible=!1,this._gui.tableInfoPage.voicePlay.visible=!1,this.tableInfoPage.stopVoicePlay(),ae.instance.gameContext.view.gui.tableInfoPage.voiceIntercomBtn.disabled=!0,ae.instance.gameContext.view.gui.tableInfoPage.voiceDis.visible=!0),this.isRecording=!1,this.isPlayVoice||this.Voice())},s.onStopSuccess=function(){ae.instance.gameContext.view.gui.tableInfoPage.voiceIntercomBtn.disabled=!1,ae.instance.gameContext.view.gui.tableInfoPage.voiceDis.visible=!1},s.onRecording=function(){var i=(V.unixtime-this._voiceRecording)/1e3;this._gui.tableInfoPage._time.text=15-Math.floor(i)+"'",i>=r.maxVoiceTime&&this.stopRecord()},s.onRecChat=function(i){console.log("onRecChat::",i);var e=i.message.split("#");e.length>1&&this.showPopChat(e[0],e[1])},s.showPopChat=function(i,e){null==this.popChatArr&&this.initPopChat(this.model.chairNum);var t=this.model.getPlayerPosByUid(i),s=this.model.getChairDirByPos(t),n=e.split("|");if(n.length>1){if("express"==n[0]){var o=parseInt(n[1]);return this._playerInfoPage.showExpress(s,o+1),void 0}"VoiceId"==n[0]&&(console.log("youyuyinguolaile"),K.voiceArr.push([parseInt(i),n[1]]),this.isPlayVoice||0!=this.isRecording||this.Voice())}else{this.popChatArr[s].visible=!0,this.popChatArr[s].tf.text=e,this.popChatArr[s].backimg.width=this.popChatArr[s].tf.textField.textWidth+30,this.popChatArr[s].backimg.height=this.popChatArr[s].tf.textField.textHeight+40,N.clearAll(this.popChatArr[s]),this.popChatArr[s].alpha=1;var a=2e3*this.popChatArr[s].tf.textField.lines.length;D.playSound(T.instance.getSddzChatPath(this.model.playerByPos(t).sex,r.getChatSound(e,2)),1)}this.popChatArr[s]==this._gui.popChat1?this.popChatArr[s].x=710+.6*(423-this.popChatArr[s].backimg.width):this.popChatArr[s]==this._gui.popChat2?this.popChatArr[s].x=678+.6*(423-this.popChatArr[s].backimg.width):this.popChatArr[s]==this._gui.popChat3?this.popChatArr[s].x=551+.6*(423-this.popChatArr[s].backimg.width):this.popChatArr[s]==this._gui.popChat4&&(this.popChatArr[s].x=420+.6*(423-this.popChatArr[s].backimg.width)),N.to(this.popChatArr[s],{alpha:.3},a,null,new C(this,this.onCompeteTween,[this.popChatArr[s]]),500)},s.Voice=function(){var i=this;if(!(K.voiceArr.length<=0||K.isUpLoading)){this.isPlayVoice=!0;var e=K.voiceArr.shift();K.downloadVoice(e[1],this,this.playVoice,[e[0]]),l.window.wx.onVoicePlayEnd({success:function(){console.log("声音播放完成了！！ uid：："+e[0]),console.log("WX.voiceArr.length::"+K.voiceArr.length),t.timer.clear(ae.instance.gameContext.view,i.recoverSoundVolume),ae.instance.gameContext.view.playerInfoPage.hideVoice(e[0]),r.isPlayingRecord=!1,t.timer.once(1e3,null,T.swithMusic,["game"]),K.voiceArr.length>0?i.Voice():(K.isDownLoading=!1,K.uploadArr.length>0&&(K.uploadVoice(K.uploadArr[0]),K.uploadArr.length=0),ae.instance.gameContext.view.isPlayVoice=!1,0==K.isUpLoading&&(ae.instance.gameContext.view.gui.tableInfoPage.voiceIntercomBtn.disabled=!1,ae.instance.gameContext.view.gui.tableInfoPage.voiceDis.visible=!1))}})}},s.playVoice=function(i){t.timer.once(15e3,this,this.recoverSoundVolume,[parseInt(i)]),this._playerInfoPage.showVoice(parseInt(i))},s.recoverSoundVolume=function(i){0!=this.isPlayVoice&&(this.isPlayVoice=!1,r.isPlayingRecord=!1,T.swithMusic("game"),this._playerInfoPage.hideVoice(i),this._gui.tableInfoPage.voiceIntercomBtn.disabled=!1,this._gui.tableInfoPage.voiceDis.visible=!1)},s.playend=function(i){this._playerInfoPage.hideVoice(i)},s.onCompeteTween=function(i){i.alpha=1,i.visible=!1},s.onShowChatPage=function(i){T.instance.playClickBtnSound(),this.chatPage.switchState(),i.stopPropagation()},s.setChairNmu=function(i){this.nnPage.setChairNum(i),this._playerInfoPage.setChairNum(i),this.reset()},s.startGame=function(){},s.onAddListener=function(){},s.onticketCardChange=function(i){i&&i.complete()},s.onRemoveUI=function(){null!=this._gui&&(G.instance.uiLayer.removeChild(this._gui),console.log("桌面被移除舞台！！"),this._gui.tableInfoPage.chatBtn.off("mousedown",this,this.onShowChatPage),f.instance.off("SEND_CHAT_MESSAGE",this,this.onSendChat),this._gui.tableInfoPage.voiceIntercomBtn.off("click",this,this.onVoiceOpClick),this._gui.tableInfoPage.voiceIntercomBtn.off("mouseout",this,this.onVoiceOpOut))},s.reset=function(){j.instance.hide(),this._nnPage.reset(),this._tableInfoPage.reset(),this._playerInfoPage.havePiaoReset(),this._replayControlView.reset()},s.replayup_reset=function(){this._nnPage.reset(),this._tableInfoPage.reset(),this._playerInfoPage.havePiaoReset(),this._replayControlView.replayup_reset()},s.onRemoveListener=function(){},o(0,s,"model",function(){return ae.instance.gameContext.model}),o(0,s,"replayControlView",function(){return this._replayControlView}),o(0,s,"nnPage",function(){return this._nnPage}),o(0,s,"playerInfoPage",function(){return this._playerInfoPage}),o(0,s,"gui",function(){return this._gui}),o(0,s,"chatPage",function(){return this._chatPage}),o(0,s,"tableInfoPage",function(){return this._tableInfoPage}),e}(h),ae=function(i){function e(){if(this.needResize=!0,this._main=null,this._gameContext=null,this._mainContext=null,e.__super.call(this),null!=e._instance)throw new R(this);e._instance=this}n(e,"modules.nnGame.NnGameModule",i);var s=e.prototype;return s.startup=function(){null==this._mainContext&&(this._mainContext=new p("nnGameMainmain",this),this._main=new pe("nnGameMain",this,this._mainContext),this._gameContext=new me("nnGame",this,this._main)),this.switchState(this._mainContext)},s.stopGame=function(i,t){void 0===i&&(i=!0),void 0===t&&(t=!1),t&&this._gameContext.controller.clear(),e.inGame=!1,e.isSettlement=!1,this.switchState(this._mainContext),i&&(this.inHallResize(),_.instance.gotoHall())},s.startGame=function(){l.window.document.title=r.nameTitle+"拼十",1!=e.inGame&&(_.instance.goEmpty(),e.inGame=!0,c.instance.gotoCommonContext(),this.switchState(this.gameContext),this.inGameResize(),S.gameName="拼十",K.onMenuShareTimeline(M.nickname+"-"+r.nameTitle+"拼十("+r.costRule[M.roomtype+""][M.Rule[3]]+")【房间号："+M.roomid+"】",M.roomid+"--"+M.uniqueCode),K.onMenuShareAppMessage(M.nickname+"-"+r.nameTitle+"拼十("+r.costRule[M.roomtype+""][M.Rule[3]]+")【房间号："+M.roomid+"】","房主创建了拼十 【房间号:"+M.roomid+"】"+r.getRule(M.Rule[1]).desc,M.roomid+"--"+M.uniqueCode),console.log("startSrddzGame..........."))},s.inGameResize=function(i){void 0===i&&(i=!0),"windows"!=b.sysem()&&(t.stage.screenMode="horizontal"),t.stage.size(1038,640),modules.nnGame.NnGameModule.instance.gameContext.view.gui.visible=!1,1==i?t.timer.once(200,this,this.onCheckInGameResize):t.timer.frameOnce(1,this,this.onCheckInGameResize)},s.onCheckInGameResize=function(){if(1==P.CurGameModule.inGame){var i=l.getElementById("layaCanvas");i.width<i.height?(b.showChScreenGuideView(),this.inGameResize(!1)):(b.hideChScreenGuideView(),modules.nnGame.NnGameModule.instance.gameContext.view.gui.visible=!0)}else b.hideChScreenGuideView()},s.inHallResize=function(){"windows"==b.sysem()||(t.stage.screenMode="ipad"==b.sysem()||"mac"==b.sysem()?"vertical":"vertical"),t.stage.size(640,1038)},o(0,s,"main",function(){return this._main}),o(0,s,"gameContext",function(){return this._gameContext}),o(1,e,"instance",function(){return null==e._instance&&(e._instance=new e),e._instance},rb.framework.mvc.Module._$SET_instance),e.inGame=!1,e.isPauseGameQueue=!1,e.isSettlement=!1,e._instance=null,e}(v),he=function(i){function e(i){this.orignalY=0,this.readyOffsetY=-20,this.orignalY=i.y,e.__super.call(this,i),this.canControl=!0}n(e,"modules.nnGame.inerGame.view.pockerPart.card.BottomHandlePocker",i);var s=e.prototype;return s.up=function(){0!=this.state&&(this.skin.valueImg.visible=!0,this.skin.backImg.visible=!1,this.state=0)},s.back=function(){1!=this.state&&(this.skin.backImg.visible=!0,this.skin.valueImg.visible=!1,this.state=1)},s.down=function(){2!=this.state&&(this.skin.backImg.visible=!1,this.skin.valueImg.visible=!0,this.state=2)},s.onMouseOver=function(){this.model.isMouseDwon&&(this.skin.shadowImg.visible=!this.skin.shadowImg.visible,this.select=!this.select)},s.onMouseMove=function(){},s.onClickStage=function(i){i.target instanceof ui.niuniuGame.niuniuPart.item.PockerItemUI==0&&i.target!=this.skin.parent&&i.target.parent!=this.skin.parent.parent&&(this.select=!1)},s.onMouseDown=function(){this.select=!this.select,this.skin.shadowImg.visible=!this.skin.shadowImg.visible},s.onMouseUp=function(){this.skin.shadowImg.visible=!1,this.model.isMouseDwon=!1},s.onSkinMouseUp=function(){T.playEffect("audio_deal_card")},s.reset=function(){i.prototype.reset.call(this)},o(0,s,"canControl",null,function(i){i=!1,i?(this.skin.on("mouseover",this,this.onMouseOver),t.stage.on("click",this,this.onClickStage),this.skin.on("mousedown",this,this.onMouseDown),t.stage.on("mouseup",this,this.onMouseUp),this.skin.on("mouseup",this,this.onSkinMouseUp)):(this.skin.off("mouseover",this,this.onMouseOver),t.stage.off("click",this,this.onClickStage),this.skin.off("mousedown",this,this.onMouseDown),t.stage.off("mouseup",this,this.onMouseUp),this.skin.off("mouseup",this,this.onSkinMouseUp))}),o(0,s,"select",function(){return this.skin.y==this.orignalY+this.readyOffsetY},function(i){this.skin.y=i?this.orignalY+this.readyOffsetY:this.orignalY}),e}(Z),re=function(i){function e(i){e.__super.call(this,i)}n(e,"modules.nnGame.inerGame.view.pockerPart.card.OtherHandlePocker",i);var t=e.prototype;return t.up=function(){0!=this.state&&(this.skin.valueImg.visible=!1,this.skin.backImg.visible=!0,this.state=0)},t.back=function(){1!=this.state&&(this.skin.backImg.visible=!0,this.skin.valueImg.visible=!1,this.state=1)},t.down=function(){2!=this.state&&(this.skin.backImg.visible=!1,this.skin.valueImg.visible=!0,this.state=2)},e}(Z),le=function(i){function e(i){this.gap=55,this._skin=null,this._skin=i,e.__super.call(this,i)}n(e,"modules.nnGame.inerGame.view.pockerPart.singlePart.handlePart.BottomSingleHandlePart",i,"BottomSingleHandlePart$1");var s=e.prototype;return s.init=function(){var i=0,e=this._pockers.length;for(i=0;e>i;i++)this._pockers[i]=new he(this._skin["card"+i]);t.stage.on("mousedown",this,this.onDownStage)},s.onDownStage=function(){this.model.isMouseDwon=!0},s.showCards=function(i,e){i=i.concat();this.model.getChairPosByDir(e);this.hideAll();var t=0;for(t=0;t<i.length;t++)this._pockers[t].setCardImg(i[t]),this._pockers[t].show(),this._pockers[t].select=!1,this._pockers[t].up(),0==this.model.isSelfSitDown&&0==this.model.isEnd&&this._pockers[t].back()},s.onCompEff=function(i,e){0==this.model.isSelfSitDown&&0==this.model.isEnd?this._pockers[i].back():this._pockers[i].up(),e&&this._pockers[i].back()},s.playFanEff=function(i){void 0===i&&(i=!0),i?this.startPlayFanEff():this._pockers[4].up()},s.startPlayFanEff=function(){this._pockers[4].skin.scaleX=-.7,V.instance.timer.loop(50,this,this.onPlay)},s.onPlay=function(){this._pockers[4].skin.scaleX+=.1,this._pockers[4].skin.scaleX>=0&&this._pockers[4].up(),.7==this._pockers[4].skin.scaleX&&V.instance.timer.clear(this,this.onPlay)},s.showComp=function(i){if(0==this.model.isSelfSitDown)return this._skin.comBox.visible=!0,this._skin.typeImg.skin="niuniuGame/niuType/ready.png",void 0;var e=this.model.handleCards[this.model.selfChairPos].concat();e.sort(L.compCardsFun);var t=U.getJishuArrData(e),s=L.getPaixing(e,t,!1);if(1==L.isNiuPaixing(s)){var n=O.getNiuData(e);n.niuNum>0&&(this.seleCards=n.ThreeArr)}this.showPaixing(i,s)},s.showPaixing=function(i,e){this._skin.comBox.visible=!0,this._skin.typeImg.skin="niuniuGame/niuType/niu"+e+".png"},s.reset=function(){this._pockers[4].skin.scaleX=.7,V.instance.timer.clear(this,this.onPlay),i.prototype.reset.call(this),this._skin.comBox.visible=!1},o(0,s,"seleCards",function(){var i=[],e=0;for(e=0;e<this._pockers.length;e++)1==this._pockers[e].visible&&1==this._pockers[e].select&&i.push(this._pockers[e].cardIdx);return i},function(i){var e=0,t=0,s=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].select=!1,this._pockers[e].visible&&(s=this._pockers[e].cardIdx,t=i.indexOf(s),-1!=t&&(this._pockers[e].select=!0,i.splice(t,1)))}),o(0,s,"canControl",null,function(i){t.superSet($,this,"canControl",i)}),e}($),de=function(i){function e(i){this._skin,this._skin=i,e.__super.call(this,i),this.fromPos=[{x:495-i.x,y:328-this._skin.y},{x:495-i.x,y:328-this._skin.y},{x:495-i.x,y:328-this._skin.y},{x:495-i.x,y:328-this._skin.y},{x:495-i.x,y:328-this._skin.y}],this.toPos=[{x:0,y:0},{x:21,y:0},{x:42,y:0},{x:63,y:0},{x:84,y:0}]}n(e,"modules.nnGame.inerGame.view.pockerPart.singlePart.handlePart.OtherSingleHandlePart",i);var t=e.prototype;return t.init=function(){var i=0,e=this._pockers.length;for(i=0;e>i;i++)this._pockers[i]=new re(this._skin["card"+i])},t.showCards=function(i,e){i=i.concat();this.model.getChairPosByDir(e);this.hideAll();var t=0;for(t=0;t<i.length;t++)this._pockers[t].setCardImg(i[t]),this._pockers[t].show(),this.model.isEnd?this._pockers[t].down():this._pockers[t].up(),this._pockers[t].select=!1},t.playQipaiEff=function(e){i.prototype.playQipaiEff.call(this,e)},t.showComp=function(){this._skin.comBox.visible=!0,this._skin.typeImg.skin="niuniuGame/niuType/ready.png"},t.showPaixing=function(i,e){this._skin.comBox.visible=!0,this._skin.typeImg.skin="niuniuGame/niuType/niu"+e+".png"},t.reset=function(){i.prototype.reset.call(this),this._skin.comBox.visible=!1},e}($),ce=function(i){function e(){e.__super.call(this)}return n(e,"modules.nnGame.inerGame.controller.RNnController",i),e}(se),ue=function(i){function e(){e.__super.call(this)}return n(e,"modules.nnGame.inerGame.model.RNnModel",i),e}(ne),fe=function(i){function e(){this.tUid=null,this.dat=null,e.__super.call(this),this.on("click",this,this.onClick)}n(e,"modules.nnGame.inerGame.view.playerInfoPart.GiftItem",i,"GiftItem$1");var t=e.prototype;return t.setData=function(i,e){if(i){this.dat=i,this.tUid=e,this.img.disabled=e==M.uid||0==ae.instance.gameContext.model.isSelfSitDown?!0:!1,this.img.skin="ani/"+i.name+".png";var t=parseInt(i.price);this.costTf.color=t>M.Diamond?"#ff3d01":"#2dc509",this.costTf.text=i.price}},t.onClick=function(){if(this.tUid!=M.uid){if(0==ae.instance.gameContext.model.isSelfSitDown)return b.popMessage("围观用户禁止送礼物！"),void 0;j.instance.hide(),console.log("送礼物咯：： id:"+this.dat.id+"  tUid:"+this.tUid);var i={id:this.dat.id,tUid:this.tUid};f.instance.event("SOCKET_SEND",B.getProtoMessage(410,i))}},e}(g),pe=function(i){function e(i,t,s){this._socketControl=null,void 0===i&&(i=""),e.__super.call(this,i,t,s)}n(e,"modules.nnGame.context.NnMainContext",i);var t=e.prototype;return t.open=function(){i.prototype.open.call(this),null==this._socketControl&&(this._socketControl=new te),this.addController(this.socketControl)},o(0,t,"socketControl",function(){return this._socketControl}),e}(p),me=function(i){function e(i,t,s){this._view=null,this._controller=null,this._rcontroller=null,this._model=null,this._rmodel=null,void 0===i&&(i=""),e.__super.call(this,i,t,s)}n(e,"modules.nnGame.inerGame.context.NnContext",i);var t=e.prototype;return t.open=function(){i.prototype.open.call(this),this.initUI(),console.log("addView(srddz)////////////////"),this.addView(this._view),M.isReplay?(this.addController(this._rcontroller),this.addModel(this._rmodel)):(this.addController(this._controller),this.addModel(this._model)),console.log("nngamecontext UserData.roomtype::"+M.roomtype),this.setChairNum(10),T.swithMusic("game"),console.log("NnContext open:::..."),console.log("注册了游戏内的消息！！！"),y.instance.continueQueue("MESSAGE_GAME"),f.instance.event("GameContextReady",null)},t.close=function(){i.prototype.close.call(this),D.stopMusic()},t.initUI=function(){this._view||(this._view=new oe),M.isReplay?(this._rcontroller||(this._rcontroller=new ce),this._rmodel&&(this._rmodel=new ue)):(this._controller||(this._controller=new se),this._model||(this._model=new ne))},t.setChairNum=function(i){M.isReplay?this._rmodel.chairNum=i:this._model.chairNum=i,this._view.setChairNmu(i)},o(0,t,"view",function(){return this._view}),o(0,t,"controller",function(){return M.isReplay?this._rcontroller:this._controller}),o(0,t,"model",function(){return M.isReplay?this._rmodel:this._model}),e}(p);t.__init([X,j])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(i,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var t in Laya){var s=Laya[t];s&&s.__isclass&&(e[t]=s)}});