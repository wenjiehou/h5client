!function(i,e,t){var s=(t.un,t.uns,t.static),n=t.class,o=t.getset,a=t.__newvec,r=rb.framework.mvc.AbstractLayer,h=(ui.sddzGame.ddzPart.ActTipUI,laya.display.Animation),l=t.AppConfig,d=(laya.ui.Box,laya.utils.Browser),c=(laya.ui.Button,ui.sddzGame.calculate.CalcuateRoundPageUI,ui.sddzGame.CalculatePageUI,ui.sddzGame.calculate.item.CalculatePerItemUI,ui.sddzGame.calculate.CalculatePerPageUI,modules.gameCommon.chat.Chat),u=(modules.gameCommon.chat.ChatPage,ui.sddzGame.ddzPart.ClockPartUI,common.CommonModule),f=laya.utils.Dictionary,g=(ui.sddzGame.ddzPart.DipaiPartUI,laya.events.Event,common.event.EventCenter),m=rb.framework.mvc.GameContext,p=ui.sddzGame.GameTableUI,_=ui.gameCommon.items.GiftItemUI,C=hall.HallModule,v=laya.utils.Handler,P=(laya.ui.Image,laya.ui.Label,rb.framework.mvc.core.LayerTypes,net.Message,manager.MessageManager),k=rb.framework.mvc.Module,y=t.ModuleDef,w=laya.ani.swf.MovieClip,b=modules.gameCommon.view.NewDissolvePage,A=(ui.sddzGame.ddzPart.handlePart.OtherHandlePartUI,ui.sddzGame.ddzPart.outputPart.OtherOutputPartUI,ui.sddzGame.ddzPart.handlePart.OwnerHandlePartUI,ui.sddzGame.ddzPart.outputPart.OwnerOutputPartUI,ui.gameCommon.PiaoSelePartUI,ui.sddzGame.ddzPart.PlayerCtlPartUI,ui.sddzGame.PlayerInfoPageUI,ui.sddzGame.item.PockerItemUI,ui.sddzGame.PockerPageUI),I=(common.view.PopBox,net.ProtoMessage),B=t.QuickUtils,S=hall.view.RecordView,z=modules.gameCommon.view.ReplayControlView,x=rb.framework.errors.SingletonError,T=laya.media.SoundManager,D=common.tools.SoundPlay,V=laya.display.Sprite,R=(ui.sddzGame.TableInfoPageUI,manager.TextManager),M=manager.TimeManager,G=laya.utils.Tween,N=manager.UIManager,E=t.UserData,K=ui.gameCommon.UserInfoUI,O=(laya.ui.View,t.WX),U=function(){function i(){this.length=0,this.type=0,this.bigValue=0}return n(i,"modules.sddzGame.sddzInerGame.model.data.FeijiData"),i.getFeiji=function(e){if(0==e.threeArr.length)return null;var t,s=0,n=new F;if(n.clone(e),0==n.fourArr.length)return i.preDeajishuData(n);if(1==e.fourArr.length)return n.clone(e),n.threeArr.push(e.fourArr[0]),F.compValue(n.threeArr),n.danArr.push(e.fourArr[0]),F.compValue(n.danArr),(t=i.preDeajishuData(n))?t:(n.clone(e),n.twoArr.push(e.fourArr[0],e.fourArr[0]),F.compValue(n.twoArr),i.preDeajishuData(n));if(e.fourArr.length>=2){for(n.clone(e),s=0;s<e.fourArr.length;s++)n.threeArr.push(e.fourArr[s]),n.danArr.push(e.fourArr[s]);return F.compValue(n.threeArr),i.preDeajishuData(n)}return null},i.preDeajishuData=function(e){var t=new F;t.clone(e);var s=0;if(t.threeArr.length<2)return null;if(1==F.checkValuelian(t.threeArr))return i.getFeijiWithNoFour(t);for(s=0;s<t.threeArr.length;s++)if(0==s){if(t.threeArr[s]!=t.threeArr[s+1]-1){t.danArr.push(t.threeArr[s],t.threeArr[s],t.threeArr[s]),F.compValue(t.danArr),t.threeArr.splice(s,1);break}}else if(t.threeArr[s]!=t.threeArr[s-1]+1){t.danArr.push(t.threeArr[s],t.threeArr[s],t.threeArr[s]),F.compValue(t.danArr),t.threeArr.splice(s,1);break}return i.getFeijiWithNoFour(t)},i.getFeijiWithNoFour=function(e){if(e.threeArr.length<2)return null;var t,s=F.checkValuelian(e.threeArr);if(s){if(0==e.twoArr.length&&0==e.danArr.length&&e.threeArr.length>1)return t=new i,t.bigValue=e.threeArr[e.threeArr.length-1],t.length=e.threeArr.length,t.type=0,t;if(e.threeArr.length==e.danArr.length+2*e.twoArr.length)return t=new i,t.bigValue=e.threeArr[e.threeArr.length-1],t.length=e.threeArr.length,t.type=1,t;if(e.threeArr.length==e.twoArr.length&&0==e.danArr.length)return t=new i,t.bigValue=e.threeArr[e.threeArr.length-1],t.length=e.threeArr.length,t.type=2,t}return null},i.FEIJI_NON=0,i.FEIJI_DAN=1,i.FEIJI_DUIZI=2,i}(),F=function(){function i(){this.valueArr=[],this.fourArr=[],this.threeArr=[],this.twoArr=[],this.danArr=[]}n(i,"modules.sddzGame.sddzInerGame.model.data.JishuArrData",null,"JishuArrData$1");var e=i.prototype;return e.clone=function(i){this.valueArr=i.valueArr.concat(),this.fourArr=i.fourArr.concat(),this.threeArr=i.threeArr.concat(),this.twoArr=i.twoArr.concat(),this.danArr=i.danArr.concat()},i.getJishuArrData=function(e){var t=new i,s=[],n=0;for(n=0;n<e.length;n++)s.push(te.getV(e[n]));console.log("检测的牌值：：",s),t.valueArr=s.concat();var o=0,a=0,r=0;for(n=0;n<s.length;n++){for(a=1,o=s[n],s.splice(n,1),n-=1,r=s.indexOf(o);-1!=r;)s.splice(r,1),a+=1,r=s.indexOf(o);switch(a){case 1:t.danArr.push(o);break;case 2:t.twoArr.push(o);break;case 3:t.threeArr.push(o);break;case 4:t.fourArr.push(o)}}return t},i.checkValuelian=function(i){var e=0,t=i.length;for(e=0;t-1>e;e++)if(i[e+1]-i[e]!=1)return!1;return!0},i.compValue=function(e){e.sort(i.compVFun)},i.compVFun=function(i,e){return i>e?1:(i=e)?0:-1},i}(),L=function(){function i(){}return n(i,"modules.sddzGame.sddzInerGame.model.data.PaixingLogic",null,"PaixingLogic$1"),i.getPaixing=function(e,t,s){return void 0===s&&(s=!0),s&&e.sort(i.compCardsFun),null==t&&(t=F.getJishuArrData(e)),1==i.isDanzhang(e)?1:1==i.isDuizi(e)?2:1==i.isSan(e,t)?3:1==i.isSanYi(e,t)?4:1==i.isSanEr(e,t)?5:1==i.isLiandui(e,t)?6:1==i.isShunzi(e,t)?7:1==i.isFeiji(e,t)?8:1==i.isSidaier(e,t)?9:1==i.isZhadan(e,t)?10:1==i.isDuiwang(e)?11:te.PAIXING_NON},i.isDanzhang=function(i){return 1==i.length?!0:!1},i.isDuizi=function(i){return 2==i.length&&te.getV(i[0])==te.getV(i[1])?!0:!1},i.isSan=function(i,e){var t=i.length;return 3==t&&(null==e&&(e=F.getJishuArrData(i)),1==e.threeArr.length)?!0:!1},i.isSanYi=function(i,e){var t=i.length;return 4==t&&(null==e&&(e=F.getJishuArrData(i)),1==e.threeArr.length&&1==e.danArr.length)?!0:!1},i.isSanEr=function(i,e){return 5==i.length&&(null==e&&(e=F.getJishuArrData(i)),1==e.threeArr.length&&1==e.twoArr.length)?!0:!1},i.isLiandui=function(i,e){var t=i.length;return t>=6&&t%2==0?(null==e&&(e=F.getJishuArrData(i)),0==e.fourArr.length&&0==e.threeArr.length&&e.twoArr.length>=3&&0==e.danArr.length&&1==F.checkValuelian(e.twoArr)?!0:!1):!1},i.isShunzi=function(i,e){var t=i.length;return 5>t?!1:(null==e&&(e=F.getJishuArrData(i)),0==e.fourArr.length&&0==e.threeArr.length&&0==e.twoArr.length&&e.danArr.length>=5&&1==F.checkValuelian(e.danArr)?!0:!1)},i.isFeiji=function(i,e){if(i.length<6)return!1;null==e&&(e=F.getJishuArrData(i));var t=U.getFeiji(e);return null!=t?!0:!1},i.isSidaier=function(i,e){if(i.length<6)return!1;null==e&&(e=F.getJishuArrData(i));var t=j.getSidaierData(e);return null!=t?!0:!1},i.isZhadan=function(i,e){return 4!=i.length?!1:(null==e&&(e=F.getJishuArrData(i)),1==e.fourArr.length&&0==e.threeArr.length&&0==e.twoArr.length&&0==e.danArr.length?!0:!1)},i.isDuiwang=function(i){return 2==i.length&&5==te.getT(i[0])&&5==te.getT(i[1])?!0:!1},i.compCardsFun=function(i,e){if(0==i||0==e)return 0;var t=te.getT(i),s=te.getT(e),n=te.getV(i),o=te.getV(e);return n>o?1:n==o?t>s?1:-1:-1},i.getBigThan=function(e,t){var s=[];if(0==t.length)return s.push(e[0]),s;e.sort(i.compCardsFun),t.sort(i.compCardsFun);var n,o=F.getJishuArrData(t),a=i.getPaixing(t,o,!1),r=F.getJishuArrData(e),h=0,l=0,d=0;switch(a){case te.PAIXING_NON:return alert("打出的牌型不合法！"),s;case 1:for(h=o.danArr[0],l=0;l<r.danArr.length;l++)if(r.danArr[l]>h)return s=i.getCardsFromValues(e,[r.danArr[l]]);for(l=0;l<r.twoArr.length;l++)if(r.twoArr[l]>h)return s=i.getCardsFromValues(e,[r.twoArr[l]]);for(l=0;l<r.threeArr.length;l++)if(r.threeArr[l]>h)return s=i.getCardsFromValues(e,[r.threeArr[l]]);for(l=0;l<r.fourArr.length;l++)if(r.fourArr[l]>h)return s=i.getCardsFromValues(e,[r.fourArr[l]]);return r.fourArr.length>0?s=i.getCardsFromValues(e,[r.fourArr[0],r.fourArr[0],r.fourArr[0],r.fourArr[0]]):s;case 2:for(h=o.twoArr[0],l=0;l<r.twoArr.length;l++)if(r.twoArr[l]>h)return s=i.getCardsFromValues(e,[r.twoArr[l],r.twoArr[l]]);for(l=0;l<r.threeArr.length;l++)if(r.threeArr[l]>h)return s=i.getCardsFromValues(e,[r.threeArr[l],r.threeArr[l]]);return r.fourArr.length>0?s=i.getCardsFromValues(e,[r.fourArr[0],r.fourArr[0],r.fourArr[0],r.fourArr[0]]):(1==i.checkHaveDuiWang(e)&&(s=[551,552]),s);case 3:for(h=o.threeArr[0],l=0;l<r.threeArr.length;l++)if(r.threeArr[l]>h)return s=i.getCardsFromValues(e,[r.threeArr[l],r.threeArr[l],r.threeArr[l]]);return r.fourArr.length>0?s=i.getCardsFromValues(e,[r.fourArr[0],r.fourArr[0],r.fourArr[0],r.fourArr[0]]):(1==i.checkHaveDuiWang(e)&&(s=[551,552]),s);case 4:for(h=o.threeArr[0],l=0;l<r.threeArr.length;l++)if(r.threeArr[l]>h){if(r.danArr.length>0)return s=i.getCardsFromValues(e,[r.threeArr[l],r.threeArr[l],r.threeArr[l],r.danArr[0]]);if(r.twoArr.length>0)return s=i.getCardsFromValues(e,[r.threeArr[l],r.threeArr[l],r.threeArr[l],r.twoArr[0]]);if(r.threeArr.length>1)return s=0==l?i.getCardsFromValues(e,[r.threeArr[l],r.threeArr[l],r.threeArr[l],r.threeArr[1]]):i.getCardsFromValues(e,[r.threeArr[l],r.threeArr[l],r.threeArr[l],r.threeArr[0]])}return r.fourArr.length>0?s=i.getCardsFromValues(e,[r.fourArr[0],r.fourArr[0],r.fourArr[0],r.fourArr[0]]):(1==i.checkHaveDuiWang(e)&&(s=[551,552]),s);case 5:for(h=o.threeArr[0],l=0;l<r.threeArr.length;l++)if(r.threeArr[l]>h){if(r.twoArr.length>0)return s=i.getCardsFromValues(e,[r.threeArr[l],r.threeArr[l],r.threeArr[l],r.twoArr[0],r.twoArr[0]]);if(r.threeArr.length>1)return s=0==l?i.getCardsFromValues(e,[r.threeArr[l],r.threeArr[l],r.threeArr[l],r.threeArr[1],r.threeArr[1]]):i.getCardsFromValues(e,[r.threeArr[l],r.threeArr[l],r.threeArr[l],r.threeArr[0],r.threeArr[0]])}return r.fourArr.length>0?s=i.getCardsFromValues(e,[r.fourArr[0],r.fourArr[0],r.fourArr[0],r.fourArr[0]]):(1==i.checkHaveDuiWang(e)&&(s=[551,552]),s);case 6:h=o.twoArr[o.twoArr.length-1],d=o.twoArr.length;var c=[];for(c=c.concat(r.threeArr),c=c.concat(r.twoArr),c.sort(i.compCardsFun),l=0;l<c.length;l++)c[l]<h-(d-2)&&(c.splice(l,1),l--);return c.length>=d&&(n=i.getFromVlauesLenThan(c,d),null!=n&&n.length>0)?(n=n.concat(n),n.sort(i.compCardsFun),s=i.getCardsFromValues(e,n.reverse())):r.fourArr.length>0?s=i.getCardsFromValues(e,[r.fourArr[0],r.fourArr[0],r.fourArr[0],r.fourArr[0]]):(1==i.checkHaveDuiWang(e)&&(s=[551,552]),s);case 7:h=o.danArr[o.danArr.length-1],d=o.danArr.length;var u=[];for(u=u.concat(r.threeArr),u=u.concat(r.twoArr),u=u.concat(r.danArr),u.sort(i.compCardsFun),l=0;l<u.length;l++)u[l]<h-(d-2)&&(u.splice(l,1),l--);return u.length>=d&&(n=i.getFromVlauesLenThan(u,d),null!=n&&n.length>0)?s=i.getCardsFromValues(e,n.reverse()):r.fourArr.length>0?s=i.getCardsFromValues(e,[r.fourArr[0],r.fourArr[0],r.fourArr[0],r.fourArr[0]]):(1==i.checkHaveDuiWang(e)&&(s=[551,552]),s);case 8:var f=U.getFeiji(o);if(null==f)return s;var g=r.threeArr.concat(),m=[];for(l=0;l<g.length;l++)g[l]<f.bigValue-(f.length-2)&&(m.push(g[l]),g.splice(l,1),l--);if(g.length>=f.length){n=i.getFromVlauesLenThan(g,f.length);var p=n.concat();for(l=0;l<g.length;l++){var _=p.indexOf(g[l]);-1!=_&&(p.splice(_,1),g.splice(l,1),l--)}if(m=m.concat(g),null!=n&&n.length>0)switch(f.type){case 0:return n=n.concat(n).concat(n),n.sort(i.compCardsFun),s=i.getCardsFromValues(e,n);case 1:if(f.length<=3*m.length+2*r.twoArr.length+r.danArr.length){n=n.concat(n).concat(n),n.sort(i.compCardsFun);var C=[];for(l=0;l<r.danArr.length&&(C.push(r.danArr[l]),C.length!=f.length);l++);if(C.length<f.length)for(l=0;l<r.twoArr.length&&(C.push(r.twoArr[l]),C.length!=f.length)&&(C.push(r.twoArr[l]),C.length!=f.length);l++);if(C.length<f.length)for(l=0;l<m.length&&(C.push(m[l]),C.length!=f.length)&&(C.push(m[l]),C.length!=f.length)&&(C.push(m[l]),C.length!=f.length);l++);if(C.length==f.length)return C.sort(i.compCardsFun),s=i.getCardsFromValues(e,n.concat(C))}break;case 2:if(f.length<=m.length+r.twoArr.length){n=n.concat(n).concat(n),n.sort(i.compCardsFun);var v=[];for(l=0;l<r.twoArr.length&&(v.push(r.twoArr[l]),v.length!=f.length);l++);if(v.length<f.length)for(l=0;l<m.length&&(v.push(m[l]),v.length!=f.length);l++);if(v.length==f.length)return v=v.concat(v),v.sort(i.compCardsFun),s=i.getCardsFromValues(e,n.concat(v))}}}return r.fourArr.length>0?s=i.getCardsFromValues(e,[r.fourArr[0],r.fourArr[0],r.fourArr[0],r.fourArr[0]]):(1==i.checkHaveDuiWang(e)&&(s=[551,552]),s);case 9:var P=j.getSidaierData(o),k=j.getSidaierData(r);return null!=k&&k.type==P.type&&k.value>P.value?s=e.concat():r.fourArr.length>0?s=i.getCardsFromValues(e,[r.fourArr[0],r.fourArr[0],r.fourArr[0],r.fourArr[0]]):(1==i.checkHaveDuiWang(e)&&(s=[551,552]),s);case 10:if(h=o.fourArr[0],r.fourArr.length>0)for(l=0;l<r.fourArr.length;l++)if(r.fourArr[l]>h)return s=i.getCardsFromValues(e,[r.fourArr[l],r.fourArr[l],r.fourArr[l],r.fourArr[l]]);return 1==i.checkHaveDuiWang(e)&&(s=[551,552]),s;case 11:return s}return s},i.checkHaveDuiWang=function(i){var e=i.indexOf(551),t=i.indexOf(552);return-1!=e&&-1!=t?!0:!1},i.getCardsFromValues=function(i,e){var t=[],s=i.concat(),n=0,o=0;for(n=0;n<e.length;n++)for(o=0;o<s.length;o++)if(te.getV(s[o])==e[n]){t.push(s[o]),s.splice(o,1);break}return t},i.getFromVlauesLenThan=function(i,e){var t=[],s=0,n=0;for(s=0;s<i.length-1&&(i[s+1]==i[s]+1?0==n?(t.push(i[s],i[s+1]),n+=2):(t.push(i[s+1]),n+=1):(n=0,t=[]),n!=e);s++);return t.length<e&&(t.length=0),t},i.sortHandleCards=function(e){e.sort(i.compCardsFun)},i.sortOutputCards=function(e){var t;i.sortHandleCards(e);var s=F.getJishuArrData(e),n=i.getPaixing(e),o=[],a=[],r=0,h=0,l=0;switch(n){case 4:o=[s.threeArr[0],s.threeArr[0],s.threeArr[0],s.danArr[0]],e=i.getCardsFromValues(e,o);break;case 5:o=[s.threeArr[0],s.threeArr[0],s.threeArr[0],s.twoArr[0],s.twoArr[0]],e=i.getCardsFromValues(e,o);break;case 8:var d=U.getFeiji(s);for(r=0;r<d.length;r++){h=d.bigValue-(d.length-1-r),a.push(h,h,h);for(var c=0;3>c;c++)l=s.valueArr.indexOf(h),-1!=l&&s.valueArr.splice(l,1)}o=a.concat(s.valueArr),e=i.getCardsFromValues(e,o);break;case 9:for(h=s.fourArr[0],a.push(h,h,h,h),r=0;4>r;r++)l=s.valueArr.indexOf(h),-1!=l&&s.valueArr.splice(l);o=a.concat(s.valueArr),e=i.getCardsFromValues(e,o)}return t=e.concat()},i}(),j=function(){function i(){this.type=0,this.value=0}return n(i,"modules.sddzGame.sddzInerGame.model.data.SidaierData"),i.getSidaierData=function(e){var t;if(1==e.fourArr.length){if(0==e.threeArr.length){if(2==e.danArr.length&&0==e.twoArr.length)return t=new i,t.type=1,t.value=e.fourArr[0],t;if(0==e.danArr.length&&1==e.twoArr.length)return t=new i,t.type=1,t.value=e.fourArr[0],t;if(0==e.danArr.length&&2==e.twoArr.length)return t=new i,t.type=2,t.value=e.fourArr[0],t}}else if(2==e.fourArr.length&&0==e.threeArr.length&&0==e.twoArr.length&&0==e.danArr.length)return t=new i,t.type=2,t.value=e.fourArr[1],t;return null},i.TYPE_NON=0,i.TYPE_DAN=1,i.TYPE_DUI=2,i}(),H=function(){function i(){this.ACKBC_Into_Room=null,this.ACK_RoomInfo=null,this.ACK_Room_User=null,this.ACKBC_CurPlayer=null,this.ACKBC_Sitdown=null,this.ACKBC_Standup=null,this.ACKBC_Ready=null,this.ACKBC_Exit_Room=null,this.NotifyStartGame=null,this.MSG_NOTIFY_SUMMARY=null,this.AckDisband=null,this.NotifyDisband=null,this.NotifyUserState=null,this.ACKBC_Sddz_Start=null,this.ACK_User_SeatCard=null,this.ACKBC_Sddz_Chupai=null,this.ACKBC_Sddz_End=null,this.ACKBC_Sddz_Total=null,this.ACKBC_Sddz_Card_Init=null,this.ACKBC_Sddz_JiaoDizhu=null,this.ACKBC_Sddz_Jiaofen=null,this.ACKBC_Sddz_Dizhu=null,this.ACKBC_Sddz_Mingpai=null,this.ACKBC_Sddz_Jiabei=null,this.ACKBC_Sddz_Pass=null}return n(i,"modules.sddzGame.sddzInerGame.model.SddzMsgs"),i}(),J=function(){function i(i){this._skin=null,this._items=a(3,null),this._skin=i;var e=0,t=this._items.length;for(e=0;t>e;e++)this._items[e]=new Q(this._skin["item"+e]);this._skin.hideBtn.on("click",this,this.onClickHideBtn),this._skin.readyBtn.on("click",this,this.onClickReadyBtn),this._skin.confirmBtn.on("click",this,this.onClickConfirmBtn),this._skin.closeBtn.on("click",this,this.onClickCloseBtn),this.reset()}n(i,"modules.sddzGame.sddzInerGame.view.calculate.CalculatePerPart",null,"CalculatePerPart$1");var e=i.prototype;return e.getPiaoSelePart=function(){return null},e.onClickHideBtn=function(){this._skin.visible=!1,this.view.calculatePage.showPerShowBtn()},e.onClickReadyBtn=function(){var i={sid:E.SID};this.controller.sendMsgCommond(I.getProtoMessage(210,i)),this.hide()},e.onClickConfirmBtn=function(){console.log("点击了确定按钮，要跳到总的结算界面啦"),this.view.calculatePage.reset(),B.popMessageBox("房间已结束！","BTN_ENDGAME",this,this.onConfirmEnd)},e.onConfirmEnd=function(i){0==i?l.isNewHall?B.gotoHall(1):(this.controller.endGameGotoHall(),t.timer.callLater(this,this.gotoReport)):l.isNewHall?B.gotoHall():this.controller.endGameGotoHall()},e.gotoReport=function(){C.instance.hallContext.hallView.hallLayer.onRecord({uniqueCode:E.uniqueCode})},e.onClickCloseBtn=function(){this.hide()},e.timeOver=function(){this._skin.visible=!0,this._skin.readyBtn.visible=!1,this._skin.confirmBtn.visible=!1,this._skin.readyImg.visible=!1,this._skin.closeBtn.visible=!1,this._skin.confirmBtn.visible=this.model.isSelfSitDown?!0:!0},e.hideReadyBtn=function(){},e.updateBtns=function(){if(this._skin.hideBtn.alpha=E.isReplay?0:1,0==this.isShow||E.isReplay)return this._skin.readyImg.visible=!1,this._skin.readyBtn.visible=!1,this._skin.confirmBtn.visible=!1,void 0;if(this._skin.readyBtn.visible=!1,this._skin.confirmBtn.visible=!1,this._skin.readyImg.visible=!1,this._skin.closeBtn.visible=!1,this.model.isSelfSitDown){if(void 0==this.model.sddzMsgs.ACKBC_Sddz_Total.Finished&&(this.model.sddzMsgs.ACKBC_Sddz_Total.Finished=!1),1==this.model.sddzMsgs.ACKBC_Sddz_Total.Finished)this._skin.confirmBtn.visible=!0,l.autoPlay&&this.onClickConfirmBtn(null);else if(this._skin.readyBtn.visible=!0,this._skin.readyImg.visible=!0,l.autoPlay){var i=this.model.sddzMsgs.ACKBC_Sddz_Total;i.List[0].Score+i.List[1].Score+i.List[2].Score==0&&this.onClickReadyBtn(null)}}else 1==this.model.sddzMsgs.ACKBC_Sddz_Total.Finished?this._skin.confirmBtn.visible=!0:this._skin.closeBtn.visible=!0},e.show=function(){this._skin.visible=!0,this.updateBtns();var i=this.model.sddzMsgs.ACKBC_Sddz_Total,e=0;if(this.model.isLiu)for(e=0;e<this._items.length;e++)this._items[e].update(e,null,this.model.isLiu);else{var t;for(e=0;e<this._items.length;e++)this._items[e].update(e,i.List[e],this.model.isLiu),t=this.model.playerByPos(e),1==E.Rule[4]&&(t.Coin=void 0!=i.List[e].TotalScore?i.List[e].TotalScore:0),t.score=void 0!=i.List[e].TotalScore?i.List[e].TotalScore:0,console.log("player.score::"+t.score);this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec,!1),this.view.playerInfoPage.updateJiabei()}},e.reset=function(){var i=0,e=this._items.length;for(i=0;e>i;i++)this._items[i].reset();this._skin.visible=!1},e.hide=function(){this._skin.visible=!1},o(0,e,"isShow",function(){return this._skin.visible}),o(0,e,"model",function(){return fe.instance.gameContext.model}),o(0,e,"view",function(){return fe.instance.gameContext.view}),o(0,e,"controller",function(){return fe.instance.gameContext.controller}),i}(),W=function(){function i(i){this._skin=null,this._skin=i,this.reset()}n(i,"modules.sddzGame.sddzInerGame.view.calculate.CalculateRoundPart",null,"CalculateRoundPart$1");var e=i.prototype;return e.onClickShareBtn=function(){},e.onClickBackBtn=function(){l.isNewHall?B.gotoHall():fe.instance.gameContext.controller.endGameGotoHall()},e.show=function(){},e.showGetTicketNum=function(){},e.hide=function(){this._skin.visible=!1},e.reset=function(){this._skin.visible=!1},o(0,e,"model",function(){return fe.instance.gameContext.model}),o(0,e,"view",function(){return fe.instance.gameContext.view}),i}(),Q=function(){function i(i){this._skin=null,this._skin=i,this.init()}n(i,"modules.sddzGame.sddzInerGame.view.calculate.item.CalculatePerItem",null,"CalculatePerItem$1");var e=i.prototype;return e.init=function(){},e.update=function(i,e,t){void 0===t&&(t=!1);var s=this.model.playerByPos(i);return null==s&&(s=this.model.playerByUid(this.model.beKickedPlayer[i])),null==s?this._skin.visible=!1:(this._skin.visible=!0,this._skin.nameTf.text=s.nickname),this._skin.dizhuImg.visible=i==this.model.dizhuPos?!0:!1,t?(this._skin.difenTf.text="0",this._skin.beishuTf.text="0",this._skin.zongfenTf.font=R.NumberYellowFont,this._skin.zongfenTf.text="0",this._skin.chunImg.visible=!1,this._skin.fanchunImg.visible=!1,void 0):(e&&(this._skin.difenTf.text=void 0!=e.Difen?""+e.Difen:"0",this._skin.beishuTf.text=void 0!=e.Beishu?""+e.Beishu:"0",void 0==e.Score&&(e.Score=0),e.Score>0?(this._skin.zongfenTf.font=R.NumberYellowFont,this._skin.zongfenTf.text="+"+s.zongchengji,this._skin.zongfenTf.text="+"+e.Score):(this._skin.zongfenTf.font=R.NumberBlueFont,this._skin.zongfenTf.text=e.Score),this._skin.chunImg.visible=e.Chun,this._skin.fanchunImg.visible=e.Fanchun),void 0)},e.reset=function(){},o(0,e,"model",function(){return fe.instance.gameContext.model}),o(0,e,"view",function(){return fe.instance.gameContext.view}),i}(),$=function(){function i(i){this._perPage=null,this._roundPage=null,this._skin=null,this._skin=i,this._perPage=new J(this._skin.perPage),this._roundPage=new W(this._skin.roundPage),this.reset(),this._skin.showBtn.on("click",this,this.showPerCal)}n(i,"modules.sddzGame.sddzInerGame.view.CalculatePage",null,"CalculatePage$1");var e=i.prototype;return e.showPerShowBtn=function(){this._skin.showBtn.visible=!0},e.showPerCal=function(){this._skin.perPage.visible=!0,this._skin.showBtn.visible=!1},e.reset=function(){this._skin.visible=!1,this._skin.showBtn.visible=!1,this._perPage.reset(),this._roundPage.reset()},e.showGetTicket=function(){},e.show=function(){E.isReplay&&this.view.replayControlView.moveCalculate(),this._perPage.reset(),this._roundPage.reset(),this._skin.visible=!0,this._perPage.show(),u.instance.commonContext.view.timeWarView.hide()},e.gameTimeOver=function(){this._perPage.timeOver()},o(0,e,"perPage",function(){return this._perPage}),o(0,e,"view",function(){return fe.instance.gameContext.view}),o(0,e,"roundPage",function(){return this._roundPage}),o(0,e,"model",function(){return fe.instance.gameContext.model}),i}(),q=function(){function i(i){this._skin=null,this._bottom=null,this._right=null,this._left=null,this._PiaoSelePart=null,this._PosChairVec=[],this._skin=i,this._skin.mouseThrough=!0,this._bottom=new Y(i.playerInfo0),this._right=new Y(i.playerInfo1),this._left=new Y(i.playerInfo2),this._PiaoSelePart=new Z(i.piaoPart),this._skin.startBtn.visible=!1,i.leaveBtn.visible=!1,this._skin.disbandBtn.visible=!1,this._skin.startBtn.on("click",this,this.onClickStartBtn),this._skin.inviteBtn.on("click",this,this.onClickInviteBtn),this._skin.leaveBtn.on("click",this,this.onClickLeaveBtn),this._skin.disbandBtn.on("click",this,this.onClickDisbandBtn),this.allReset()}n(i,"modules.sddzGame.sddzInerGame.view.PlayerInfoPage",null,"PlayerInfoPage$2");var e=i.prototype;return e.onClickStartBtn=function(){var i={SID:E.SID};this.controller.sendMsgCommond(I.getProtoMessage(220,i))},e.onClickInviteBtn=function(){u.instance.commonContext.view.vgameShareView.show()},e.onClickLeaveBtn=function(){var i={sid:E.SID};this.controller.sendMsgCommond(I.getProtoMessage(190,i),!1)},e.onClickDisbandBtn=function(){if(0==this.model.gameHasStarted){var i={sid:E.SID};this.controller.sendMsgCommond(I.getProtoMessage(151,i),!1)}else{var e={roomId:E.roomid};g.instance.event("SOCKET_SEND",I.getProtoMessage(400,e))}},e.updateLeaveDisbandBtns=function(){this._skin.leaveBtn.visible=!1,this._skin.disbandBtn.visible=!1,0==this.model.gameHasStarted?E.selfuid==this.model.roomOwnerUid?this._skin.disbandBtn.visible=!0:this._skin.leaveBtn.visible=!0:this._skin.disbandBtn.visible=!0},e.onClickReadyBtn=function(){var i={sid:E.SID};this.controller.sendMsgCommond(I.getProtoMessage(210,i))},e.showStartBtn=function(i){void 0===i&&(i=!0),this._skin.startBtn.visible=i},e.hideBtnsByGameStart=function(){this._skin.startBtn.visible=!1,this._skin.inviteBtn.visible=!1,this._PiaoSelePart.hide()},e.updateStartBtn=function(){this._skin.startBtn.visible=!1},e.updateSitDownUpBtn=function(i){void 0===i&&(i=!0),i?this.model.isSelfSitDown&&0==this.model.isGameStart?u.instance.commonContext.view.functionOption.onClickBtn(!0):u.instance.commonContext.view.functionOption.onClickBtn(!0):this.model.isSelfSitDown?u.instance.commonContext.view.functionOption.onClickBtn(!0):u.instance.commonContext.view.functionOption.onClickBtn(!0)},e.showDizhuNM=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].showDizhuNM(this.model.getChairPosByDir(i))},e.updateJiabei=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].updateJiabei(this.model.getChairPosByDir(i))},e.hideDizhuNM=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].hideDizhuNM()},e.hideReadyBtn=function(){},e.allReset=function(){this._bottom.reset(),this._right.reset(),this._left.reset(),this._PiaoSelePart.reset()},e.setChairNum=function(i){switch(void 0===i&&(i=3),this._PosChairVec.length=0,console.log("playerinfo setChairNum::"+i),i){case 3:this._PosChairVec.push(this._bottom,this._right,this._left),this._bottom.dir=0,this._right.dir=1,this._left.dir=2;break;default:this._PosChairVec.push(this._bottom,this._right,this._left)}this.bigReset()},e.bigReset=function(){this._skin.startBtn.visible=!1,this._skin.inviteBtn.visible=!0},e.reset=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].reset();this.updateSitDownUpBtn()},e.havePiaoReset=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].reset(!0);this._PiaoSelePart.reset()},e.resetOnePos=function(i){var e=this.model.getChairDirByPos(i);this._PosChairVec[e].reset()},e.hideReadySimbol=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].hideReadySimbol()},e.showVoice=function(i){var e=this.model.getPlayerPosByUid(i),t=this.model.getChairDirByPos(e);console.log(t),-1==t?(this._skin.laba.visible=!0,this._skin.labaTip.play()):(this._PosChairVec[t].voice.visible=!0,this._PosChairVec[t].voice.ani.play())},e.hideVoice=function(i){var e=this.model.getPlayerPosByUid(i),t=this.model.getChairDirByPos(e);-1==t?(this._skin.laba.visible=!1,this._skin.labaTip.stop()):(this._PosChairVec[t].voice.visible=!1,this._PosChairVec[t].voice.ani.stop())},e.showReady=function(i){var e=this.model.getChairDirByPos(i);this._PosChairVec[e].showReady()},e.updateOnePlayerInfo=function(i,e){if(void 0===e&&(e=!1),-1!=i.pos){var t=this.model.getChairDirByPos(i.pos);t<this._PosChairVec.length&&this._PosChairVec[t].update(i,e)}},e.updateOnePlayerGolds=function(i){var e=this.model.getChairDirByPos(i.pos);e<this._PosChairVec.length&&(console.log("   updateOnePlayerInfo ::"+e+" obj.pos::"+i.pos),this._PosChairVec[e].updateGolds(i))},e.updatePlayerInfos=function(i,e,t){void 0===e&&(e=!0),void 0===t&&(t=!1),console.log("updatePlayerInfos ::"+i.length),this.reset(),e&&this._PiaoSelePart.reset();var s=0,n=i.length;for(s=0;n>s;s++)i[s]&&(console.log("updatePlayerInfos i::"+s),this.updateOnePlayerInfo(i[s],t))},e.updateHua=function(i){if(-1!=i){var e=this.model.getChairDirByPos(i);this._PosChairVec[e].updateHua(i)}},e.updateGolds=function(i){console.log("updatePlayerInfos ::"+i.length),console.log(i);var e=0,t=i.length;for(e=0;t>e;e++)i[e]&&(console.log("updatePlayerInfos i::"+e),this.updateOnePlayerGolds(i[e]))},e.updateTingImg=function(i){var e=this.model.getChairDirByPos(i);this._PosChairVec[e].showTingImg()},e.updateTirenBtn=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].updateTirenBtn()},e.showExpress=function(i,e){this._PosChairVec[i].showExpress(e)},e.setGrayhead=function(i,e,t,s){this._PosChairVec[i].setHeadGray(e,t,s)},o(0,e,"model",function(){return fe.instance.gameContext.model}),o(0,e,"controller",function(){return fe.instance.gameContext.controller}),i}(),Y=function(){function i(i){this.needPiao=!1,this._skin=null,this.zhenghuaBox=null,this.yehuaBox=null,this.huaTf_z=null,this.huaTf_y=null,this.huaImg_z=null,this.huaImg_y=null,this.headImg=null,this.nameTf=null,this.recordTf=null,this.readyImg=null,this.tingpaiImg=null,this.gangEff=null,this.tirenBtn=null,this.sitDownBtn=null,this.offlineTf=null,this.fenshuTf=null,this.voice=null,this.headw=0,this.headh=0,this.dir=0,this.expressImg=null,this.expressMov=null,this.expressUrl="res/swfs/Emoticon_",this.piaoImg=null,this.playingPiaoImg=null,this.offlineimg=null,this.gangAni=null,this._skin=i,this.init()}n(i,"modules.sddzGame.sddzInerGame.view.playerInfoPart.BasePlayerInfoItem",null,"BasePlayerInfoItem$2");var e=i.prototype;return e.init=function(){this._skin.mouseThrough=!0,this._skin.haveBox.mouseThrough=!0,this.zhenghuaBox=this._skin.zhenghuaBox,this.yehuaBox=this._skin.yehuaBox,this.huaTf_z=this._skin.huaTf_z,this.huaTf_y=this._skin.huaTf_y,this.huaImg_z=this._skin.huaZhenhua,this.huaImg_y=this._skin.huaYehua,this.zhenghuaBox.visible=!1,this.yehuaBox.visible=!1,this.huaTf_z.visible=!0,this.huaTf_y.visible=!0,this.huaImg_y.visible=!1,this.huaImg_z.visible=!0,this.offlineTf=this._skin.offlineTf,this.offlineTf.overflow="visible",this.piaoImg=this._skin.piaoImg,this.playingPiaoImg=this._skin.playingPiaoImg,this.headImg=this._skin.headImg,this.nameTf=this._skin.nameTf,this.recordTf=this._skin.recordTf,this.readyImg=this._skin.readyImg,this.voice=this._skin.voice,this.tingpaiImg=this._skin.mingpaiPic,this.gangEff=this._skin.gangEff,this.fenshuTf=this._skin.fenshuTf,this.tirenBtn=this._skin.tirenBtn,this.expressImg=this._skin.express,this.offlineimg=this._skin.offline,this.sitDownBtn=this._skin.sitdownBtn,this.tirenBtn.visible=!1,this.voice.visible=!1,this.offlineimg.visible=!1,this.headw=this.headImg.width,this.headh=this.headImg.height,this.loadExpressMov(),this.tirenBtn.on("click",this,this.onClickTiren),this.sitDownBtn.on("click",this,this.onClickSitdown)},e.onClickSitdown=function(){if(E.isCanSitdown){if(this.model.isSelfSitDown)return this.onConFirm(0),void 0;if(this.model.sddzMsgs.ACK_RoomInfo.RoundCount>0)return B.popMessage("接替之前的玩家进行游戏不收费，祝您游戏愉快！"),this.onConFirm(0),void 0;var i=this.model.sddzMsgs.ACK_RoomInfo,e=i.Rule,t=l.getRule(e[1]),s="";s=0==t.type?"局数":"时间";var n="本游戏工具为收费软件，按游戏"+s+"扣除房卡。坐下不扣钱，开始游戏后才会扣钱，开始游戏后不予退还。是否花费"+l.costRule[E.roomtype][e[1]]/3+"房卡加入牌局？";B.popMessageBox(n,"BTN_LABEL_QUEDINGQUXIAO",this,this.onConFirm,"提示","left")}},e.onConFirm=function(i){if(0==i){if(!E.isCanSitdown)return;var e={sid:E.SID,index:this.model.getChairPosByDir(this.dir)};this.controller.sendMsgCommond(I.getProtoMessage(195,e)),E.isCanSitdown=!1,t.timer.once(400,this,this.restCanSitdown)}},e.restCanSitdown=function(){E.isCanSitdown=!0,t.timer.clear(this,this.restCanSitdown)},e.onClickTiren=function(){return 0==this.model.isSelfSitDown?(B.popMessage("围观用户没有权限踢人"),void 0):(this.model.isGameStart?B.popMessageBox("踢人会导致当前游戏流局，确认踢人吗？","BTN_LABEL_QUEDINGQUXIAO",this,this.onConFirmTiren,"提示","left"):this.onConFirmTiren(0),void 0)},e.onConFirmTiren=function(i){if(0==i){var e={pos:this.model.getChairPosByDir(this.dir)};this.controller.sendMsgCommond(I.getProtoMessage(405,e))}},e.loadGangEff=function(){this.gangEff.removeChildren(),this.gangEff.skin="",this.gangAni=new h,this.gangAni.loadAtlas("res/animations/gangaddEff.json"),this.gangAni.stop(),this.gangEff.addChild(this.gangAni),this.gangAni.on("complete",this,this.onGangAniComp)},e.loadExpressMov=function(){this.expressImg.removeChildren(),this.expressImg.skin="",this.expressMov=new w,this.expressMov.width=200,this.expressMov.height=200,this.expressImg.addChild(this.expressMov),this.expressMov.on("complete",this,this.onCompleteMov)},e.showExpress=function(i){null!=this.expressMov&&(this.expressMov.alpha=1,G.clearAll(this.expressMov),this.expressMov.parent&&this.expressMov.removeSelf()),this.expressMov=new w,this.expressMov.width=200,this.expressMov.height=200,this.expressMov.x=-85,this.expressMov.y=-85,this.expressImg.addChild(this.expressMov),this.expressMov.visible=!0,this.expressMov.alpha=1,10>i?this.expressMov.load(this.expressUrl+"0"+i+".swf",!0):this.expressMov.load(this.expressUrl+i+".swf",!0),G.to(this.expressMov,{alpha:.3},500,null,new v(this,this.onCompeteTween,[null]),2500)},e.onCompeteTween=function(){null!=this.expressMov&&(this.expressMov.visible=!1,this.expressMov.alpha=1,this.expressMov.parent&&this.expressMov.removeSelf(),this.expressMov=null)},e.onCompleteMov=function(){},e.onGangAniComp=function(){this.gangEff.visible=!1,this.gangAni.stop()},e.playGangEff=function(i){0!=i&&(i>0?(this.gangEff.visible=!0,this.gangAni.play(0,!1),this.fenshuTf.color="#00ff00"):(this.gangEff.visible=!1,this.gangAni.stop(),this.fenshuTf.color="#ff0000"),this.fenshuTf.visible=!0,this.fenshuTf.text=i>0?"+"+i:i+"",this.fenshuTf.y=104,G.to(this.fenshuTf,{y:64},2e3,null,v.create(this,this.onFenshuEffComp),2))
},e.onFenshuEffComp=function(){this.fenshuTf.visible=!1},e.update=function(i,e){void 0===e&&(e=!1),this.sitDownBtn.visible=!1,this._skin.haveBox.visible=!0,void 0==i.score&&(i.score=0),this.nameTf.text=i.nickname,this.recordTf.text=1==E.Rule[4]?i.Coin:""+i.score,E.uid==i.uid&&(E.Diamond=i.Diamond,E.score=i.score,E.Coin=i.Coin),1==i.readystate?(0==this.model.isGameStart&&(this.readyImg.visible=!0),this.setPiaoValue(i.piao),console.log("obj.piao::"+i.piao),this.showPiaoImage(this.model.isGameStart)):(this.readyImg.visible=!1,this.hidePiaoImage());var t=this.model.getPlayerPosByUid(i.uid);if(this.tingpaiImg.visible=!1,this._skin.chairPos.text="座位号："+t,this._skin.chairPos.visible=!1,this.headImg.width=this.headw,this.headImg.height=this.headh,this.headImg.on("click",this,this.onShowUserInfo,[i]),"h"==O.splitStr(i.Icon,"")[0]){var s=new V;s.loadImage(i.Icon,0,0,this.headw,this.headh,v.create(this,this.delayPhotoPhoto,[s,s])),s.mouseEnabled=!0,this.headImg.addChild(s)}var n=!1;2==i.state&&(n=!0),this.setHeadGray(n,!0,i.offlineTime),this.updateTirenBtn(),e&&this.playFlyHeadImg(this.model.getChairDirByPos(i.prePos))},e.onShowUserInfo=function(i){ie.instance.show(i.uid,i.ip,i.Icon)},e.delayPhotoPhoto=function(){},e.updateGolds=function(i){this.recordTf.x=0,this.recordTf.y=1;var e=this.recordTf.text;this.recordTf.scaleX=this.recordTf.scaleY=.6,this.recordTf.x=0,this.recordTf.y=-2,i.score>=0?(this.recordTf.font=R.NumberYellowFont,this.recordTf.text=""+i.score,i.score/10<1?this.recordTf.x+=14:i.score/10<10?this.recordTf.x+=6:i.score/10<100?this.recordTf.x+=-2:i.score/10<1e3&&(this.recordTf.x+=-10)):(this.recordTf.font=R.NumberYellowFont,this.recordTf.text=i.score+"",i.score/10>-1?this.recordTf.x+=2:i.score/10>-10?this.recordTf.x+=-4:i.score/10>-100?this.recordTf.x+=-12:i.score/10>-1e3&&(this.recordTf.x+=-22)),this.playGangEff(i.score-e)},e.updateHua=function(){this.zhenghuaBox.visible=!1,this.yehuaBox.visible=!1},e.show=function(){this._skin.visible=!0},e.hide=function(){this._skin.visible=!1},e.reset=function(i){void 0===i&&(i=!1),this._skin.haveBox.visible=!1,this.sitDownBtn.visible=!0,this._skin.zhuangImg.visible=!1,this.readyImg.visible=!1,this.tingpaiImg.visible=!1,this.gangEff.visible=!1,this.fenshuTf.visible=!1,i&&(this.zhenghuaBox.visible=!1,this.yehuaBox.visible=!1),this.piaoImg.visible=!1,this.playingPiaoImg.visible=!1,this._skin.notPiaoTf.visible=!1,this.tirenBtn.visible=!1,this.voice.visible=!1,this.voice.ani.stop(),this._skin.jiabeiImg.visible=!1,this.hideDizhuNM()},e.showDizhuNM=function(i){var e=this._skin.shenfenImg;e.visible=!0,e.skin=i==this.model.dizhuPos?"gameCommon/dizhu.png":"gameCommon/nongming.png"},e.hideDizhuNM=function(){this._skin.shenfenImg.visible=!1},e.updateJiabei=function(i){this._skin.jiabeiImg.visible=1==this.model.jiabeiVec[i]?!0:!1},e.hideReadySimbol=function(){this.readyImg.visible=!1},e.showTingImg=function(){this.tingpaiImg.visible=!0},e.showReady=function(){this.readyImg.visible=!0},e.setPiaoValue=function(){this.needPiao},e.showPiaoImage=function(i){this.needPiao&&(i?(this.playingPiaoImg.visible=!0,this.piaoImg.visible=!1):(this.playingPiaoImg.visible=!1,this.piaoImg.visible=!0),this._skin.notPiaoTf.visible=!1)},e.hidePiaoImage=function(){this.needPiao&&(this.playingPiaoImg.visible=!1,this.piaoImg.visible=!1,this._skin.notPiaoTf.visible=!0)},e.updateTirenBtn=function(){var i=this.model.playerByPos(this.model.getChairPosByDir(this.dir));null!=i&&(this.tirenBtn.visible=i.canKick)},e.setHeadGray=function(i,e,s){void 0===s&&(s=0),i&&e?(this._skin.offLineSp.visible=!0,this.headImg.filters=[B.grayscaleFilter],this.offlineimg.visible=!0,this.offlineTf.visible=!0,this.offlineTf.text=s+"",this.startCutDownOffline()):i&&!e?(this._skin.offLineSp.visible=!0,t.timer.once(1e4,this,this.setGrayhead)):(this._skin.offLineSp.visible=!1,this.tirenBtn.visible=!1,this.headImg.filters=null,this.offlineimg.visible=!1,this.offlineTf.visible=!1,t.timer.clear(this,this.setGrayhead),this.model.playerByPos(this.model.getChairPosByDir(this.dir)).canKick=!1,this.stopCutDownOffline())},e.startCutDownOffline=function(){g.instance.on("ON_LITTLETIMEER",this,this.onCutdown)},e.stopCutDownOffline=function(){g.instance.off("ON_LITTLETIMEER",this,this.onCutdown),this.offlineTf.visible=!1},e.onCutdown=function(){null!=this.model.playerByPos(this.model.getChairPosByDir(this.dir))&&(this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime--,this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime<=0&&(this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime=0,this.stopCutDownOffline()),(0/0==this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime||void 0==this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime)&&(this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime=0),this.offlineTf.text=this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime+"")},e.setGrayhead=function(){this.headImg.filters=[B.grayscaleFilter],this.offlineimg.visible=!0},e.playFlyHeadImg=function(i){var e=500;switch(this.dir){case 0:switch(i){case 1:G.from(this._skin,{x:946,y:150},e);break;case 2:G.from(this._skin,{x:199,y:47},e);break;case 3:G.from(this._skin,{x:12,y:150},e)}break;case 1:switch(i){case 0:G.from(this._skin,{x:12,y:378},e);break;case 2:G.from(this._skin,{x:202,y:46},e);break;case 3:G.from(this._skin,{x:12,y:150},e)}break;case 2:switch(i){case 0:G.from(this._skin,{x:-116,y:324},e);break;case 1:G.from(this._skin,{x:820,y:96},e);break;case 3:G.from(this._skin,{x:-116,y:96},e)}break;case 3:switch(i){case 0:G.from(this._skin,{x:12,y:378},e);break;case 1:G.from(this._skin,{x:946,y:150},e);break;case 2:G.from(this._skin,{x:199,y:47},e)}}},o(0,e,"model",function(){return fe.instance.gameContext.model}),o(0,e,"controller",function(){return fe.instance.gameContext.controller}),i}(),X=function(){function i(){this.expressUrl="res/swfs/",this.loadedArr=[],this._mcMap=new f}var e;n(i,"modules.sddzGame.sddzInerGame.view.playerInfoPart.GiftEff",null,"GiftEff$2");var s=i.prototype;return s.showGiftEff=function(i,e,t){var s=new w;s.load(this.expressUrl+l.giftConfig[t-1].name+".swf",!0);var n=l.giftConfig[t-1].sound,o=parseInt(l.giftConfig[t-1].sounddelay);-1!=this.loadedArr.indexOf(s.basePath)?this.onLoaded(s,i,e,n,o):s.on("loaded",this,this.onLoaded,[s,i,e,n,o])},s.showPockTypeEff=function(i,e){void 0===e&&(e=!1);var t="",s="";switch(i){case 7:t="res/swfs/pokerType/shunzi.swf",this.playAni(t,-650);break;case 8:t="",e?(t="res/swfs/pokerType/feijichibang.swf",s="pockerType/type_feijichibang"):(t="res/swfs/pokerType/feiji.swf",s="pockerType/type_feiji"),this.playAni(t,-260,0,s);break;case 10:t="res/swfs/pokerType/zhadan.swf",this.playAni(t,-260,0,"pockerType/type_zhadan");break;case 11:t="res/swfs/pokerType/huojian.swf",this.playAni(t,-260,0,"pockerType/type_huojian")}},s.playAni=function(i,e,t,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===s&&(s="");var n=new w;n.load(i,!0),-1!=this.loadedArr.indexOf(n.basePath)?this.onLoadedPockTypeMc(n,"",0,e,t):n.on("loaded",this,this.onLoadedPockTypeMc,[n,s,0,e,t])},s.onLoaded=function(i,e,t,s,n){switch(-1==this.loadedArr.indexOf(i.basePath)&&this.loadedArr.push(i.basePath),i.stop(),N.instance.popLayer.addChild(i),e){case 0:i.x=-32,i.y=858;break;case 1:i.x=468,i.y=166;break;case 2:i.x=-32,i.y=166;break;case 3:i.x=-50,i.y=90}var o=0,a=0;switch(t){case 0:o=-32,a=858;break;case 1:o=468,a=166;break;case 2:o=-32,a=166;break;case 3:o=-50,a=90;break;default:o=188,a=-50}G.to(i,{x:o,y:a},400,null,new v(this,this.onCompeteTween,[i,s,n]))},s.onLoadedPockTypeMc=function(i,e,s,n,o){void 0===n&&(n=0),void 0===o&&(o=0),-1==this.loadedArr.indexOf(i.basePath)&&this.loadedArr.push(i.basePath),i.stop(),N.instance.popLayer.addChild(i),i.x=n,i.y=200+o,i.playTo(0,i.count-2,v.create(this,this.playEnd,[i])),t.timer.once(3e3,this,this.playEnd,[i]),0==s?D.playEffect(e):t.timer.once(s,this,this.playSound,[e],!1)},s.onCompeteTween=function(i,e,s){i.playTo(0,i.count-2,v.create(this,this.playEnd,[i])),t.timer.once(3e3,this,this.playEnd,[i]),0==s?D.playEffect(e):t.timer.once(s,this,this.playSound,[e],!1)},s.playSound=function(i){D.playEffect(i)},s.playEnd=function(i){i&&i.removeSelf()},o(1,i,"instance",function(){return null==i._instance&&(i._instance=new i(new e)),i._instance}),i._instance=null,i.__init$=function(){e=function(){function i(){}return n(i,""),i}()},i}(),Z=function(){function i(i){this.needPiao=!0,this.skin=null,this.curPiaoValue=0,this.piaoCheckBoxVec=a(3,null),this.skin=i,this.init()}n(i,"modules.sddzGame.sddzInerGame.view.playerInfoPart.PiaoSelePart",null,"PiaoSelePart$1");var e=i.prototype;return e.init=function(){var i=0,e=this.piaoCheckBoxVec.length;for(i=0;e>i;i++)this.piaoCheckBoxVec[i]=this.skin["piao"+i],this.piaoCheckBoxVec[i].on("click",this,this.onClickCheckBox,[i,i]);this.seleIdx(0),this.hide()},e.onClickCheckBox=function(i,e){var t=e;console.log("onClickCheckBox::"+e),this.seleIdx(t)},e.seleIdx=function(i){var e=0,t=this.piaoCheckBoxVec.length;for(e=0;t>e;e++)this.piaoCheckBoxVec[e].selected=e==i?!0:!1;this.curPiaoValue=i},e.getCurPiaoValue=function(){return this.curPiaoValue},e.reset=function(){this.seleIdx(0),this.needPiao=11==E.roomtype?!0:!1},e.show=function(){this.skin.visible=this.needPiao?!0:!1},e.hide=function(){this.skin.visible=!1},i}(),ie=function(){function i(){this.uid=0,this._skin=null,this._skin=new K,this._skin.giftList.itemRender=Be,this._skin.giftList.spaceX=10,this._skin.giftList.selectEnable=!0,this._skin.giftList.selectHandler=new v(this,this.onSelectRound),this._skin.giftList.renderHandler=new v(this,this.updateRoundItem),this._skin.giftList.dataSource=l.giftConfig,this._skin.giftList.refresh()}var e;n(i,"modules.sddzGame.sddzInerGame.view.playerInfoPart.UserInfoPage",null,"UserInfoPage$2");var t=i.prototype;return t.show=function(i,e,t){this.uid=i,this._skin.idTf.text="ID: "+i,this._skin.nickName.text=fe.instance.gameContext.model.playerByUid(i).nickname,this._skin.diamondTf.text=E.Diamond+"",B.AddCenter(this._skin,N.instance.popLayer);var s=new V;s.loadImage(t,0,0,this._skin.imgPhoto.width,this._skin.imgPhoto.height),this._skin.imgPhoto.addChild(s),this._skin.mouseEnabled=!0,this._skin.clickBg.once("click",this,this.onCloseUserInfo),this._skin.giftList.refresh(),i==E.uid?(this._skin.diamond.visible=!0,this._skin.diamondTf.visible=!0):(this._skin.diamond.visible=!1,this._skin.diamondTf.visible=!1)},t.onCloseUserInfo=function(i){this._skin&&i.target==this._skin.clickBg&&this._skin&&this._skin.removeSelf()},t.hide=function(){this._skin&&this._skin.removeSelf()},t.onSelectRound=function(i){console.log("当前选择的索引："+i)},t.updateRoundItem=function(i){i.setData(i.dataSource,this.uid)},o(1,i,"instance",function(){return null==i._instance&&(i._instance=new i(new e)),i._instance}),i._instance=null,i.__init$=function(){e=function(){function i(){}return n(i,""),i}()},i}(),ee=function(){function i(i,e,t){this.bottom=null,this.right=null,this.left=null,this._PosChairVec=[],this.bottom=new he(i),this.right=new he(e),this.left=new he(t)}n(i,"modules.sddzGame.sddzInerGame.view.pockerPart.ActTipPart");var e=i.prototype;return e.setChairNum=function(i){switch(void 0===i&&(i=3),this._PosChairVec.length=0,i){case 3:this._PosChairVec.push(this.bottom,this.right,this.left)}},e.showActTip=function(i,e){var t=this.model.getChairDirByPos(i);this._PosChairVec[t].showActTip(e)},e.hideActTip=function(i){var e=this.model.getChairDirByPos(i);this._PosChairVec[e].hideAll()},e.hideJiabei=function(){var i=0;for(i=0;i<this._PosChairVec.length;i++)this._PosChairVec[i].hideJiabei()},e.hideAllActTip=function(){var i=0;for(i=0;i<this._PosChairVec.length;i++)this._PosChairVec[i].hideAll()},o(0,e,"model",function(){return fe.instance.gameContext.model}),i}(),te=function(){function i(i){this.skin=null,this.state=-1,this.cardIdx=0,this.skin=i,this.init()}n(i,"modules.sddzGame.sddzInerGame.view.pockerPart.card.BasePocker",null,"BasePocker$1");var e=i.prototype;return e.init=function(){},e.up=function(){0!=this.state&&(this.skin.valueImg.visible=!0,this.skin.backImg.visible=!1,this.state=0)},e.back=function(){1!=this.state&&(this.skin.backImg.visible=!0,this.skin.valueImg.visible=!1,this.state=1)},e.down=function(){2!=this.state&&(this.skin.backImg.visible=!1,this.skin.valueImg.visible=!0,this.state=2)},e.show=function(){this.skin.visible=!0},e.hide=function(){this.skin.visible=!1},e.setCardImg=function(e){this.cardIdx!=e&&(i.CARD_REFERENCE.hasOwnProperty(e.toString())&&(this.skin.valueImg.skin="poker/"+i.CARD_REFERENCE[e.toString()]),this.cardIdx=e)},e.showDizhuImg=function(i){this.skin.dizhuImg.visible=i},e.showMingImg=function(i){this.skin.mingImg.visible=i},e.reset=function(){this.hide(),this.skin.backImg.visible=!1,this.skin.valueImg.visible=!1,this.skin.dizhuImg.visible=!1,this.skin.shadowImg.visible=!1,this.skin.mingImg.visible=!1,this.state=-1,this.select=!1},o(0,e,"visible",function(){return this.skin.visible}),o(0,e,"canControl",null,function(){}),o(0,e,"select",function(){return!1},function(){}),o(0,e,"view",function(){return fe.instance.gameContext.view}),o(0,e,"model",function(){return fe.instance.gameContext.model}),i.getT=function(i){return Math.floor(i/100)},i.getV=function(i){return i%100},i.PAIXING_NON=-1,i.PAIXING_DAN=1,i.PAIXING_DUIZI=2,i.PAIXING_SAN=3,i.PAIXING_SANYI=4,i.PAIXING_SANER=5,i.PAIXING_LIANDUI=6,i.PAIXING_SHUNZI=7,i.PAIXING_FEIJI=8,i.PAIXING_SIDAIER=9,i.PAIXING_ZHADAN=10,i.PAIXING_DUIWANG=11,i.TYPE_WANG=5,i.PREPATH="poker/",i.STATE_UP=0,i.STATE_BACK=1,i.STATE_DOWN=2,s(i,["CARD_REFERENCE",function(){return this.CARD_REFERENCE={551:"xiao_w.png",552:"da_w.png",414:"hong_1.png",416:"hong_2.png",403:"hong_3.png",404:"hong_4.png",405:"hong_5.png",406:"hong_6.png",407:"hong_7.png",408:"hong_8.png",409:"hong_9.png",410:"hong_10.png",411:"hong_j.png",412:"hong_q.png",413:"hong_k.png",314:"fang_1.png",316:"fang_2.png",303:"fang_3.png",304:"fang_4.png",305:"fang_5.png",306:"fang_6.png",307:"fang_7.png",308:"fang_8.png",309:"fang_9.png",310:"fang_10.png",311:"fang_j.png",312:"fang_q.png",313:"fang_k.png",214:"hei_1.png",216:"hei_2.png",203:"hei_3.png",204:"hei_4.png",205:"hei_5.png",206:"hei_6.png",207:"hei_7.png",208:"hei_8.png",209:"hei_9.png",210:"hei_10.png",211:"hei_j.png",212:"hei_q.png",213:"hei_k.png",114:"mei_1.png",116:"mei_2.png",103:"mei_3.png",104:"mei_4.png",105:"mei_5.png",106:"mei_6.png",107:"mei_7.png",108:"mei_8.png",109:"mei_9.png",110:"mei_10.png",111:"mei_j.png",112:"mei_q.png",113:"mei_k.png"}}]),i}(),se=function(){function i(i){this._curHandPos=-1,this._skin=null,this._left=null,this._bottom=null,this._right=null,this._clockTf=null,this._leftTime=0,this._PosChairVec=[],this._skin=i,this.init()}n(i,"modules.sddzGame.sddzInerGame.view.pockerPart.ClockPart",null,"ClockPart$1");var e=i.prototype;return e.init=function(){this._bottom=this._skin.pos0,this._right=this._skin.pos1,this._left=this._skin.pos2,this._clockTf=this._skin.cutdownTf,this.allReset()},e.allReset=function(){this._bottom.visible=!1,this._right.visible=!1,this._left.visible=!1,this._clockTf.text="00"},e.setChairNum=function(i){switch(void 0===i&&(i=3),this._PosChairVec.length=0,i){case 3:this._PosChairVec.push(this._bottom,this._right,this._left)}this.reset()},e.noticeShowClock=function(i,e){this._skin.visible=!0,this._curHandPos=i,this.model.curHandlePos=i,this._leftTime=e,this._clockTf.text=this._leftTime<10?"0"+this._leftTime:this._leftTime+"",M.instance.timer.clear(this,this.onTime),M.instance.timer.loop(1e3,this,this.onTime),this.showDir(this.model.getChairDirByPos(i))},e.showDir=function(i){var e=0,t=this._PosChairVec.length;for(e=0;t>e;e++)this._PosChairVec[e].visible=e==i?!0:!1},e.onTime=function(){return 0==y.CurGameModule.inGame||0==this.model.isGameStart?(this._leftTime=0,this._clockTf.text=this._leftTime<10?"0"+this._leftTime:this._leftTime+"",M.instance.timer.clear(this,this.onTime),void 0):(this._leftTime-=1,this._leftTime<0&&(this._leftTime=10),this._clockTf.text=this._leftTime<10?"0"+this._leftTime:this._leftTime+"",this._leftTime<5,void 0)},e.reset=function(){this._skin.visible=!1;var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].visible=!1;this._clockTf.text="00"},e.showjiabei=function(i){this._skin.visible=!0;var e=0,t=this._PosChairVec.length;for(e=0;t>e;e++)this._PosChairVec[e].visible=!1;this._leftTime=i,this._clockTf.text=this._leftTime<10?"0"+this._leftTime:this._leftTime+"",M.instance.timer.clear(this,this.onTime),M.instance.timer.loop(1e3,this,this.onTime)},o(0,e,"model",function(){return fe.instance.gameContext.model}),i}(),ne=function(){function i(i){this._skin=null,this._pockers=a(3,null),this._skin=i,this.init()}n(i,"modules.sddzGame.sddzInerGame.view.pockerPart.DipaiPart");var e=i.prototype;return e.init=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i]=new ve(this._skin["card"+i])},e.showBack=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].back(),this._pockers[i].show()},e.showCards=function(i){var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].setCardImg(i[e]),this._pockers[e].down(),this._pockers[e].show()},e.reset=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].reset()},i}(),oe=function(){function i(i){this.singleBtnW=183,this.gap=20,this._skin=null,this.state=-1,this._skin=i,this.init()}n(i,"modules.sddzGame.sddzInerGame.view.pockerPart.HandleBtnsPart",null,"HandleBtnsPart$2");var e=i.prototype;return e.init=function(){this.addListener()},e.showJiaodizhu=function(){if(0!=this.model.isSelfSitDown){this._skin.jiaogqiangBox.visible=!1,this._skin.jiaofenBox.visible=!0,this._skin.jiabeiBox.visible=!1,this._skin.ctlBox.visible=!1;var i=0;this._skin.fen0Btn.visible=!0,i+=1,this._skin.fen1Btn.visible=0==this.model.difen,this._skin.fen1Btn.visible&&(this._skin.fen1Btn.x=(this.singleBtnW+this.gap)*i,i+=1),this._skin.fen2Btn.visible=this.model.difen<=1,this._skin.fen2Btn.visible&&(this._skin.fen2Btn.x=(this.singleBtnW+this.gap)*i,i+=1),this._skin.fen3Btn.visible=this.model.difen<=2,this._skin.fen3Btn.visible&&(this._skin.fen3Btn.x=(this.singleBtnW+this.gap)*i,i+=1),this._skin.jiaofenBox.x=(this.singleBtnW+this.gap)*(4-i)/2,l.autoPlay&&t.timer.once(80,this,this.onClickFenBtn,[3])}},e.showjiabei=function(){if(0!=this.model.isSelfSitDown){this._skin.jiaogqiangBox.visible=!1,this._skin.jiaofenBox.visible=!1,this._skin.jiabeiBox.visible=!0,this._skin.ctlBox.visible=!1;var i=0;this._skin.jiabeiBtn.visible=!0,i+=1,this._skin.bujiaBtn.visible=!0,this._skin.bujiaBtn.x=(this.singleBtnW+this.gap)*i,i+=1,this._skin.jiabeiBox.x=(this.singleBtnW+this.gap)*(4-i)/2,l.autoPlay&&t.timer.once(80,this,this.onClickJiaBtn,[!1])}},e.showCtlBtns=function(){var i=this;if(0!=this.model.isSelfSitDown){this._skin.jiaogqiangBox.visible=!1,this._skin.jiaofenBox.visible=!1,this._skin.jiabeiBox.visible=!1,this._skin.ctlBox.visible=!0;var e=0;if(this._skin.mingpaiBtn.visible=!1,-1==this.model.curOutputPos&&this.model.dizhuPos==this.model.selfChairPos&&0==this.model.mingpaiVec[this.model.selfChairPos]&&(this._skin.mingpaiBtn.visible=!0,e+=1),this._skin.buchuBtn.visible=!1,this._skin.tishiBtn.visible=!1,this._skin.chupaiBtn.visible=!1,this._skin.buqiBtn.visible=!1,-1!=this.model.curOutputPos&&this.model.curOutputPos!=this.model.selfChairPos){var s=L.getBigThan(this.model.handleCards[this.model.selfChairPos],this.model.curOutputCards);s.length>0?(this._skin.buchuBtn.visible=!0,this._skin.buchuBtn.x=(this.singleBtnW+this.gap)*e,e+=1,this._skin.tishiBtn.visible=!0,this._skin.tishiBtn.x=(this.singleBtnW+this.gap)*e,e+=1,this._skin.chupaiBtn.visible=!0,this._skin.chupaiBtn.x=(this.singleBtnW+this.gap)*e,e+=1,l.autoPlay&&(t.timer.once(80,null,function(e){var t=L.getPaixing(e),s={Sid:E.SID,Type:t,Cards:e};i.controller.sendMsgCommond(I.getProtoMessage(1203,s))},[s]),this.reset())):(this._skin.buqiBtn.visible=!0,this._skin.buqiBtn.x=(this.singleBtnW+this.gap)*e,e+=1,l.autoPlay&&this._skin.buqiBtn.visible&&this.onClickBuchuBtn())}else if(this._skin.chupaiBtn.visible=!0,this._skin.chupaiBtn.x=(this.singleBtnW+this.gap)*e,e+=1,l.autoPlay){var n=this.model.handleCards[this.model.selfChairPos][0];t.timer.once(80,null,function(e){var t=1,s={Sid:E.SID,Type:t,Cards:[e]};i.controller.sendMsgCommond(I.getProtoMessage(1203,s))},[n]),this.reset()}this._skin.ctlBox.x=(this.singleBtnW+this.gap)*(4-e)/2}},e.addListener=function(){this._skin.fen0Btn.on("click",this,this.onClickFenBtn,[0]),this._skin.fen1Btn.on("click",this,this.onClickFenBtn,[1]),this._skin.fen2Btn.on("click",this,this.onClickFenBtn,[2]),this._skin.fen3Btn.on("click",this,this.onClickFenBtn,[3]),this._skin.jiabeiBtn.on("click",this,this.onClickJiaBtn,[!0]),this._skin.bujiaBtn.on("click",this,this.onClickJiaBtn,[!1]),this._skin.mingpaiBtn.on("click",this,this.onClickMingBtn),this._skin.buchuBtn.on("click",this,this.onClickBuchuBtn),this._skin.tishiBtn.on("click",this,this.onClickTishiBtn),this._skin.chupaiBtn.on("click",this,this.onClickChupaiBtn),this._skin.buqiBtn.on("click",this,this.onClickBuchuBtn)},e.onClickFenBtn=function(i){var e={Sid:E.SID,Fen:i};this.controller.sendMsgCommond(I.getProtoMessage(1200,e)),this.reset()},e.onClickJiaBtn=function(i){var e={Sid:E.SID,Jiabei:i};this.controller.sendMsgCommond(I.getProtoMessage(1202,e)),this.reset()},e.onClickMingBtn=function(){var i={Sid:E.SID};this.controller.sendMsgCommond(I.getProtoMessage(1201,i)),this._skin.mingpaiBtn.visible=!1},e.onClickBuchuBtn=function(){var i={Sid:E.SID};this.controller.sendMsgCommond(I.getProtoMessage(1204,i)),this.view.sddzPage.handlePart.setSelfPockSele([]),this.reset()},e.onClickTishiBtn=function(i){i.stopPropagation();var e=L.getBigThan(this.model.handleCards[this.model.selfChairPos],this.model.curOutputCards);e.length>0&&this.view.sddzPage.handlePart.setSelfPockSele(e)},e.onClickChupaiBtn=function(){var i=this.view.sddzPage.handlePart.getSelfSelePockers();0==i.length&&(D.playEffect("audio_warning"),B.popMessage("你的出牌不能为空"));var e=L.getPaixing(i);if(e==te.PAIXING_NON)return D.playEffect("audio_warning"),B.popMessage("你的牌型不合法"),void 0;var t;if(0==this.model.curOutputCards.length||this.model.curOutputPos==this.model.selfChairPos)t={Sid:E.SID,Type:e,Cards:i},this.controller.sendMsgCommond(I.getProtoMessage(1203,t)),this.reset();else{var s=L.getBigThan(i,this.model.curOutputCards);11==e||10==e?s.length>0&&(t={Sid:E.SID,Type:e,Cards:i},this.controller.sendMsgCommond(I.getProtoMessage(1203,t)),this.reset()):s.length==i.length?(t={Sid:E.SID,Type:e,Cards:i},this.controller.sendMsgCommond(I.getProtoMessage(1203,t)),this.reset()):(D.playEffect("audio_warning"),B.popMessage("你的出牌不能大于当前牌"))}},e.show=function(){this._skin.visible=!0},e.hide=function(){this._skin.visible=!1},e.reset=function(){this._skin.jiaogqiangBox.visible=!1,this._skin.jiaofenBox.visible=!1,this._skin.jiabeiBox.visible=!1,this._skin.ctlBox.visible=!1},o(0,e,"controller",function(){return fe.instance.gameContext.controller}),o(0,e,"visible",function(){return this._skin.visible}),o(0,e,"model",function(){return fe.instance.gameContext.model}),o(0,e,"view",function(){return fe.instance.gameContext.view}),i}(),ae=function(){function i(i,e,t){this._bottom=null,this._right=null,this._left=null,this._PosChairVec=[],this._bottom=new Pe(i),this._right=new ke(e),this._left=new ke(t),this.allReset()}n(i,"modules.sddzGame.sddzInerGame.view.pockerPart.HandlePart",null,"HandlePart$2");var e=i.prototype;return e.allReset=function(){this._bottom.reset(),this._right.reset(),this._left.reset()},e.setChairNum=function(i){switch(void 0===i&&(i=3),this._PosChairVec.length=0,i){case 3:this._PosChairVec.push(this._bottom,this._right,this._left)}this.reset()},e.updateAllCards=function(i){var e=0,t=i.length;for(e=0;t>e;e++){var s=this.model.getChairDirByPos(e);this._PosChairVec[s].showCards(i[e],s)}},e.updateOnePosAllCards=function(i,e){console.log("pos ::"+i);var t=this.model.getChairDirByPos(i);console.log("dir ::"+t),console.log("_PosChairVec[dir] ::"+this._PosChairVec[t]),this._PosChairVec[t].showCards(e,t)},e.setSelfPockSele=function(i){var e=this.model.getChairDirByPos(this.model.selfChairPos);this._PosChairVec[e].seleCards=i},e.getSelfSelePockers=function(){var i=this.model.getChairDirByPos(this.model.selfChairPos);return this._PosChairVec[i].seleCards},e.reset=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].reset();this.canControl(this.model.selfChairPos,!1)},e.canControl=function(i,e){this._PosChairVec[this.model.getChairDirByPos(i)].canControl=e},o(0,e,"model",function(){return fe.instance.gameContext.model}),i}(),re=function(){function i(i,e,t){this._bottom=null,this._right=null,this._left=null,this._PosChairVec=[],this._bottom=new ye(i),this._right=new be(e),this._left=new we(t),this.allReset()}n(i,"modules.sddzGame.sddzInerGame.view.pockerPart.OutputPart",null,"OutputPart$1");var e=i.prototype;return e.allReset=function(){this._bottom.reset(),this._right.reset(),this._left.reset()},e.setChairNum=function(i){switch(void 0===i&&(i=3),this._PosChairVec.length=0,i){case 3:this._PosChairVec.push(this._bottom,this._right,this._left)}},e.showCards=function(i,e){if(0!=i.length){var t=this.model.getChairDirByPos(e),s=0,n=this._PosChairVec.length;for(s=0;n>s;s++)s==t&&this._PosChairVec[s].showCards(i)}},e.hideCards=function(i){var e=this.model.getChairDirByPos(i),t=0,s=this._PosChairVec.length;for(t=0;s>t;t++)t==e&&this._PosChairVec[t].hide()},e.reset=function(){var i=0,e=this._PosChairVec.length;for(i=0;e>i;i++)this._PosChairVec[i].reset()},o(0,e,"model",function(){return fe.instance.gameContext.model}),i}(),he=function(){function i(i){this._skin=null,this._skin=i,this.init()}n(i,"modules.sddzGame.sddzInerGame.view.pockerPart.singlePart.BaseActTipItem");var e=i.prototype;return e.init=function(){this.reset()},e.showActTip=function(i){switch(this.hideAll(),i){case 0:this._skin.bujiao.visible=!0;break;case 1:this._skin.fen1.visible=!0;break;case 2:this._skin.fen2.visible=!0;break;case 3:this._skin.fen3.visible=!0;break;case 4:this._skin.jiaodizhu.visible=!0;break;case 5:this._skin.buqiang.visible=!0;break;case 6:this._skin.qiangdizhu.visible=!0;break;case 7:this._skin.jiabei.visible=!0;break;case 8:this._skin.bujiabei.visible=!0;break;case 9:this._skin.buchu.visible=!0}},e.hideAll=function(){this.reset()},e.hideJiabei=function(){this._skin.jiabei.visible=!1,this._skin.bujiabei.visible=!1},e.reset=function(){this._skin.bujiao.visible=!1,this._skin.fen1.visible=!1,this._skin.fen2.visible=!1,this._skin.fen3.visible=!1,this._skin.jiaodizhu.visible=!1,this._skin.buqiang.visible=!1,this._skin.qiangdizhu.visible=!1,this._skin.jiabei.visible=!1,this._skin.bujiabei.visible=!1,this._skin.buchu.visible=!1},e.show=function(){this._skin.visible=!0},e.hide=function(){this._skin.visible=!1},e.showEff=function(){},i.ACTTIP_BUJIAO=0,i.ACTTIP_FEN1=1,i.ACTTIP_FEN2=2,i.ACTTIP_FEN3=3,i.ACTTIP_JIAODIZHU=4,i.ACTTIP_BUQIANG=5,i.ACTTIP_QIANGDIZHU=6,i.ACTTIP_JIABEI=7,i.ACTTIP_BUJIABEI=8,i.ACTTIP_BUCHU=9,i}(),le=function(){function i(i){this.state=0,this.skin=null,this._pockers=a(20,null),this.skin=i,this.init()}n(i,"modules.sddzGame.sddzInerGame.view.pockerPart.singlePart.handlePart.BaseSingleHandlePart",null,"BaseSingleHandlePart$2");var e=i.prototype;return e.init=function(){},e.updateState=function(i){this.state=1==i?1:0},e.showCards=function(){},e.up=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].up()},e.back=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].back()},e.down=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].down()},e.hideAll=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].hide()},e.playQipaiEff=function(){var i=0,e=this._pockers.length;for(i=0;e>i;i++)this._pockers[i].skin.alpha=0,t.timer.frameOnce(i,this,this.onSingleQiEff,[i],!1)},e.onSingleQiEff=function(i){G.to(this._pockers[i].skin,{alpha:1},100)},e.reset=function(){var i=0,e=this._pockers.length;for(i=0;e>i;i++)this._pockers[i].reset()},e.show=function(){this.skin.visible=!0},e.hide=function(){this.skin.visible=!1},o(0,e,"canControl",null,function(i){var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].canControl=i}),o(0,e,"visible",function(){return this.skin.visible}),o(0,e,"seleCards",function(){return null},function(){}),o(0,e,"model",function(){return fe.instance.gameContext.model}),i.STATE_NOMAL=0,i.STATE_MINGPAI=1,i}(),de=function(){function i(i){this.skin=null,this.firstList=[],this.secondList=[],this._pockers=a(20,null),this.skin=i,this.init()}n(i,"modules.sddzGame.sddzInerGame.view.pockerPart.singlePart.outputPart.BaseSingleOutputPart",null,"BaseSingleOutputPart$1");var e=i.prototype;return e.init=function(){var i=0,e=this._pockers.length;for(i=0;e>i;i++)this._pockers[i]=new te(this.skin["card"+i]);this.hide()},e.showCards=function(){},e.show=function(){this.skin.visible=!0},e.hide=function(){this.skin.visible=!1},e.hideAll=function(){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].hide()},e.reset=function(){this.hide();var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].reset(),this._pockers[i].down()},o(0,e,"visible",function(){return this.skin.visible}),o(0,e,"model",function(){return fe.instance.gameContext.model}),i}(),ce=function(){function i(i){this._skin=null,this.handlePart=null,this.outputPart=null,this.handleBtns=null,this.dipaiPart=null,this.clockPart=null,this.actTipPart=null,i&&(this._skin=i,this._skin.mouseThrough=!0,this.handlePart=new ae(this._skin.handlePart0,this._skin.handlePart1,this._skin.handlePart2),this.outputPart=new re(this._skin.outputPart0,this._skin.outputPart1,this._skin.outputPart2),this.handleBtns=new oe(this._skin.ctlPart),this.dipaiPart=new ne(this._skin.dipaiPart),this.clockPart=new se(this._skin.clockPart),this.actTipPart=new ee(this._skin.actTip0,this._skin.actTip1,this._skin.actTip2))}n(i,"modules.sddzGame.sddzInerGame.view.SddzPage");var e=i.prototype;return e.setChairNum=function(i){void 0===i&&(i=3),i=3,this.handlePart.setChairNum(i),this.outputPart.setChairNum(i),this.clockPart.setChairNum(i),this.actTipPart.setChairNum(i)},e.reset=function(){this.handlePart.reset(),this.outputPart.reset(),this.handleBtns.reset(),this.clockPart.reset(),this.dipaiPart.reset(),this.actTipPart.hideAllActTip()},o(0,e,"skin",function(){return this._skin}),i}(),ue=function(){function i(i){this._skin=null,this._PowerBarOrignalW=0/0,this._infosimbol=null,this._skin=i,this._infosimbol=this._skin.infoSImg,this._infosimbol.visible=!1,i.mouseThrough=!0,this._skin.scoreList.on("click",this,this.onClickScoreListBtn),this._skin.infoListBtn.on("click",this,this.onClickInfoListBtn),this._skin.helpBtn.on("click",this,this.onClickHelpBtn),this._skin.setBtn.on("click",this,this.onClickSetBtn),g.instance.on("COMMON_INFOLIST_NOTICE",this,this.onGotInfo)}n(i,"modules.sddzGame.sddzInerGame.view.TableInfoPage",null,"TableInfoPage$2");var e=i.prototype;return e.onClickHelpBtn=function(){u.instance.commonContext.view.vgameHelpView.show()},e.playVoicePlay=function(){t.timer.frameLoop(1,this,this.onTimeLoop)},e.onTimeLoop=function(){this._skin.voicePlay.rotation%360==0&&(this._skin.voicePlay.rotation=0),this._skin.voicePlay.rotation+=10},e.stopVoicePlay=function(){t.timer.clear(this,this.onTimeLoop)},e.updateRoomId=function(){Number(this._skin.roomNumTf.text)!=E.roomid&&(this._skin.roomNumTf.text=""+E.roomid)},e.updateDifen=function(){this._skin.difenTf.text=""+this.model.difen},e.updateBeishu=function(){this._skin.beishuTf.text=""+this.model.beishu},e.onClickSetBtn=function(){u.instance.commonContext.view.settingView.showOrHide()},e.onClickScoreListBtn=function(i){var e={uniqueCode:E.uniqueCode};console.log(E.roomid),g.instance.event("SOCKET_SEND",I.getProtoMessage(404,e)),D.instance.playClickBtnSound(),u.instance.commonContext.view.timeWarView.showOrHide(),i.stopPropagation()},e.onClickInfoListBtn=function(i){this._infosimbol.visible=!1,D.instance.playClickBtnSound(),u.instance.commonContext.view.infoListView.showOrHide(),i.stopPropagation()
},e.onGotInfo=function(){this._infosimbol.visible=!0},e.updateLeftRound=function(i){void 0===i&&(i=!0);var e=this.model.sddzMsgs.ACK_RoomInfo,t=e.Rule,s=l.getRule(t[1]);0==s.type&&(e.totalRound=s.value,this._skin.roundCountTf.text=e.RoundCount+1>s.value?""+e.RoundCount+"/"+s.value:""+(e.RoundCount+1)+"/"+s.value),1==this.model.isGameStart||e.RoundCount>=1?this._skin.weikaishiBox.visible=!1:(E.leftDissolveTime=e.disbandLeftTime,this._skin.leftDissolveTf.text=l.getTFmt(E.leftDissolveTime,!0),this._skin.weikaishiBox.visible=!0,this.startDissolveCutdown())},e.updateKaijuren=function(i){(null==i||""==i)&&(i="无"),this._skin.kaijuTf.text="开局人："+i},e.startDissolveCutdown=function(){g.instance.on("ON_LITTLETIMEER",this,this.onCutDown1)},e.stopDissolveCutdown=function(){g.instance.off("ON_LITTLETIMEER",this,this.onCutDown1)},e.onCutDown1=function(i){E.leftDissolveTime-=i,E.leftDissolveTime<0&&(E.leftDissolveTime=0,this.stopDissolveCutdown()),this._skin.leftDissolveTf.text=l.getTFmt(E.leftDissolveTime,!0)},e.reset=function(){},o(0,e,"model",function(){return fe.instance.gameContext.model}),i}(),fe=function(i){function e(){if(this.needResize=!1,this._main=null,this._sddzGameContext=null,this._mainContext=null,e.__super.call(this),null!=e._instance)throw new x(this);e._instance=this}n(e,"modules.sddzGame.SDdzGameModule",i);var t=e.prototype;return t.startup=function(){null==this._mainContext&&(this._mainContext=new m("sddzGameMainmain",this),this._main=new Se("sddzGameMain",this,this._mainContext),this._sddzGameContext=new ze("sddzGame",this,this._main)),this.switchState(this._mainContext)},t.stopGame=function(i,t){void 0===i&&(i=!0),void 0===t&&(t=!1),t&&this._sddzGameContext.controller.clear(),e.inGame=!1,e.isSettlement=!1,this.switchState(this._mainContext),i&&C.instance.gotoHall()},t.startGame=function(){d.window.document.title=l.nameTitle+"三人斗地主",1!=e.inGame&&(C.instance.goEmpty(),e.inGame=!0,u.instance.gotoCommonContext(),S.gameName="三人斗地主",this.switchState(this.gameContext),O.onMenuShareTimeline(E.nickname+"-"+l.nameTitle+"三人斗地主("+l.costRule[E.roomtype+""][E.Rule[3]]+")【房间号："+E.roomid+"】",E.roomid+"--"+E.uniqueCode),O.onMenuShareAppMessage(E.nickname+"-"+l.nameTitle+"三人斗地主("+l.costRule[E.roomtype+""][E.Rule[3]]+")【房间号："+E.roomid+"】","房主创建了三人斗地主 【房间号:"+E.roomid+"】"+l.getRule(E.Rule[1]).desc,E.roomid+"--"+E.uniqueCode),console.log("startSddzGame..........."))},o(0,t,"main",function(){return this._main}),o(0,t,"gameContext",function(){return this._sddzGameContext}),o(1,e,"instance",function(){return null==e._instance&&(e._instance=new e),e._instance},rb.framework.mvc.Module._$SET_instance),e.inGame=!1,e.isPauseGameQueue=!1,e.isSettlement=!1,e._instance=null,e}(k),ge=function(i){function e(){e.__super.call(this)}n(e,"modules.sddzGame.controller.SDdzGameSocketController",i);var t=e.prototype;return t.onAdd=function(){E.isReplay||g.instance.on("MESSAGE_GAME",this,this.onMsg)},t.onRemove=function(){E.isReplay||g.instance.off("MESSAGE_GAME",this,this.onMsg)},t.onMsg=function(i){1!=fe.isPauseGameQueue&&this.procMsg(i)},t.procMsg=function(i){i instanceof net.Message&&i.complete(),console.log("acc msgId::"+i.messageId);var e;switch(i.messageId){case 560:e=E.isReplay?i.body:l.proto.ACKBC_Into_Room.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Into_Room(e);break;case 607:e=E.isReplay?i.body:l.proto.ACKBC_Sitdown.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Sitdown(e);break;case 608:e=E.isReplay?i.body:l.proto.ACKBC_Standup.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Standup(e);break;case 520:e=E.isReplay?i.body:l.proto.ACK_RoomInfo.decode(i.params[0]),fe.instance.gameContext.controller.ACK_RoomInfo(e);break;case 525:e=E.isReplay?i.body:l.proto.ACK_Room_User.decode(i.params[0]),fe.instance.gameContext.controller.ACK_Room_User(e);break;case 1506:e=E.isReplay?i.body:l.proto.ACKBC_Sddz_Start.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Sddz_Start(e);break;case 615:e=E.isReplay?i.body:l.proto.ACK_User_SeatCard.decode(i.params[0]),fe.instance.gameContext.controller.ACK_User_SeatCard(e);break;case 1508:e=E.isReplay?i.body:l.proto.ACKBC_Sddz_JiaoDizhu.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Sddz_JiaoDizhu(e);break;case 1509:e=E.isReplay?i.body:l.proto.ACKBC_Sddz_Mingpai.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Sddz_Mingpai(e);break;case 1510:e=E.isReplay?i.body:l.proto.ACKBC_Sddz_Jiabei.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Sddz_Jiabei(e);break;case 700:e=E.isReplay?i.body:l.proto.ACKBC_CurPlayer.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_CurPlayer(e);break;case 1500:E.isReplay||(e=l.proto.ACKBC_Sddz_Jiaofen.decode(i.params[0])),fe.instance.gameContext.controller.ACKBC_Sddz_Jiaofen(e);break;case 1501:E.isReplay||(e=l.proto.ACKBC_Sddz_Dizhu.decode(i.params[0])),fe.instance.gameContext.controller.ACKBC_Sddz_Dizhu(e);break;case 1507:if(E.isReplay){e={};{i.body}}else e=l.proto.ACKBC_Sddz_Chupai.decode(i.params[0]);fe.instance.gameContext.controller.ACKBC_Sddz_Chupai(e);break;case 600:e=E.isReplay?i.body:l.proto.ACKBC_Ready.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Ready(e);break;case 580:e=E.isReplay?i.body:l.proto.ACKBC_Exit_Room.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Exit_Room(e);break;case 900:e=E.isReplay?i.body:l.proto.NotifyStartGame.decode(i.params[0]),fe.instance.gameContext.controller.NotifyStartGame(e);break;case 880:e=E.isReplay?i.body:l.proto.ACKBC_SendMsg.decode(i.params[0]),fe.instance.gameContext.view.onRecChat(e);break;case 1503:e=E.isReplay?i.body:l.proto.ACKBC_Sddz_End.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Sddz_End(e);break;case 1505:e=E.isReplay?i.body:l.proto.ACKBC_Sddz_Card_Init.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Sddz_Card_Init(e);break;case 1504:e=E.isReplay?i.body:l.proto.ACKBC_Sddz_Total.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Sddz_Total(e);break;case 920:e=E.isReplay?i.body:l.proto.TotalSummary.decode(i.params[0]),fe.instance.gameContext.controller.NOTIFY_Summary(e);break;case 800:e=E.isReplay?i.body:l.proto.AckDisband.decode(i.params[0]),fe.instance.gameContext.controller.AckDisband(e);break;case 940:e=E.isReplay?i.body:l.proto.NotifyDisband.decode(i.params[0]),fe.instance.gameContext.controller.NotifyDisband(e);break;case 960:e=E.isReplay?i.body:l.proto.NotifyUserState.decode(i.params[0]),fe.instance.gameContext.controller.NotifyUserState(e);break;case 972:e=E.isReplay?i.body:l.proto.NotifyDestoryRoom.decode(i.params[0]),fe.instance.gameContext.controller.NotifyDestoryRoom(e);break;case 971:e=E.isReplay?i.body:l.proto.NotifyKick.decode(i.params[0]),fe.instance.gameContext.controller.NotifyKick(e);break;case 980:e=E.isReplay?i.body:l.proto.KickResponse.decode(i.params[0]),fe.instance.gameContext.controller.KickResponse(e);break;case 1e3:e=E.isReplay?i.body:l.proto.MSG_ACK_Gift.decode(i.params[0]),fe.instance.gameContext.controller.MSG_ACK_Gift(e);break;case 1502:E.isReplay?(e=i.body,console.log("Message.Pass",e)):e=l.proto.ACKBC_Sddz_Pass.decode(i.params[0]),fe.instance.gameContext.controller.ACKBC_Sddz_Pass(e);break;case"":break;case"":}E.isReplay},e}(r),me=function(i){function e(){this.pop=null,this.dissolvePage=null,e.__super.call(this),this.setType(2)}n(e,"modules.sddzGame.sddzInerGame.controller.SddzGameController",i);var s=e.prototype;return s.onAdd=function(){i.prototype.onAdd.call(this)},s.onRemove=function(){i.prototype.onRemove.call(this)},s.discard=function(){},s.ACK_RoomInfo=function(i){console.log("ACK_Room_Info",i,"ACK_Room_Info"),this.model.sddzMsgs.ACK_RoomInfo=i,this.model.roomOwnerUid=i.RoomOwner,E.uniqueCode=i.uniqueCode,E.roomtype=i.Type,E.Rule=i.Rule,E.isReplay&&(E.roomid=i.RID),console.log(E.uniqueCode),1==i.gameState&&(this.model.isGameStart=!0,this.view.playerInfoPage.hideBtnsByGameStart(),this.view.playerInfoPage.hideReadySimbol()),this.view.playerInfoPage.updateLeaveDisbandBtns(),E.isReplay&&(this.model.sddzMsgs.ACK_RoomInfo.isGameStart=1),this.view.tableInfoPage.updateLeftRound(),this.view.tableInfoPage.updateKaijuren(i.nickName),i.direction||(i.direction=0),this.view.tableInfoPage.updateRoomId(),this.view.tableInfoPage.updateDifen(),this.view.tableInfoPage.updateBeishu()},s.ACK_Room_User=function(i){if(console.log("ACK_Room_User",i,"ACK_Room_User"),this.model.sddzMsgs.ACK_Room_User=i,this.model.updatePlayerInfoVec(i.Users),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),0==this.model.isSelfSitDown&&0==this.model.isGameStart)for(var e=0;e<this.model.chairNum;e++)if(null==this.model.playerByPos(e)){var t={sid:E.SID,index:e};this.sendMsgCommond(I.getProtoMessage(195,t));break}},s.ACKBC_Into_Room=function(i){console.log("ACKBC_Into_Room"),console.log(i),console.log("ACKBC_Into_Room"),this.model.sddzMsgs.ACKBC_Into_Room=i,E.roomid=i.RID,this.view.tableInfoPage.updateRoomId(),i.nickname=i.Name,i.uid=i.UID,i.ip=i.IP,i.pos=i.Index,i.golds=i.Coin,this.model.updateOnePlayerInfo(i),this.view.playerInfoPage.updateOnePlayerInfo(i),this.view.playerInfoPage.updateSitDownUpBtn(),g.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+i.nickname+"]进入了房间！"})},s.ACKBC_Sitdown=function(i){if(this._actived){if(console.log("MSG_ACKBC_Sitdown",i),this.model.sddzMsgs.ACKBC_Sitdown=i,this.model.sitDown(i.uid,i.index,i.score),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.updateSitDownUpBtn(),this.view.tableInfoPage.updateKaijuren(i.nickName),i.uid==E.selfuid){var e={sid:E.SID};this.sendMsgCommond(I.getProtoMessage(210,e)),g.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+this.model.getPlayerNicknameByUid(i.uid)+"]坐下了"+i.index+"号座位！"})}this.view.calculatePage.perPage&&this.view.calculatePage.perPage.updateBtns()}},s.ACKBC_Standup=function(i){this._actived&&(console.log("MSG_ACKBC_Standup",i),this.model.sddzMsgs.ACKBC_Standup=i,this.model.standup(i.uid,i.index),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.updateSitDownUpBtn(),this.view.playerInfoPage.updateStartBtn(),this.view.tableInfoPage.updateKaijuren(i.nickName),this.view.calculatePage.perPage&&this.view.calculatePage.perPage.updateBtns(),g.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+this.model.getPlayerNicknameByUid(i.uid)+"]站起了！"}))},s.ACKBC_Ready=function(i){if(this.actived){if(console.log("ACKBC_Ready"),console.log(i),console.log("ACKBC_Ready"),1==this.model.isGameStart)return;D.instance.playReadySound(),this.model.sddzMsgs.ACKBC_Ready=i,i.uid=i.UID,i.pos=this.model.getPlayerPosByUid(i.uid),this.model.updateReadyState(i.pos,!0,0),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec,!1),i.pos==this.model.selfChairPos&&(this.view.playerInfoPage.hideReadyBtn(),this.view.playerInfoPage.hideDizhuNM(),console.log("ready.........."),this.view.calculatePage.reset(),this.view.calculatePage.reset(),this.model.reset(),this.view.sddzPage.reset())}},s.NotifyStartGame=function(i){this.actived&&(console.log("NotifyStartGame::"+i+"NotifyStartGame"),this.model.sddzMsgs.NotifyStartGame=i,i.uid==E.selfuid&&this.view.playerInfoPage.showStartBtn())},s.ACKBC_Sddz_Start=function(i){this.actived&&(console.log("ACKBC_Sddz_Start",i,"ACKBC_Sddz_Start"),this.model.sddzMsgs.ACKBC_Sddz_Start=i,this.model.sddzMsgs.ACK_RoomInfo.RoundCount=i.RoundCount,this.resetSelf(),this.model.isGameStart=!0,this.view.startGame(),this.view.playerInfoPage.hideReadySimbol(),this.view.playerInfoPage.hideBtnsByGameStart(),this.view.playerInfoPage.updateLeaveDisbandBtns(),this.view.tableInfoPage.updateRoomId(),this.view.tableInfoPage.updateLeftRound(),this.view.tableInfoPage.updateDifen())},s.ACK_User_SeatCard=function(i){if(this.actived){this.model.isClientPrePop=!1,console.log("ACK_User_SeatCard",i,"ACK_User_SeatCard"),console.log(this.model.sddzMsgs.ACKBC_Sddz_Start,"----------------------------------"),this.model.sddzMsgs.ACK_User_SeatCard=i,this.model.resetCard(),this.view.sddzPage.handlePart.reset(),this.view.sddzPage.outputPart.reset();var e=0,t=0,s=0,n=[];for(e=0;e<i.Cards.length;e++){if(i.Cards[e].List.length!=i.Cards[e].ListLen)for(s=0;s<i.Cards[e].ListLen;s++)i.Cards[e].List.push({CID:0});for(n.length=0,t=0;t<i.Cards[e].List.length;t++)n.push(i.Cards[e].List[t].CID);if(this.model.updateHandleCards(e,n),this.view.sddzPage.handlePart.updateOnePosAllCards(e,this.model.handleCards[e]),i.Cards[e].Out)for(t=0;t<i.Cards[e].Out.length;t++)this.model.outputCards[e].push(i.Cards[e].Out[t].CID)}this.view.sddzPage.dipaiPart.showBack()}},s.ACKBC_Sddz_Card_Init=function(i){if(this.actived){console.log("ACKBC_Sddz_Card_Init",i,"ACKBC_Sddz_Card_Init"),this.model.sddzMsgs.ACKBC_Sddz_Card_Init=i,this.model.stage=i.Stage,this.model.difen=i.Difen,this.model.beishu=i.Beishu,this.view.tableInfoPage.updateBeishu(),this.view.tableInfoPage.updateDifen();var e=0;for(e=0;e<this.model.chairNum;e++)1==this.model.stage?1==i.HaveJiao[e]&&this.view.sddzPage.actTipPart.showActTip(e,i.JiaoFen[e]):(this.model.jiabeiVec[e]=i.IsJiabei[e],this.model.mingpaiVec[e]=i.IsMing[e],2==this.model.stage?1==i.HaveJiabei[e]?1==i.IsJiabei[e]?this.view.sddzPage.actTipPart.showActTip(e,7):this.view.sddzPage.actTipPart.showActTip(e,8):this.model.isSelfSitDown&&e==this.model.selfChairPos&&(this.view.sddzPage.handleBtns.showjiabei(),this.view.sddzPage.clockPart.showjiabei(i.CurTime)):3==this.model.stage&&(1==i.LastOpt[e]?this.view.sddzPage.actTipPart.showActTip(e,9):2==i.LastOpt[e]&&this.view.sddzPage.outputPart.showCards(i.LastOptParam[e].Cards,e)));(2==this.model.stage||3==this.model.stage)&&(this.model.dipaiCards=i.Dipai.concat(),this.view.sddzPage.dipaiPart.showCards(this.model.dipaiCards),this.view.playerInfoPage.updateJiabei(),this.model.dizhuPos=i.DizhuIndex,this.view.playerInfoPage.showDizhuNM(),this.view.sddzPage.handlePart.updateAllCards(this.model.handleCards),3==this.model.stage&&(this.model.curOutputPos=i.CurOutputIndex,this.model.curOutputPos>=0&&(this.model.curOutputCards=i.CurCards,this.view.sddzPage.outputPart.showCards(this.model.curOutputCards,this.model.curOutputPos)),this.view.sddzPage.clockPart.noticeShowClock(i.CurIndex,10),this.view.sddzPage.outputPart.hideCards(i.CurIndex)))}},s.ACKBC_Sddz_JiaoDizhu=function(i){if(this.actived){console.log("ACKBC_Sddz_JiaoDizhu",i,"ACKBC_Sddz_JiaoDizhu"),this.model.sddzMsgs.ACKBC_Sddz_JiaoDizhu=i;var e=this.model.getPlayerPosByUid(i.Uid);this.model.difen=i.CurFen,this.view.tableInfoPage.updateDifen(),e==this.model.selfChairPos&&this.view.sddzPage.handleBtns.showJiaodizhu(),this.view.sddzPage.clockPart.noticeShowClock(e,i.LeftTime)}},s.ACKBC_Sddz_Jiaofen=function(i){if(this.actived){console.log("ACKBC_Sddz_Jiaofen",i,"ACKBC_Sddz_Jiaofen"),this.model.sddzMsgs.ACKBC_Sddz_Jiaofen=i;var e=this.model.getPlayerPosByUid(i.Uid);this.view.sddzPage.actTipPart.showActTip(e,i.Fen),T.playSound("res/sounds/sddz/"+D.instance.getSexRef(this.model.playerByPos(this.model.selfChairPos).sex)+"fen"+i.Fen+".mp3"),i.Fen>0&&(this.model.difen=i.Fen,this.view.tableInfoPage.updateDifen()),e==this.model.selfChairPos&&this.view.sddzPage.handleBtns.reset()}},s.ACKBC_Sddz_Dizhu=function(i){if(this.actived){console.log("ACKBC_Sddz_Dizhu",i,"ACKBC_Sddz_Dizhu"),this.model.sddzMsgs.ACKBC_Sddz_Dizhu=i;var e=this.model.getPlayerPosByUid(i.Uid);this.model.dizhuPos=e,this.model.difen=i.Fen,this.view.sddzPage.actTipPart.hideAllActTip(),this.view.sddzPage.handleBtns.showjiabei(),this.view.playerInfoPage.showDizhuNM(),this.view.tableInfoPage.updateDifen(),this.model.addDipaiToHandleCards(this.model.dizhuPos,i.Dipai),this.view.sddzPage.dipaiPart.showCards(this.model.dipaiCards),this.view.sddzPage.handlePart.updateOnePosAllCards(this.model.dizhuPos,this.model.handleCards[this.model.dizhuPos]),this.view.sddzPage.clockPart.showjiabei(i.LeftTime)}},s.ACKBC_Sddz_Mingpai=function(i){if(this.actived){console.log("ACKBC_Sddz_Mingpai",i,"ACKBC_Sddz_Mingpai"),this.model.sddzMsgs.ACKBC_Sddz_Mingpai=i;var e=this.model.getPlayerPosByUid(i.Uid);1==i.Mingpai&&(this.model.updateMingpai(e,i.Cards),this.view.sddzPage.handlePart.updateOnePosAllCards(e,this.model.handleCards[e]),T.playSound("res/sounds/sddz/"+D.instance.getSexRef(this.model.playerByPos(this.model.selfChairPos).sex)+"mingpai.mp3"))}},s.ACKBC_Sddz_Jiabei=function(i){if(this.actived){console.log("ACKBC_Sddz_Jiabei",i,"ACKBC_Sddz_Jiabei"),this.model.sddzMsgs.ACKBC_Sddz_Jiabei=i;var e=this.model.getPlayerPosByUid(i.Uid);e==this.model.selfChairPos&&this.view.sddzPage.handleBtns.reset(),1==i.Jiabei?(this.model.jiabeiVec[e]=!0,this.view.sddzPage.actTipPart.showActTip(e,7),this.view.playerInfoPage.updateJiabei(),T.playSound("res/sounds/sddz/"+D.instance.getSexRef(this.model.playerByPos(this.model.selfChairPos).sex)+"jiabei.mp3")):(this.model.jiabeiVec[e]=!1,this.view.sddzPage.actTipPart.showActTip(e,8),T.playSound("res/sounds/sddz/"+D.instance.getSexRef(this.model.playerByPos(this.model.selfChairPos).sex)+"bujiabei.mp3"))}},s.ACKBC_CurPlayer=function(i){if(this.actived){console.log("ACKBC_CurPlayer",i,"ACKBC_CurPlayer"),this.model.sddzMsgs.ACKBC_CurPlayer=i;var e=i.Seat;this.view.sddzPage.clockPart.noticeShowClock(e,i.LeftTime),e==this.model.selfChairPos&&this.model.isSelfSitDown&&(this.view.sddzPage.handleBtns.showCtlBtns(),this.view.sddzPage.handlePart.canControl(e,!0)),this.view.sddzPage.actTipPart.hideJiabei(),this.view.sddzPage.outputPart.hideCards(e),this.view.sddzPage.actTipPart.hideActTip(e)}},s.preSelfOutputCards=function(i,e,t){if(!l.autoPlay){var s={Uid:i,Type:e,Cards:t};this.ACKBC_Sddz_Chupai(s),this.model.isClientPrePop=!0}},s.ACKBC_Sddz_Chupai=function(i){if(this.actived){console.log("ACKBC_Sddz_Chupai",i,"ACKBC_Sddz_Chupai"),this.model.sddzMsgs.ACKBC_Sddz_Chupai=i;var e=this.model.getPlayerPosByUid(i.Uid);if(e==this.model.selfChairPos&&this.view.sddzPage.handleBtns.reset(),i.pos==this.model.selfChairPos&&1==this.model.isClientPrePop)return this.model.isClientPrePop=!1,void 0;var t=!0;-1!=this.model.curOutputPos&&this.model.curOutputPos!=e&&(t=!1),this.model.outputPockers(e,i.Cards),this.view.sddzPage.outputPart.showCards(i.Cards,e),this.view.sddzPage.handlePart.updateOnePosAllCards(e,this.model.handleCards[e]),this.model.beishu=i.Beishu,this.view.tableInfoPage.updateBeishu();var s=F.getJishuArrData(this.model.curOutputCards),n="";switch(i.Type){case 1:n="1-"+te.getV(this.model.curOutputCards[0]);break;case 2:n="2-"+te.getV(this.model.curOutputCards[0]);break;case 3:n="3-"+te.getV(this.model.curOutputCards[0]);break;case 4:n="3d1";break;case 5:n="3d2";break;case 7:X.instance.showPockTypeEff(7),n="shunzi";break;case 6:n="liandui";break;case 8:n="feiji";var o=U.getFeiji(s);0==o.type?X.instance.showPockTypeEff(8):X.instance.showPockTypeEff(8,!0);break;case 10:n="zhadan",X.instance.showPockTypeEff(10);break;case 9:var a=j.getSidaierData(s);1==a.type?n="4d2":2==a.type&&(n="4d4");break;case 11:X.instance.showPockTypeEff(11),n="huojian"}var r="yao"+(1+Math.round(Math.random()));if(0==t){var h=Math.random();h>=.5&&(n=r)}T.playSound("res/sounds/sddz/"+D.instance.getSexRef(this.model.playerByPos(this.model.selfChairPos).sex)+n+".mp3")}},s.ACKBC_Sddz_Pass=function(i){if(this.actived){console.log("ACKBC_Sddz_Pass",i,"ACKBC_Sddz_Pass"),this.model.sddzMsgs.ACKBC_Sddz_Pass=i;var e=this.model.getPlayerPosByUid(i.Uid);this.view.sddzPage.actTipPart.showActTip(e,9);var t="guo"+(1+Math.round(2*Math.random()));T.playSound("res/sounds/sddz/"+D.instance.getSexRef(this.model.playerByPos(this.model.selfChairPos).sex)+t+".mp3"),e==this.model.selfChairPos&&this.view.sddzPage.handleBtns.reset()}},s.ACKBC_Sddz_End=function(i){if(this.actived){if(console.log("ACKBC_Sddz_End",i,"ACKBC_Sddz_End"),this.model.sddzMsgs.ACKBC_Sddz_End=i,E.isReplay&&1==this.model.isStrictShowCalc)return;var e;if(-1==i.Uid){if(this.view.sddzPage.handleBtns.reset(),this.model.isLiu=!0,E.isReplay&&1==this.model.isStrictShowCalc)return;e="audio_liuju",D.playEffect(e),this.pauseGameQueue(),t.timer.once(4e3,this,this.contineGameQueue)}else{var s=this.model.getPlayerPosByUid(i.Uid),n=!1,o=!1;s==this.model.selfChairPos&&(n=!0),s==this.model.dizhuPos&&(o=!0),this.model.isLiu=!1,e=1==n?"js_win":"js_fail",D.playEffect(e),t.timer.once(2e3,this,this.contineGameQueue)}this.gameOverDownCards(i),this.pauseGameQueue()}},s.gameOverDownCards=function(i){this.model.isEnd=!0,this.model.dipaiCards=i.Dipai,this.view.sddzPage.dipaiPart.showCards(this.model.dipaiCards);var e=[],t=0,s=0,n=0;for(t=0;t<i.Cards.length;t++){if(i.Cards[t].List.length!=i.Cards[t].ListLen)for(n=0;n<i.Cards[t].ListLen;n++)i.Cards[t].List.push({CID:0});for(e.length=0,s=0;s<i.Cards[t].List.length;s++)e.push(i.Cards[t].List[s].CID);this.model.updateHandleCards(t,e),this.view.sddzPage.handlePart.updateOnePosAllCards(t,this.model.handleCards[t])}},s.ACKBC_Sddz_Total=function(i){if(this.actived){console.log("ACKBC_Sddz_Total",i,"ACKBC_Sddz_Total"),this.model.sddzMsgs.ACKBC_Sddz_Total=i,this.model.sddzMsgs.ACK_RoomInfo.RoundCount=i.RoundCount,this.view.tableInfoPage.updateLeftRound(!1),this.view.playerInfoPage.updateSitDownUpBtn(!1);var e=B.getLocalVar("hasConcern",0);0==e?(B.setLocalVar("hasConcern",1),u.instance.commonContext.view.showNotice("       微信搜索公众号<span style='color:#f6d368;'> "+l.nameTitle+"  </span>关注后即可获得更多福利哦！<br />",this,this.showCalculate)):this.showCalculate(),this.showCalculate()}},s.showCalculate=function(){this.model.isGameStart=!1,this.view.calculatePage.show(),this.model.setPlayerReadyFalse()},s.NOTIFY_Summary=function(){},s.ACKBC_Exit_Room=function(i){if(this.actived){if(console.log("ACKBC_Exit_Room"),console.log(i),console.log("ACKBC_Exit_Room"),this.model.sddzMsgs.ACKBC_Exit_Room=i,i.uid=i.UID,i.uid==E.selfuid)return l.isNewHall?B.gotoHall():this.endGameGotoHall(!0),void 0;g.instance.event("COMMON_INFOLIST_NOTICE",{color:1,msg:"玩家["+this.model.getPlayerNicknameByUid(i.uid)+"]离开了房间！"});var e=this.model.getPlayerPosByUid(i.uid);this.model.leavePlayer(i.uid),-1!=e&&(this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.showStartBtn(!1)),(this.model.isGameStart||0!=this.model.sddzMsgs.ACK_RoomInfo.RoundCount)&&this.view.playerInfoPage.showDizhuNM()}},s.AckDisband=function(i){this.actived&&(console.log("AckDisband::",i,"解散相关"),this.model.sddzMsgs.AckDisband=i,this.popDissolveRoomDetail(i))},s.NotifyDisband=function(i){if(this.actived){console.log("NotifyDisband::",i,"解散相关"),this.model.sddzMsgs.NotifyDisband=i,this.hideDissolveRoomDetail();var e="";1==i.result?e="解散成功！":(e="解散失败！",B.popMessageBox(e,"BTN_NONE",this,null))}},s.NotifyUserState=function(i){if(this.actived){console.log("NotifyUserState",i,"NotifyUserState"),this.model.sddzMsgs.NotifyUserState=i;var e=this.model.playerByUid(i.id);e.state=i.state,e.offlineTime=i.offlineTime;var t=this.model.getPlayerPosByUid(parseInt(i.id)),s=this.model.getChairDirByPos(t),n=!1;2==i.state&&(n=!0),this.view.playerInfoPage.setGrayhead(s,n,!0,i.offlineTime)}},s.NotifyKick=function(i){if(this.actived){console.log("NotifyKick",i,"NotifyKick");var e,t=0,s=i.indexs.length;for(t=0;s>t;t++)e=this.model.playerByPos(i.indexs[t]),e.offlineTime=0,e.canKick=!0;this.view.playerInfoPage.updateTirenBtn()}},s.KickResponse=function(i){this.actived&&(B.popBox&&B.popBox.onhide(),this.model.standup(i.uid,-1),this.model.beKickedPlayer[i.pos]=i.uid,this.model.playerByUid(i.uid).offlineTime=0,this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.updateSitDownUpBtn(),this.view.playerInfoPage.updateStartBtn(),this.view.tableInfoPage.updateKaijuren(i.nickName),g.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+this.model.getPlayerNicknameByUid(i.uid)+"]站起了！"}),B.popMessageBox("玩家["+this.model.getPlayerNicknameByUid(i.uid)+"]被其他玩家请离座位!","BTN_QUEREN",this,this.onQuerenBeiTi))},s.onQuerenBeiTi=function(){},s.NotifyDestoryRoom=function(i){this.actived&&(console.log("NotifyDestoryRoom",i,"NotifyDestoryRoom"),this.pop=void 0!=i.IsOwnerDisband&&1==i.IsOwnerDisband?B.popMessageBox("房主解散了房间！","BTN_QUEREN",this,this.onQueRenExit,"提示","left"):B.popMessageBox("由于在规定时间内未开始游戏，房间已经强制解散！","BTN_QUEREN",this,this.onQueRenExit,"提示","left"))},s.onQueRenExit=function(){l.isNewHall?B.gotoHall():this.endGameGotoHall()},s.onPopPanelCallBack=function(){l.isNewHall?B.gotoHall():this.endGameGotoHall()},s.endGameGotoHall=function(i){void 0===i&&(i=!0),console.log("send MsgTypes.BASE_QUEUE,PomeloMessage.hall_g_o..."),null!=this.pop&&this.pop.onhide(),this.hideDissolveRoomDetail(),this.contineGameQueue(),P.instance.resetGameQueue(),this.model.reset(),this.view.reset(),this.model.playerInfoVec.length=0,E.isReplay&&(E.isPreReplay=!0),u.instance.regotoCommonText(),fe.instance.stopGame(i),E.isReplay=!1,0==this.model.isGameStart},s.popDissolveRoomDetail=function(i){null==this.dissolvePage&&(this.dissolvePage=new b),this.dissolvePage.update(i),B.AddCenter(this.dissolvePage,N.instance.popLayer),B.popBox&&B.popBox.onhide()},s.hideDissolveRoomDetail=function(){this.dissolvePage&&this.dissolvePage.parent&&this.dissolvePage.parent.removeChild(this.dissolvePage)},s.clear=function(){this.model.reset(),this.view.reset(),this.model.playerInfoVec.length=0,E.isReplay&&g.instance.event("REPLAY_back",null),E.isReplay=!1,0==this.model.isGameStart},s.MSG_ACK_Gift=function(i){if(this.actived){console.log("MSG_ACK_Gift",i,"MSG_ACK_Gift");var e=this.model.playerByUid(i.uid),t=this.model.playerByUid(i.tUid);e.Diamond=i.diamond;var s=this.model.getChairDirByPos(e.pos),n=this.model.getChairDirByPos(t.pos);i.uid==E.uid&&(E.Diamond=i.diamond),X.instance.showGiftEff(s,n,i.id)}},s.clearTimeDelay=function(){t.timer.clear(this,this.contineGameQueue)},s.resetSelf=function(){this.model.reset(),this.view.playerInfoPage.hideReadyBtn(),this.view.playerInfoPage.hideDizhuNM(),this.view.playerInfoPage.updateJiabei(),this.view.calculatePage.reset(),this.view.sddzPage.reset()},s.sendMsgCommond=function(i,e){void 0===e&&(e=!0),e&&this.view.sddzPage.handlePart.canControl(this.model.selfChairPos,!1),g.instance.event("SOCKET_SEND",i)},s.pauseGameQueue=function(){E.isReplay?this.model.needCutdownReplay=!0:P.instance.pauseQueue("MESSAGE_GAME")},s.contineGameQueue=function(){E.isReplay?this.model.needCutdownReplay=!1:P.instance.continueQueue("MESSAGE_GAME")},s.onTimeOver=function(){this.model.isGameStart||(this.view.calculatePage.perPage.isShow?this.view.calculatePage.perPage.timeOver():this.view.calculatePage.perPage.onClickConfirmBtn())},o(0,s,"model",function(){return fe.instance.gameContext.model}),o(0,s,"view",function(){return fe.instance.gameContext.view}),e}(r),pe=function(i){function e(){this.roomOwnerUid="",this.isMouseDwon=!1,this.dizhuPos=-1,this.difen=0,this.beishu=1,this.stage=0,this.curHandlePos=0,this.isStrictShowCalc=!1,this.beKickedPlayer={},this.isAutoHandle=!1,this.isDragingcard=!1,this.isGameStart=!1,this.preStepNum=4,this.replayData=[],this.replayCurStep=0,this.replayState=0,this.needCutdownReplay=!1,this.isClientPrePop=!1,this.isClientPrePopCards=0,this.dipaiCards=[],this.curOutputPos=-1,this.curOptPos=-1,this.isLiu=!1,this.isEnd=!1,this.isSelfSitDown=!1,this.selfChairPos=0,this._chairNum=3,this.curOutputCards=[],this.sddzMsgs=new H,this.playerInfoVec=[],this.mingpaiVec=[],this.jiabeiVec=[],this.handleCards=[],this.outputCards=[],e.__super.call(this)}n(e,"modules.sddzGame.sddzInerGame.model.SddzModel",i);var t=e.prototype;return t.onAdd=function(){},t.onRemove=function(){},t.resetCard=function(){this.dizhuPos=-1,this.difen=0,this.beishu=1,this.curOutputPos=-1,this.curOptPos=-1,this.curOutputCards.length=0,this.dipaiCards.length=0;var i=0,e=this._chairNum;for(i=0;e>i;i++)this.outputCards[i].length=0,this.handleCards[i].length=0,this.mingpaiVec[i]=!1,this.jiabeiVec[i]=!1;this.isEnd=!1,this.isLiu=!1},t.reset=function(){this.beKickedPlayer={},this.resetCard()},t.updateHandleCards=function(i,e){this.handleCards[i]=e.concat(),this.handleCards[i].sort(L.compCardsFun)},t.addDipaiToHandleCards=function(i,e){this.dipaiCards=e.concat(),this.handleCards[i]=this.handleCards[i].concat(e),this.handleCards[i].sort(L.compCardsFun)},t.updateMingpai=function(i,e){this.mingpaiVec[i]=!0,this.handleCards[i]=e.concat(),this.handleCards[i].sort(L.compCardsFun)},t.outputPockers=function(i,e){this.curOutputPos=i,this.curOutputCards=e.concat(),this.curOutputCards.sort(L.compCardsFun),this.outputCards[i].push(e);var t=0,s=e.length;for(t=0;s>t;t++){var n=this.handleCards[i].indexOf(e[t]);-1!=n?this.handleCards[i].splice(n,1):this.handleCards[i].splice(0,1)}},t.getChairDirByPos=function(i){if(-1==i)return-1;var e=0;return e=i-this.selfChairPos,0>e&&(e+=this.chairNum),e},t.getChairPosByDir=function(i){var e=0;return e=this.selfChairPos+i,e>this.chairNum-1&&(e-=this.chairNum),e},t.updateOnePlayerInfo=function(i){i.sex=i.pos%2==0?1:2;var e=0,t=this.playerInfoVec.length,s=!1;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].uid==i.uid){this.playerInfoVec[e].pos!=i.pos&&console.log("传过来的数据有错误!!!!!!"),this.updateObjFromObj(this.playerInfoVec[e],i),s=!0;break}0==s&&this.playerInfoVec.push(i),i.uid==E.selfuid&&(this.selfChairPos=i.pos,-1==this.selfChairPos?(this.isSelfSitDown=!1,this.selfChairPos=0):this.isSelfSitDown=!0)},t.playerByPos=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].pos==i)return this.playerInfoVec[e];return null},t.playerByUid=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].uid==i)return this.playerInfoVec[e];return null},t.getPlayerPosByUid=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].uid==i)return this.playerInfoVec[e].pos;return 0},t.getPlayerUidByPos=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].pos==i)return this.playerInfoVec[e].uid;return 0},t.getPlayerNicknameByUid=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].uid==i)return this.playerInfoVec[e].nickname;return""},t.updateObjFromObj=function(i,e){i.prePos=i.pos;for(var t in e)void 0!=e[t]&&(i[t]=e[t])},t.sitDown=function(i,e,t){var s=0,n=this.playerInfoVec.length;for(s=0;n>s;s++)this.playerInfoVec[s]&&this.playerInfoVec[s].uid==i&&(this.playerInfoVec[s].pos=e,this.playerInfoVec[s].score=t,this.playerInfoVec[s].canKick=!1,i==E.selfuid&&(-1!=e?(this.isSelfSitDown=!0,this.selfChairPos=e):(this.isSelfSitDown=!1,this.selfChairPos=0)))},t.standup=function(i,e){var t=0,s=this.playerInfoVec.length;for(t=0;s>t;t++)this.playerInfoVec[t]&&this.playerInfoVec[t].uid==i&&(this.playerInfoVec[t].pos=e,this.playerInfoVec[t].canKick=!1,i==E.selfuid&&(-1!=e?(this.isSelfSitDown=!0,this.selfChairPos=e):(this.isSelfSitDown=!1,this.selfChairPos=0)))},t.updateReadyState=function(i,e,t){var s=0,n=this.playerInfoVec.length;for(s=0;n>s;s++)if(this.playerInfoVec[s]&&this.playerInfoVec[s].pos==i){this.playerInfoVec[s].readystate=!0,this.playerInfoVec[s].piao=t;break}},t.leavePlayer=function(i){var e=0,t=this.playerInfoVec.length;for(e=0;t>e;e++)if(this.playerInfoVec[e]&&this.playerInfoVec[e].uid==i){this.playerInfoVec.splice(e,1);break}},t.updatePlayerInfoVec=function(i){var e,t=0,s=i.length;for(t=0;s>t;t++)e=i[t],E.isReplay&&(e.index=void 0!=e.index?e.index:0,e.diamond=void 0!=e.diamond?e.diamond:0,e.Icon=void 0!=e.Icon?e.Icon:"",e.score=void 0!=e.score?e.score:0,e.coin=void 0!=e.coin?e.coin:0,e.readystate=void 0!=e.readystate?e.readystate:0,e.uid=void 0!=e.uid?e.uid:0,e.IP=void 0!=e.IP?e.IP:"",e.Name=e.name,e.Index=e.index,e.Coin=e.coin,e.readystate=1,e.UID=e.uid,e.Diamond=e.diamond,e.icon&&(e.Icon=e.icon)),e.nickname=e.Name,e.uid=e.UID,e.ip=e.IP,e.pos=e.Index,e.golds=e.Coin,(""!=e.uid||0!=e.uid)&&(3==e.state?(this.beKickedPlayer[e.pos]=e.uid,e.state=1,e.pos=-1):4==e.state&&(this.beKickedPlayer[e.pos]=e.uid,e.state=2,e.pos=-1),this.updateOnePlayerInfo(i[t]))},t.setPlayerReadyFalse=function(){var i=0,e=this.playerInfoVec.length;for(i=0;e>i;i++)this.playerInfoVec[i].readystate=0
},o(0,t,"gameHasStarted",function(){return this.isGameStart||this.sddzMsgs.ACK_RoomInfo.RoundCount>0?!0:!1}),o(0,t,"chairNum",function(){return this._chairNum},function(i){this._chairNum=i,this.playerInfoVec.length=0,this.outputCards.length=this.chairNum,this.handleCards.length=this.chairNum,this.mingpaiVec.length=this.chairNum,this.jiabeiVec.length=this.chairNum,this.dipaiCards.length=0;var e=0,t=this._chairNum;for(e=0;t>e;e++)this.outputCards[e]=[],this.handleCards[e]=[],this.mingpaiVec[e]=!1,this.jiabeiVec[e]=!1;this.isGameStart=!1,this.isEnd=!1,this.isLiu=!1}),e.Stage_jiaofen=1,e.Stage_jiabei=2,e.Stage_dapai=3,s(e,["DissolveResult_REF",function(){return this.DissolveResult_REF=["等待操作","同意","拒绝"]}]),e}(r),_e=function(i){function e(){this._sddzPage=null,this.popChatArr=null,this.expressloaderArr=null,this._replayControlView=null,this._playerInfoPage=null,this._tableInfoPage=null,this._calculatePage=null,this._chatPage=null,this._gui=null,this._voiceRecording=-1,this.isPlayVoice=!1,this.isClick=!1,this.isRecording=!1,e.__super.call(this),this.setType(3)}n(e,"modules.sddzGame.sddzInerGame.view.SddzGameView",i);var s=e.prototype;return s.onAdd=function(){this.onAddUI(),this.onAddListener()},s.onRemove=function(){this.onRemoveUI(),this.onRemoveListener()},s.onAddUI=function(){null==this._gui&&(this._gui=new p,this._gui.mouseThrough=!0),console.log("桌面被添加到舞台！！"),N.instance.uiLayer.addChild(this._gui),null==this._sddzPage&&(this._sddzPage=new ce(new A),this._gui.pokerContainer.addChild(this._sddzPage.skin)),null==this._tableInfoPage&&(this._tableInfoPage=new ue(this.gui.tableInfoPage)),null==this._playerInfoPage&&(this._playerInfoPage=new q(this.gui.playerInfoPage)),null==this._calculatePage&&(this._calculatePage=new $(this.gui.calculatePart)),null==this._replayControlView&&(this._replayControlView=new z(this.gui.replayControlView)),this._chatPage=c.vchatPage,this.gui.chatContainer.addChild(this._chatPage.skin),this._chatPage.hide(),1==E.isReplay?this._replayControlView.show():this._replayControlView.hide(),this._gui.popChat0.visible=!1,this._gui.popChat1.visible=!1,this._gui.popChat2.visible=!1,g.instance.on("SEND_CHAT_MESSAGE",this,this.onSendChat),this._gui.tableInfoPage.voiceIntercomBtn.on("click",this,this.onVoiceOpClick),this._gui.tableInfoPage.voiceIntercomBtn.on("mouseout",this,this.onVoiceOpOut),this._gui.tableInfoPage.chatBtn.on("click",this,this.onShowChatPage)},s.initPopChat=function(i){switch(void 0===i&&(i=3),this.popChatArr=[],i){case 3:this.popChatArr.push(this._gui.popChat0,this._gui.popChat1,this._gui.popChat2)}},s.onSendChat=function(i){this.chatPage.switchState();var e={message:i,type:2};g.instance.event("SOCKET_SEND",I.getProtoMessage(370,e))},s.onVoiceOpClick=function(i){this.isClick=!0,console.log("点击了？？？？？？ "),this.isRecording?this.stopRecord():this.startRecord(),i.stopPropagation()},s.onVoiceOpOut=function(){return this.isClick?(this.isClick=!1,void 0):(console.log("滑动了？？？？？？ "),1==this.isRecording&&(O.stopRecord(-1),t.timer.clear(this,this.onRecording),this._gui.tableInfoPage.voiceTip.visible=!1,this._gui.tableInfoPage.voicePlay.visible=!1,this.tableInfoPage.stopVoicePlay(),this.onStopSuccess(),this.isRecording=!1,this.isPlayVoice||this.Voice()),void 0)},s.startRecord=function(){O.startRecord(),this._gui.tableInfoPage.voicePlay.visible=!0,this.tableInfoPage.playVoicePlay(),this._gui.tableInfoPage.voiceTip.visible=!0,this._voiceRecording=M.unixtime,this._gui.tableInfoPage._time.text="15'",t.timer.loop(100,this,this.onRecording),this.isRecording=!0},s.stopRecord=function(){var i=M.unixtime-this._voiceRecording;500>i||(1e3>i?(O.stopRecord(-1),B.VoiceTip(3),t.timer.clear(this,this.onRecording),this._gui.tableInfoPage.voiceTip.visible=!1,this._gui.tableInfoPage.voicePlay.visible=!1,this.tableInfoPage.stopVoicePlay(),this.onStopSuccess()):(O.stopRecord(0,this,this.onStopSuccess),t.timer.clear(this,this.onRecording),this._gui.tableInfoPage.voiceTip.visible=!1,this._gui.tableInfoPage.voicePlay.visible=!1,this.tableInfoPage.stopVoicePlay(),fe.instance.gameContext.view.gui.tableInfoPage.voiceIntercomBtn.disabled=!0,fe.instance.gameContext.view.gui.tableInfoPage.voiceDis.visible=!0),this.isRecording=!1,this.isPlayVoice||this.Voice())},s.onStopSuccess=function(){fe.instance.gameContext.view.gui.tableInfoPage.voiceIntercomBtn.disabled=!1,fe.instance.gameContext.view.gui.tableInfoPage.voiceDis.visible=!1},s.onRecording=function(){var i=(M.unixtime-this._voiceRecording)/1e3;this._gui.tableInfoPage._time.text=15-Math.floor(i)+"'",i>=l.maxVoiceTime&&this.stopRecord()},s.onRecChat=function(i){var e=i.message.split("#");e.length>1&&this.showPopChat(e[0],e[1])},s.showPopChat=function(i,e){null==this.popChatArr&&this.initPopChat(this.model.chairNum);var t=this.model.getPlayerPosByUid(i),s=this.model.getChairDirByPos(t),n=e.split("|");if(n.length>1){if("express"==n[0]){var o=parseInt(n[1]);return this._playerInfoPage.showExpress(s,o+1),void 0}"VoiceId"==n[0]&&(console.log("youyuyinguolaile"),O.voiceArr.push([parseInt(i),n[1]]),this.isPlayVoice||0!=this.isRecording||this.Voice())}else{this.popChatArr[s].visible=!0,this.popChatArr[s].tf.text=e,this.popChatArr[s].backimg.width=this.popChatArr[s].tf.textField.textWidth+30,this.popChatArr[s].backimg.height=this.popChatArr[s].tf.textField.textHeight+40,G.clearAll(this.popChatArr[s]),this.popChatArr[s].alpha=1;var a=2e3*this.popChatArr[s].tf.textField.lines.length;T.playSound(D.instance.getSddzChatPath(this.model.playerByPos(t).sex,l.getChatSound(e,2)),1)}this.popChatArr[s]==this._gui.popChat1&&(this.popChatArr[s].x=218+(392-this.popChatArr[s].tf.textField.textWidth)),G.to(this.popChatArr[s],{alpha:.3},a,null,new v(this,this.onCompeteTween,[this.popChatArr[s]]),500)},s.Voice=function(){var i=this;if(!(O.voiceArr.length<=0||O.isUpLoading)){this.isPlayVoice=!0;var e=O.voiceArr.shift();O.downloadVoice(e[1],this,this.playVoice,[e[0]]),d.window.wx.onVoicePlayEnd({success:function(){console.log("声音播放完成了！！ uid：："+e[0]),console.log("WX.voiceArr.length::"+O.voiceArr.length),t.timer.clear(fe.instance.gameContext.view,i.recoverSoundVolume),fe.instance.gameContext.view.playerInfoPage.hideVoice(e[0]),l.isPlayingRecord=!1,t.timer.once(1e3,null,D.swithMusic,["game"]),O.voiceArr.length>0?i.Voice():(O.isDownLoading=!1,O.uploadArr.length>0&&(O.uploadVoice(O.uploadArr[0]),O.uploadArr.length=0),fe.instance.gameContext.view.isPlayVoice=!1,0==O.isUpLoading&&(fe.instance.gameContext.view.gui.tableInfoPage.voiceIntercomBtn.disabled=!1,fe.instance.gameContext.view.gui.tableInfoPage.voiceDis.visible=!1))}})}},s.playVoice=function(i){t.timer.once(15e3,this,this.recoverSoundVolume,[parseInt(i)]),this._playerInfoPage.showVoice(parseInt(i))},s.recoverSoundVolume=function(i){0!=this.isPlayVoice&&(this.isPlayVoice=!1,l.isPlayingRecord=!1,D.swithMusic("game"),this._playerInfoPage.hideVoice(i),this._gui.tableInfoPage.voiceIntercomBtn.disabled=!1,this._gui.tableInfoPage.voiceDis.visible=!1)},s.playend=function(i){this._playerInfoPage.hideVoice(i)},s.onCompeteTween=function(i){i.alpha=1,i.visible=!1},s.onShowChatPage=function(i){D.instance.playClickBtnSound(),this.chatPage.switchState(),i.stopPropagation()},s.setChairNmu=function(i){this.sddzPage.setChairNum(i),this._playerInfoPage.setChairNum(i),this.reset()},s.startGame=function(){},s.onAddListener=function(){},s.onticketCardChange=function(i){this.calculatePage.showGetTicket(i[0]),i&&i.complete()},s.onRemoveUI=function(){null!=this._gui&&(N.instance.uiLayer.removeChild(this._gui),console.log("桌面被移除舞台！！"),this._gui.tableInfoPage.chatBtn.off("mousedown",this,this.onShowChatPage),g.instance.off("SEND_CHAT_MESSAGE",this,this.onSendChat),this._gui.tableInfoPage.voiceIntercomBtn.off("click",this,this.onVoiceOpClick),this._gui.tableInfoPage.voiceIntercomBtn.off("mouseout",this,this.onVoiceOpOut))},s.reset=function(){ie.instance.hide(),this._sddzPage.reset(),this._tableInfoPage.reset(),this._playerInfoPage.havePiaoReset(),this._calculatePage.reset(),this._replayControlView.reset()},s.replayup_reset=function(){this._sddzPage.reset(),this._tableInfoPage.reset(),this._playerInfoPage.havePiaoReset(),this._calculatePage.reset(),this._replayControlView.replayup_reset()},s.onRemoveListener=function(){},o(0,s,"model",function(){return fe.instance.gameContext.model}),o(0,s,"replayControlView",function(){return this._replayControlView}),o(0,s,"sddzPage",function(){return this._sddzPage}),o(0,s,"playerInfoPage",function(){return this._playerInfoPage}),o(0,s,"gui",function(){return this._gui}),o(0,s,"chatPage",function(){return this._chatPage}),o(0,s,"tableInfoPage",function(){return this._tableInfoPage}),o(0,s,"calculatePage",function(){return this._calculatePage}),e}(r),Ce=function(i){function e(i){this.orignalY=0,this.readyOffsetY=-20,this.orignalY=i.y,e.__super.call(this,i),this.canControl=!0}n(e,"modules.sddzGame.sddzInerGame.view.pockerPart.card.BottomHandlePocker",i,"BottomHandlePocker$1");var s=e.prototype;return s.up=function(){0!=this.state&&(this.skin.valueImg.visible=!0,this.skin.backImg.visible=!1,this.state=0)},s.back=function(){1!=this.state&&(this.skin.backImg.visible=!0,this.skin.valueImg.visible=!1,this.state=1)},s.down=function(){2!=this.state&&(this.skin.backImg.visible=!1,this.skin.valueImg.visible=!0,this.state=2)},s.onMouseOver=function(){this.model.isMouseDwon&&(this.skin.shadowImg.visible=!this.skin.shadowImg.visible,this.select=!this.select)},s.onMouseMove=function(){},s.onClickStage=function(i){console.log("pock onClickStage::",i.target)},s.onMouseDown=function(){this.select=!this.select,this.skin.shadowImg.visible=!this.skin.shadowImg.visible},s.onMouseUp=function(){this.skin.shadowImg.visible=!1,this.model.isMouseDwon=!1},s.onSkinMouseUp=function(){D.playEffect("audio_deal_card")},s.reset=function(){i.prototype.reset.call(this)},o(0,s,"canControl",null,function(i){i=!0,i?(this.skin.on("mouseover",this,this.onMouseOver),t.stage.on("click",this,this.onClickStage),this.skin.on("mousedown",this,this.onMouseDown),t.stage.on("mouseup",this,this.onMouseUp),this.skin.on("mouseup",this,this.onSkinMouseUp)):(this.skin.off("mouseover",this,this.onMouseOver),t.stage.off("click",this,this.onClickStage),this.skin.off("mousedown",this,this.onMouseDown),t.stage.off("mouseup",this,this.onMouseUp),this.skin.off("mouseup",this,this.onSkinMouseUp))}),o(0,s,"select",function(){return this.skin.y==this.orignalY+this.readyOffsetY},function(i){this.skin.y=i?this.orignalY+this.readyOffsetY:this.orignalY}),e}(te),ve=function(i){function e(i){e.__super.call(this,i)}n(e,"modules.sddzGame.sddzInerGame.view.pockerPart.card.OtherHandlePocker",i,"OtherHandlePocker$1");var t=e.prototype;return t.up=function(){0!=this.state&&(this.skin.valueImg.visible=!1,this.skin.backImg.visible=!0,this.state=0)},t.back=function(){1!=this.state&&(this.skin.backImg.visible=!0,this.skin.valueImg.visible=!1,this.state=1)},t.down=function(){2!=this.state&&(this.skin.backImg.visible=!1,this.skin.valueImg.visible=!0,this.state=2)},e}(te),Pe=function(i){function e(i){this.gap=55,this._skin=null,this._skin=i,e.__super.call(this,i)}n(e,"modules.sddzGame.sddzInerGame.view.pockerPart.singlePart.handlePart.BottomSingleHandlePart",i,"BottomSingleHandlePart$2");var s=e.prototype;return s.init=function(){var i=0,e=this._pockers.length;for(i=0;e>i;i++)this._pockers[i]=new Ce(this._skin["card"+i]);t.stage.on("mousedown",this,this.onDownStage)},s.onDownStage=function(){this.model.isMouseDwon=!0},s.showCards=function(i,e){L.sortHandleCards(i),i=i.reverse();var t=this.model.getChairPosByDir(e);this.hideAll(),this.updateState(this.model.mingpaiVec[t]);var s=0;for(s=0;s<i.length;s++)this._pockers[s].setCardImg(i[s]),this._pockers[s].show(),this._pockers[s].select=!1,this._pockers[s].showDizhuImg(!1),this.updateState(this.model.mingpaiVec[t]),s==i.length-1&&(t==this.model.dizhuPos&&this._pockers[s].showDizhuImg(!0),this._pockers[s].showMingImg(this.model.mingpaiVec[t]));this._skin.box1.x=i.length>10?0:this.gap*(10-i.length)/2},s.updateState=function(e){i.prototype.updateState.call(this,e),1==this.state?this.down():this.model.isSelfSitDown?this.up():this.back()},s.reset=function(){this.updateState(!1),i.prototype.reset.call(this)},o(0,s,"seleCards",function(){var i=[],e=0;for(e=0;e<this._pockers.length;e++)1==this._pockers[e].visible&&1==this._pockers[e].select&&i.push(this._pockers[e].cardIdx);return i},function(i){var e=0,t=0,s=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].select=!1,this._pockers[e].visible&&(s=this._pockers[e].cardIdx,t=i.indexOf(s),-1!=t&&(this._pockers[e].select=!0,i.splice(t,1)))}),o(0,s,"canControl",null,function(i){t.superSet(le,this,"canControl",i)}),e}(le),ke=function(i){function e(i){this._oneCard=null,this._oneNum=null,this._skin=null,this._skin=i,e.__super.call(this,i)}n(e,"modules.sddzGame.sddzInerGame.view.pockerPart.singlePart.handlePart.OtherSingleHandlePart",i,"OtherSingleHandlePart$1");var t=e.prototype;return t.init=function(){var i=0,e=this._pockers.length;for(i=0;e>i;i++)this._pockers[i]=new ve(this._skin["card"+i]);this._oneCard=new ve(this._skin.card),this._oneNum=this._skin.numTxt},t.showCards=function(i,e){L.sortHandleCards(i);var t=this.model.getChairPosByDir(e);i=i.reverse(),this.updateState(this.model.mingpaiVec[t]);var s=0;if(1==this.state||this.model.isEnd){for(this._skin.backBox.visible=!1,this._skin.mingBox.visible=!0,this.hideAll(),s=0;s<i.length;s++)this._pockers[s].setCardImg(i[s]),this._pockers[s].show(),this._pockers[s].showDizhuImg(!1),s==i.length-1&&(t==this.model.dizhuPos&&this._pockers[s].showDizhuImg(!0),this._pockers[s].showMingImg(this.model.mingpaiVec[t]));this.down()}else 0==this.state&&(this._skin.backBox.visible=!0,this._skin.mingBox.visible=!1,this._oneCard.back(),this._oneCard.show(),this._oneNum.text=i.length+"",this.up())},t.reset=function(){this.updateState(!1),i.prototype.reset.call(this),this._oneCard.reset(),this._skin.mingBox.visible=!1,this._skin.backBox.visible=!1},e}(le),ye=function(i){function e(i){this._skin=null,this.gap=40,this._skin=i,e.__super.call(this,i)}n(e,"modules.sddzGame.sddzInerGame.view.pockerPart.singlePart.outputPart.BottomSingleOutputPart",i,"BottomSingleOutputPart$1");var t=e.prototype;return t.showCards=function(i){this.show(),i=L.sortOutputCards(i),this.hideAll(),this._skin.box.x=this.gap*(this._pockers.length-i.length)/2;var e=0;for(e=0;e<i.length;e++)this._pockers[e].setCardImg(i[e]),this._pockers[e].show()},e}(de),we=function(i){function e(i){this._skin=null,this._skin=i,e.__super.call(this,i)}n(e,"modules.sddzGame.sddzInerGame.view.pockerPart.singlePart.outputPart.LeftSingleOutputPart",i,"LeftSingleOutputPart$1");var t=e.prototype;return t.showCards=function(i){this.show(),i=L.sortOutputCards(i),this.hideAll();var e=0;for(e=0;e<i.length;e++)this._pockers[e].setCardImg(i[e]),this._pockers[e].show()},e}(de),be=function(i){function e(i){this.gap=40,this._skin=null,this._skin=i,e.__super.call(this,i)}n(e,"modules.sddzGame.sddzInerGame.view.pockerPart.singlePart.outputPart.RightSingleOutputPart",i,"RightSingleOutputPart$1");var t=e.prototype;return t.showCards=function(i){this.show(),i=L.sortOutputCards(i),this.hideAll();var e=0;for(e=0;e<i.length;e++)this._pockers[e].setCardImg(i[e]),this._pockers[e].show();this._skin.box0.x=i.length>6?0:this.gap*(6-i.length)},e}(de),Ae=function(i){function e(){e.__super.call(this)}return n(e,"modules.sddzGame.sddzInerGame.controller.RSddzGameController",i),e}(me),Ie=function(i){function e(){e.__super.call(this)}return n(e,"modules.sddzGame.sddzInerGame.model.RSddzModel",i),e}(pe),Be=function(i){function e(){this.tUid=null,this.dat=null,e.__super.call(this),this.on("click",this,this.onClick)}n(e,"modules.sddzGame.sddzInerGame.view.playerInfoPart.GiftItem",i,"GiftItem$2");var t=e.prototype;return t.setData=function(i,e){if(i){this.dat=i,this.tUid=e,this.img.disabled=e==E.uid||0==fe.instance.gameContext.model.isSelfSitDown?!0:!1,this.img.skin="ani/"+i.name+".png";var t=parseInt(i.price);this.costTf.color=t>E.Diamond?"#ff3d01":"#2dc509",this.costTf.text=i.price}},t.onClick=function(){if(this.tUid!=E.uid){if(0==fe.instance.gameContext.model.isSelfSitDown)return B.popMessage("围观用户禁止送礼物！"),void 0;ie.instance.hide(),console.log("送礼物咯：： id:"+this.dat.id+"  tUid:"+this.tUid);var i={id:this.dat.id,tUid:this.tUid};g.instance.event("SOCKET_SEND",I.getProtoMessage(410,i))}},e}(_),Se=function(i){function e(i,t,s){this._socketControl=null,void 0===i&&(i=""),e.__super.call(this,i,t,s)}n(e,"modules.sddzGame.context.GameMainContext",i,"GameMainContext$1");var t=e.prototype;return t.open=function(){i.prototype.open.call(this),null==this._socketControl&&(this._socketControl=new ge),this.addController(this.socketControl)},t.close=function(){i.prototype.close.call(this)},o(0,t,"socketControl",function(){return this._socketControl}),e}(m),ze=function(i){function e(i,t,s){this._view=null,this._controller=null,this._rcontroller=null,this._model=null,this._rmodel=null,void 0===i&&(i=""),e.__super.call(this,i,t,s)}n(e,"modules.sddzGame.sddzInerGame.context.SDdzGameContext",i);var t=e.prototype;return t.open=function(){i.prototype.open.call(this),this.initUI(),console.log("addView(sddz)////////////////"),this.addView(this._view),E.isReplay?(this.addController(this._rcontroller),this.addModel(this._rmodel)):(this.addController(this._controller),this.addModel(this._model)),console.log("sddzgamecontext UserData.roomtype::"+E.roomtype),this.setChairNum(3),D.swithMusic("game"),console.log("sddzGameContext open:::..."),console.log("注册了游戏内的消息！！！"),P.instance.continueQueue("MESSAGE_GAME"),g.instance.event("GameContextReady",null)},t.close=function(){i.prototype.close.call(this),T.stopMusic()},t.initUI=function(){this._view||(this._view=new _e),E.isReplay?(this._rcontroller||(this._rcontroller=new Ae),this._rmodel&&(this._rmodel=new Ie)):(this._controller||(this._controller=new me),this._model||(this._model=new pe))},t.setChairNum=function(i){E.isReplay?this._rmodel.chairNum=i:this._model.chairNum=i,this._view.setChairNmu(i)},o(0,t,"view",function(){return this._view}),o(0,t,"controller",function(){return E.isReplay?this._rcontroller:this._controller}),o(0,t,"model",function(){return E.isReplay?this._rmodel:this._model}),e}(m);t.__init([ie,X])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(i,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var t in Laya){var s=Laya[t];s&&s.__isclass&&(e[t]=s)}});