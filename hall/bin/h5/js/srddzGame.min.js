!function(e,i,t){var s=(t.un,t.uns,t.static),n=t.class,o=t.getset,a=t.__newvec,r=rb.framework.mvc.AbstractLayer,h=(ui.srddzGame.ddzPart.ActTipUI,laya.display.Animation,t.AppConfig),l=(laya.ui.Box,laya.utils.Browser),d=(laya.ui.Button,ui.srddzGame.CalculatePageUI,ui.srddzGame.calculate.item.CalculatePerItemUI,ui.srddzGame.calculate.CalculatePerPageUI,ui.srddzGame.calculate.CalculateRoundPageUI,modules.gameCommon.chat.Chat),c=(modules.gameCommon.chat.ChatPage,ui.srddzGame.ddzPart.ClockPartUI,common.CommonModule),u=laya.utils.Dictionary,f=(ui.srddzGame.ddzPart.DipaiPartUI,laya.events.Event,common.event.EventCenter),g=rb.framework.mvc.GameContext,m=ui.srddzGame.GameTableUI,p=ui.gameCommon.items.GiftItemUI,_=hall.HallModule,C=laya.utils.Handler,v=(laya.ui.Image,laya.ui.Label,rb.framework.mvc.core.LayerTypes,net.Message,manager.MessageManager),P=rb.framework.mvc.Module,k=t.ModuleDef,y=laya.ani.swf.MovieClip,w=modules.gameCommon.view.NewDissolvePage,b=(ui.srddzGame.ddzPart.handlePart.OtherHandlePartUI,ui.srddzGame.ddzPart.outputPart.OtherOutputPartUI,ui.srddzGame.ddzPart.handlePart.OwnerHandlePartUI,ui.srddzGame.ddzPart.outputPart.OwnerOutputPartUI,ui.gameCommon.PiaoSelePartUI,ui.srddzGame.ddzPart.PlayerCtlPartUI,ui.srddzGame.PlayerInfoPageUI,ui.srddzGame.ddzPart.item.PockerItemUI,ui.srddzGame.PockerPageUI),B=(common.view.PopBox,net.ProtoMessage),I=t.QuickUtils,A=hall.view.RecordView,S=modules.gameCommon.view.ReplayControlView,z=rb.framework.errors.SingletonError,x=laya.media.SoundManager,T=common.tools.SoundPlay,V=laya.display.Sprite,D=(laya.display.Stage,ui.srddzGame.TableInfoPageUI,manager.TextManager),R=manager.TimeManager,M=(ui.srddzGame.ddzPart.handlePart.TopHandlePartUI,laya.utils.Tween),G=manager.UIManager,N=t.UserData,O=ui.gameCommon.UserInfoUI,K=(laya.ui.View,t.WX),E=function(){function e(){this.length=0,this.type=0,this.bigValue=0}return n(e,"modules.srddzGame.srddzInerGame.model.data.FeijiData",null,"FeijiData$1"),e.getFeiji=function(i){if(i.danArr.length>0||i.fourArr.length>0||i.fiveArr.length>0||i.sixArr.length>0||i.sevenArr.length>0||i.eightArr.length>0)return null;var t=new F;return t.clone(i),e.getFeijiWithNoFour(t)},e.getFeijiWithNoFour=function(i){if(i.threeArr.length<2)return null;var t,s=F.checkValuelian(i.threeArr),n=!1,o=N.needOneTwo;if(s){if(0==i.twoArr.length&&i.threeArr.length>1)return t=new e,t.bigValue=i.threeArr[i.threeArr.length-1],t.length=i.threeArr.length,t.type=0,t;if(i.threeArr.length==i.twoArr.length){if(n=F.checkValuelian(i.twoArr),0==n&&o){var a=i.twoArr.concat();F.conversValueArr(a),n=F.checkValuelian(a)}if(n)return t=new e,t.bigValue=i.threeArr[i.threeArr.length-1],t.length=i.threeArr.length,t.type=1,t}}else if(o){var r=i.threeArr.concat();if(F.conversValueArr(r),s=F.checkValuelian(r)){if(0==i.twoArr.length&&r.length>1)return t=new e,t.bigValue=r[r.length-1],t.length=r.length,t.type=0,t;if(i.threeArr.length==i.twoArr.length){if(n=F.checkValuelian(i.twoArr),0==n&&o){var a=i.twoArr.concat();F.conversValueArr(a),n=F.checkValuelian(a)}if(n)return t=new e,t.bigValue=r[r.length-1],t.length=r.length,t.type=1,t}}}return null},e.FEIJI_NON=0,e.FEIJI_DAI=1,e}(),F=function(){function e(){this.valueArr=[],this.eightArr=[],this.sevenArr=[],this.sixArr=[],this.fiveArr=[],this.fourArr=[],this.threeArr=[],this.twoArr=[],this.danArr=[]}n(e,"modules.srddzGame.srddzInerGame.model.data.JishuArrData",null,"JishuArrData$2");var i=e.prototype;return i.clone=function(e){this.valueArr=e.valueArr.concat(),this.eightArr=e.eightArr.concat(),this.sevenArr=e.eightArr.concat(),this.sixArr=e.sixArr.concat(),this.fiveArr=e.fiveArr.concat(),this.fourArr=e.fourArr.concat(),this.threeArr=e.threeArr.concat(),this.twoArr=e.twoArr.concat(),this.danArr=e.danArr.concat()},e.getJishuArrData=function(i){var t=new e,s=[],n=0;for(n=0;n<i.length;n++)s.push(ei.getV(i[n]));console.log("检测的牌值：：",s),t.valueArr=s.concat();var o=0,a=0,r=0;for(n=0;n<s.length;n++){for(a=1,o=s[n],s.splice(n,1),n-=1,r=s.indexOf(o);-1!=r;)s.splice(r,1),a+=1,r=s.indexOf(o);switch(a){case 1:t.danArr.push(o);break;case 2:t.twoArr.push(o);break;case 3:t.threeArr.push(o);break;case 4:t.fourArr.push(o);break;case 5:t.fiveArr.push(o);break;case 6:t.sixArr.push(o);break;case 7:t.sevenArr.push(o);break;case 8:t.eightArr.push(o)}}return t},e.checkValuelian=function(e){var i=0,t=e.length;for(i=0;t-1>i;i++)if(e[i+1]-e[i]!=1)return!1;return!0},e.compValue=function(i){i.sort(e.compVFun)},e.compVFun=function(e,i){return e>i?1:(e=i)?0:-1},e.conversValueArr=function(i){var t=0,s=i.length;for(t=0;s>t;t++)14==i[t]?i[t]=1:16==i[t]&&(i[t]=2);i.sort(e.compCardsFun)},e.compCardsFun=function(e,i){if(0==e||0==i)return 0;var t=ei.getT(e),s=ei.getT(i),n=ei.getV(e),o=ei.getV(i);return n>o?1:n==o?t>s?1:-1:-1},e}(),U=function(){function e(){}return n(e,"modules.srddzGame.srddzInerGame.model.data.PaixingLogic",null,"PaixingLogic$2"),e.getPaixing=function(i,t,s){return void 0===s&&(s=!0),s&&i.sort(e.compCardsFun),null==t&&(t=F.getJishuArrData(i)),1==e.isDanzhang(i)?1:1==e.isDuizi(i)?2:1==e.isSan(i,t)?3:1==e.isSanEr(i,t)?4:101==ci.instance.gameContext.model.srddzMsgs.ACK_RoomInfo.Rule[3]&&1==e.isShunzi(i,t)?6:1==e.isLiandui(i,t)?5:1==e.isFeiji(i,t)?7:1==e.isZhadan(i)?8:1==e.isTianZha(i)?9:ei.PAIXING_NON},e.isDanzhang=function(e){return 1==e.length?!0:!1},e.isDuizi=function(e){return 2==e.length&&ei.getV(e[0])==ei.getV(e[1])?!0:!1},e.isSan=function(e,i){var t=e.length;return 3==t&&(null==i&&(i=F.getJishuArrData(e)),1==i.threeArr.length)?!0:!1},e.isSanEr=function(e,i){return 5==e.length&&(null==i&&(i=F.getJishuArrData(e)),1==i.threeArr.length&&1==i.twoArr.length)?!0:!1},e.isLiandui=function(e,i){var t=e.length;if(!(t>=6&&t%2==0))return!1;if(null==i&&(i=F.getJishuArrData(e)),0==i.fiveArr.length&&0==i.sixArr.length&&0==i.sevenArr.length&&0==i.eightArr.length&&0==i.fourArr.length&&0==i.threeArr.length&&i.twoArr.length>=3&&0==i.danArr.length){var s=!1;if(s=F.checkValuelian(i.twoArr),0==s&&N.needOneTwo){var n=i.twoArr.concat();F.conversValueArr(n),s=F.checkValuelian(n)}if(s)return!0}return!1},e.isShunzi=function(e,i){var t=e.length;if(5>t)return!1;if(null==i&&(i=F.getJishuArrData(e)),0==i.fiveArr.length&&0==i.sixArr.length&&0==i.sevenArr.length&&0==i.eightArr.length&&0==i.fourArr.length&&0==i.threeArr.length&&0==i.twoArr.length&&i.danArr.length>=5){var s=i.danArr.concat(),n=i.danArr.indexOf(16);if(-1!=n&&N.needOneTwo&&F.conversValueArr(s),1==F.checkValuelian(s))return!0}return!1},e.isFeiji=function(e,i){if(e.length<6)return!1;null==i&&(i=F.getJishuArrData(e));var t=E.getFeiji(i);return null!=t?!0:!1},e.isZhadan=function(e){if(e.length<4)return!1;var i=0,t=e.length;for(i=0;t-1>i;i++)if(ei.getV(e[i+1])!=ei.getV(e[i]))return!1;return!0},e.isTianZha=function(e){if(4==e.length){for(var i=0;i<e.length;i++)if(5!=ei.getT(e[i]))return!1;return!0}return!1},e.compCardsFun=function(e,i){if(0==e||0==i)return 0;var t=ei.getT(e),s=ei.getT(i),n=ei.getV(e),o=ei.getV(i);return n>o?1:n==o?t>s?1:-1:-1},e.getBigThanWBaodao=function(i,t){var s=[];i.sort(e.compCardsFun),t.sort(e.compCardsFun);var n=F.getJishuArrData(i),o=F.getJishuArrData(t),a=e.getPaixing(t,o,!1),r=0,h=[],l=[];if(8!=a&&9!=a)if(n.sevenArr.length>0){for(r=0;7>r;r++)h.push(n.sevenArr[0]);s=e.getCardsFromValues(i,h)}else if(n.eightArr.length>0){for(r=0;8>r;r++)h.push(n.eightArr[0]);s=e.getCardsFromValues(i,h)}else 1==e.checkHaveTianZha(n)&&(s=[551,551,552,552]);else if(9!=a)if(o.valueArr.length<7)if(n.sevenArr.length>0){for(r=0;7>r;r++)h.push(n.sevenArr[0]);s=e.getCardsFromValues(i,h)}else if(n.eightArr.length>0){for(r=0;8>r;r++)h.push(n.eightArr[0]);s=e.getCardsFromValues(i,h)}else 1==e.checkHaveTianZha(n)&&(s=[551,551,552,552]);else{if(l=e.getBiggerZhaDan(n,o.valueArr[0],o.valueArr.length),l.length>0)return s=e.getCardsFromValues(i,l);1==e.checkHaveTianZha(n)&&(s=[551,551,552,552])}return s},e.getBigThan=function(i,t){var s=[];if(0==t.length)return s.push(i[0]),s;i.sort(e.compCardsFun),t.sort(e.compCardsFun);var n,o,a=F.getJishuArrData(t),r=e.getPaixing(t,a,!1),h=F.getJishuArrData(i),l=0,d=0,c=0,u=0;switch(r){case ei.PAIXING_NON:return alert("打出的牌型不合法！"),s;case 1:for(l=a.danArr[0],d=0;d<h.danArr.length;d++)if(h.danArr[d]>l)return s=e.getCardsFromValues(i,[h.danArr[d]]);for(d=0;d<h.twoArr.length;d++)if(h.twoArr[d]>l)return s=e.getCardsFromValues(i,[h.twoArr[d]]);for(d=0;d<h.threeArr.length;d++)if(h.threeArr[d]>l)return s=e.getCardsFromValues(i,[h.threeArr[d]]);return o=e.getBiggerZhaDan(h),o.length>0?s=e.getCardsFromValues(i,o):s;case 2:for(l=a.twoArr[0],d=0;d<h.twoArr.length;d++)if(h.twoArr[d]>l)return s=e.getCardsFromValues(i,[h.twoArr[d],h.twoArr[d]]);for(d=0;d<h.threeArr.length;d++)if(h.threeArr[d]>l)return s=e.getCardsFromValues(i,[h.threeArr[d],h.threeArr[d]]);return o=e.getBiggerZhaDan(h),o.length>0?s=e.getCardsFromValues(i,o):s;case 3:for(l=a.threeArr[0],d=0;d<h.threeArr.length;d++)if(h.threeArr[d]>l)return s=e.getCardsFromValues(i,[h.threeArr[d],h.threeArr[d],h.threeArr[d]]);return o=e.getBiggerZhaDan(h),o.length>0?s=e.getCardsFromValues(i,o):(1==e.checkHaveTianZha(h)&&(s=[551,551,552,552]),s);case 4:for(l=a.threeArr[0],d=0;d<h.threeArr.length;d++)if(h.threeArr[d]>l){if(h.twoArr.length>0)return s=e.getCardsFromValues(i,[h.threeArr[d],h.threeArr[d],h.threeArr[d],h.twoArr[0],h.twoArr[0]]);if(h.threeArr.length>1)return s=0==d?e.getCardsFromValues(i,[h.threeArr[d],h.threeArr[d],h.threeArr[d],h.threeArr[1],h.threeArr[1]]):e.getCardsFromValues(i,[h.threeArr[d],h.threeArr[d],h.threeArr[d],h.threeArr[0],h.threeArr[0]])}return o=e.getBiggerZhaDan(h),o.length>0?s=e.getCardsFromValues(i,o):(1==e.checkHaveTianZha(h)&&(s=[551,551,552,552]),s);case 5:var f=a.twoArr.concat();N.needOneTwo&&-1!=f.indexOf(16)&&F.conversValueArr(f),l=f[f.length-1],u=f.length;var g=[];g=g.concat(h.threeArr),g=g.concat(h.twoArr),g.sort(e.compCardsFun);var m=g.concat();for(d=0;d<g.length;d++)g[d]<l-(u-2)&&(g.splice(d,1),d--);if(g.length>=u&&(n=e.getFromVlauesLenThan(g,u),null!=n&&n.length>0))return n=n.concat(n),n.sort(e.compCardsFun),s=e.getCardsFromValues(i,n.reverse());if(N.needOneTwo){for(_=m.concat(),F.conversValueArr(g),d=0;d<g.length;d++)g[d]<l-(u-2)&&(g.splice(d,1),d--);if(g.length>=u&&(n=e.getFromVlauesLenThan(g,u),null!=n&&n.length>0))return n=n.concat(n),n.sort(e.compCardsFun),s=e.getCardsFromValues(i,n.reverse())}return o=e.getBiggerZhaDan(h),o.length>0?s=e.getCardsFromValues(i,o):(1==e.checkHaveTianZha(h)&&(s=[551,551,552,552]),s);case 6:var p=a.danArr.concat();N.needOneTwo&&-1!=p.indexOf(16)&&F.conversValueArr(p),l=p[p.length-1],u=p.length;var _=[];_=_.concat(h.threeArr),_=_.concat(h.twoArr),_=_.concat(h.danArr),_.sort(e.compCardsFun);var C=_.concat();for(d=0;d<_.length;d++)_[d]<l-(u-2)&&(_.splice(d,1),d--);if(_.length>=u&&(n=e.getFromVlauesLenThan(_,u),null!=n&&n.length>0))return s=e.getCardsFromValues(i,n.reverse());if(N.needOneTwo){for(_=C.concat(),F.conversValueArr(_),d=0;d<_.length;d++)_[d]<l-(u-2)&&(_.splice(d,1),d--);if(_.length>=u&&(n=e.getFromVlauesLenThan(_,u),null!=n&&n.length>0))return s=e.getCardsFromValues(i,n.reverse())}return o=e.getBiggerZhaDan(h),o.length>0?s=e.getCardsFromValues(i,o):(1==e.checkHaveTianZha(h)&&(s=[551,551,552,552]),s);case 7:var v=E.getFeiji(a);if(null==v)return s;var P=h.threeArr.concat(),k=[];for(d=0;d<P.length;d++)P[d]<v.bigValue-(v.length-2)&&(k.push(P[d]),P.splice(d,1),d--);if(P.length>=v.length){n=e.getFromVlauesLenThan(P,v.length);var y=n.concat();for(d=0;d<P.length;d++)c=y.indexOf(P[d]),-1!=c&&(y.splice(c,1),P.splice(d,1),d--);if(k=k.concat(P),null!=n&&n.length>=v.length)switch(v.type){case 0:return n=n.concat(n).concat(n),n.sort(e.compCardsFun),s=e.getCardsFromValues(i,n);case 1:if(v.length<=k.length+h.twoArr.length){n=n.concat(n).concat(n),n.sort(e.compCardsFun);var w=k.concat(h.twoArr);w.some(e.compCardsFun);var b=e.getFromVlauesLenThan(w,v.length);if(null!=b&&b.length>=v.length)b=b.concat(b),b.sort(e.compCardsFun),s=e.getCardsFromValues(i,n.concat(b));else if(N.needOneTwo){n=n.concat(n).concat(n),n.sort(e.compCardsFun);var w=k.concat(h.twoArr);F.conversValueArr(w);var b=e.getFromVlauesLenThan(w,v.length);null!=b&&b.length>=v.length&&(b=b.concat(b),b.sort(e.compCardsFun),s=e.getCardsFromValues(i,n.concat(b)))}}}}else if(N.needOneTwo){var P=h.threeArr.concat();F.conversValueArr(P);var k=[];for(d=0;d<P.length;d++)P[d]<v.bigValue-(v.length-2)&&(k.push(P[d]),P.splice(d,1),d--);if(P.length>=v.length){n=e.getFromVlauesLenThan(P,v.length);var y=n.concat();for(d=0;d<P.length;d++)c=y.indexOf(P[d]),-1!=c&&(y.splice(c,1),P.splice(d,1),d--);if(k=k.concat(P),null!=n&&n.length>=v.length)switch(v.type){case 0:return n=n.concat(n).concat(n),n.sort(e.compCardsFun),s=e.getCardsFromValues(i,n);case 1:if(v.length<=k.length+h.twoArr.length){n=n.concat(n).concat(n),n.sort(e.compCardsFun);var w=k.concat(h.twoArr);w.some(e.compCardsFun);var b=e.getFromVlauesLenThan(w,v.length);if(null!=b&&b.length>=v.length)b=b.concat(b),b.sort(e.compCardsFun),s=e.getCardsFromValues(i,n.concat(b));else if(N.needOneTwo){n=n.concat(n).concat(n),n.sort(e.compCardsFun);var w=k.concat(h.twoArr);F.conversValueArr(w);var b=e.getFromVlauesLenThan(w,v.length);null!=b&&b.length>=v.length&&(b=b.concat(b),b.sort(e.compCardsFun),s=e.getCardsFromValues(i,n.concat(b)))}}}}}return o=e.getBiggerZhaDan(h),o.length>0?s=e.getCardsFromValues(i,o):(1==e.checkHaveTianZha(h)&&(s=[551,551,552,552]),s);case 8:return o=e.getBiggerZhaDan(h,a.valueArr[0],a.valueArr.length),o.length>0?s=e.getCardsFromValues(i,o):(1==e.checkHaveTianZha(h)&&(s=[551,551,552,552]),s);case 9:return s}return s},e.getCardsFromValues=function(e,i){var t=[],s=e.concat(),n=0,o=0;for(n=0;n<i.length;n++)for(o=0;o<s.length;o++)if(ei.getV(s[o])==i[n]||ei.getVShang(s[o])==i[n]){t.push(s[o]),s.splice(o,1);break}return t},e.getBiggerZhaDan=function(e,i,t){void 0===i&&(i=-1),void 0===t&&(t=4);var s=[];if(4>t)return s;var n=0,o=0;if(8>=t){if(7>=t){if(6>=t){if(5>=t){if(4==t)if(-1!=i){for(n=0;n<e.fourArr.length;n++)if(e.fourArr[n]>i){for(o=0;4>o;o++)s.push(e.fourArr[n]);return s}}else if(e.fourArr.length>0){for(n=0;4>n;n++)s.push(e.fourArr[0]);return s}if(5==t&&-1!=i){for(n=0;n<e.fiveArr.length;n++)if(e.fiveArr[n]>i){for(o=0;5>o;o++)s.push(e.fiveArr[n]);return s}}else if(e.fiveArr.length>0){for(n=0;5>n;n++)s.push(e.fiveArr[0]);return s}}if(6==t&&-1!=i){for(n=0;n<e.sixArr.length;n++)if(e.sixArr[n]>i){for(o=0;6>o;o++)s.push(e.sixArr[n]);return s}}else if(e.sixArr.length>0){for(n=0;6>n;n++)s.push(e.sixArr[0]);return s}}if(7==t&&-1!=i){for(n=0;n<e.sevenArr.length;n++)if(e.sevenArr[n]>i){for(o=0;7>o;o++)s.push(e.sevenArr[n]);return s}}else if(e.sevenArr.length>0){for(n=0;7>n;n++)s.push(e.sevenArr[0]);return s}}if(8==t&&-1!=i){for(n=0;n<e.eightArr.length;n++)if(e.eightArr[n]>i){for(o=0;8>o;o++)s.push(e.eightArr[n]);return s}}else if(e.eightArr.length>0){for(n=0;8>n;n++)s.push(e.eightArr[0]);return s}}return s},e.checkHaveTianZha=function(e){var i=e.twoArr,t=i.indexOf(51),s=i.indexOf(52);return-1!=t&&-1!=s?!0:!1},e.getFromVlauesLenThan=function(e,i){var t=[],s=0,n=0;for(s=0;s<e.length-1&&(e[s+1]==e[s]+1?0==n?(t.push(e[s],e[s+1]),n+=2):(t.push(e[s+1]),n+=1):(n=0,t=[]),n!=i);s++);return t.length<i&&(t.length=0),t},e.sortHandleCards=function(i){i.sort(e.compCardsFun)},e.sortOutputCards=function(i){var t;e.sortHandleCards(i);var s=F.getJishuArrData(i),n=e.getPaixing(i),o=[],a=0;switch(n){case 6:N.needOneTwo&&-1!=s.danArr.indexOf(16)&&(F.conversValueArr(s.danArr),i=e.getCardsFromValues(i,s.danArr));break;case 5:if(N.needOneTwo&&-1!=s.twoArr.indexOf(16)){for(F.conversValueArr(s.twoArr),a=0;a<s.twoArr.length;a++)o.push(s.twoArr[a],s.twoArr[a]);i=e.getCardsFromValues(i,o)}break;case 4:o=[s.threeArr[0],s.threeArr[0],s.threeArr[0],s.twoArr[0],s.twoArr[0]],i=e.getCardsFromValues(i,o);break;case 7:for(N.needOneTwo&&(-1!=s.threeArr.indexOf(16)&&F.conversValueArr(s.threeArr),-1!=s.twoArr.indexOf(16)&&F.conversValueArr(s.twoArr)),o.length=0,a=0;a<s.threeArr.length;a++)o.push(s.threeArr[a],s.threeArr[a],s.threeArr[a]);for(a=0;a<s.twoArr.length;a++)o.push(s.twoArr[a],s.twoArr[a]);i=e.getCardsFromValues(i,o)}return t=i.concat()},e.getBaodaoNum=function(i,t,s){void 0===s&&(s=!0),s&&i.sort(e.compCardsFun),null==t&&(t=F.getJishuArrData(i));var n=t.eightArr.length+t.sevenArr.length;return 1==e.checkHaveTianZha(t)&&(n+=1),n},e.getBaodaoCards=function(i,t,s){void 0===s&&(s=!0);var n=[],o=[];s&&i.sort(e.compCardsFun),null==t&&(t=F.getJishuArrData(i));var a=0,r=0;if(t.eightArr.length>0)for(a=0;a<t.eightArr.length;a++)for(r=0;8>r;r++)o.push(t.eightArr[a]);if(t.sevenArr.length>0)for(a=0;a<t.sevenArr.length;a++)for(r=0;7>r;r++)o.push(t.sevenArr[a]);return 1==e.checkHaveTianZha(t)&&o.push(51,51,52,52),n=e.getCardsFromValues(i,o)},e.cutArrInArr=function(e,i){var t=e.concat(),s=0,n=0;for(s=0;s<i.length;s++)n=t.indexOf(i[s]),-1!=n&&(i.splice(s,1),s--,t.splice(n,1))},e}(),L=function(){function e(){this.ACKBC_Into_Room=null,this.ACK_RoomInfo=null,this.ACK_Room_User=null,this.ACKBC_CurPlayer=null,this.ACKBC_Sitdown=null,this.ACKBC_Standup=null,this.ACKBC_Ready=null,this.ACKBC_Exit_Room=null,this.NotifyStartGame=null,this.MSG_NOTIFY_SUMMARY=null,this.AckDisband=null,this.NotifyDisband=null,this.NotifyUserState=null,this.ACKBC_Sddz_Start=null,this.ACK_User_SeatCard=null,this.ACKBC_Sddz_Chupai=null,this.ACKBC_Sddz_End=null,this.ACKBC_Sddz_Total=null,this.ACKBC_Sddz_Card_Init=null,this.ACKBC_Sddz_JiaoDizhu=null,this.ACKBC_Sddz_Jiaofen=null,this.ACKBC_Sddz_Dizhu=null,this.ACKBC_Sddz_Mingpai=null,this.ACKBC_Sddz_Jiabei=null,this.ACKBC_Sddz_Pass=null,this.ACKBC_Srddz_Baodao=null,this.ACKBC_Srddz_StrictWin=null}return n(e,"modules.srddzGame.srddzInerGame.model.SrddzMsgs"),e}(),H=function(){function e(e){this._skin=null,this._items=a(4,null),this._skin=e;var i=0,t=this._items.length;for(i=0;t>i;i++)this._items[i]=new W(this._skin["item"+i]);this._skin.hideBtn.on("click",this,this.onClickHideBtn),this._skin.readyBtn.on("click",this,this.onClickReadyBtn),this._skin.confirmBtn.on("click",this,this.onClickConfirmBtn),this._skin.closeBtn.on("click",this,this.onClickCloseBtn),this.reset()}n(e,"modules.srddzGame.srddzInerGame.view.calculate.CalculatePerPart",null,"CalculatePerPart$2");var i=e.prototype;return i.getPiaoSelePart=function(){return null},i.onClickHideBtn=function(){this._skin.visible=!1,this.view.calculatePage.showPerShowBtn()},i.onClickReadyBtn=function(){var e={sid:N.SID};this.controller.sendMsgCommond(B.getProtoMessage(210,e)),this.hide()},i.onClickConfirmBtn=function(){console.log("点击了确定按钮，要跳到总的结算界面啦"),this.view.calculatePage.reset(),this.onConfirmEnd(0)},i.onConfirmEnd=function(e){0==e?h.isNewHall?I.gotoHall(1):(this.controller.endGameGotoHall(),t.timer.callLater(this,this.gotoReport)):h.isNewHall?I.gotoHall():this.controller.endGameGotoHall()},i.gotoReport=function(){_.instance.hallContext.hallView.hallLayer.onRecord({uniqueCode:N.uniqueCode})},i.onClickCloseBtn=function(){this.hide()},i.timeOver=function(){this._skin.visible=!0,this._skin.readyBtn.visible=!1,this._skin.confirmBtn.visible=!1,this._skin.readyImg.visible=!1,this._skin.closeBtn.visible=!1,this._skin.confirmBtn.visible=this.model.isSelfSitDown?!0:!0},i.hideReadyBtn=function(){},i.updateBtns=function(){if(this._skin.hideBtn.alpha=N.isReplay?0:1,0==this.isShow||N.isReplay)return this._skin.readyImg.visible=!1,this._skin.readyBtn.visible=!1,this._skin.confirmBtn.visible=!1,void 0;if(this._skin.readyBtn.visible=!1,this._skin.confirmBtn.visible=!1,this._skin.readyImg.visible=!1,this._skin.closeBtn.visible=!1,this.model.isSelfSitDown){if(void 0==this.model.srddzMsgs.ACKBC_Sddz_Total.Finished&&(this.model.srddzMsgs.ACKBC_Sddz_Total.Finished=!1),1==this.model.srddzMsgs.ACKBC_Sddz_Total.Finished)this._skin.confirmBtn.visible=!0,h.autoPlay&&this.onClickConfirmBtn(null);else if(this._skin.readyBtn.visible=!0,this._skin.readyImg.visible=!0,h.autoPlay){var e=this.model.srddzMsgs.ACKBC_Sddz_Total;e.List[0].Score+e.List[1].Score+e.List[2].Score==0&&this.onClickReadyBtn(null)}}else 1==this.model.srddzMsgs.ACKBC_Sddz_Total.Finished?this._skin.confirmBtn.visible=!0:this._skin.closeBtn.visible=!0},i.show=function(){this._skin.visible=!0,this.updateBtns();var e=this.model.srddzMsgs.ACKBC_Sddz_Total,i=0;if(this.model.isLiu)for(i=0;i<this._items.length;i++)this._items[i].update(i,null,this.model.isLiu);else{var t;for(i=0;i<this._items.length;i++)this._items[i].update(i,e.List[i],this.model.isLiu),t=this.model.playerByPos(i),1==N.Rule[4]&&(t.Coin=void 0!=e.List[i].TotalScore?e.List[i].TotalScore:0),t.score=void 0!=e.List[i].TotalScore?e.List[i].TotalScore:0,console.log("player.score::"+t.score);this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec,!1),this.view.playerInfoPage.updateJiabei()}},i.reset=function(){var e=0,i=this._items.length;for(e=0;i>e;e++)this._items[e].reset();this._skin.visible=!1},i.hide=function(){this._skin.visible=!1},o(0,i,"isShow",function(){return this._skin.visible}),o(0,i,"model",function(){return ci.instance.gameContext.model}),o(0,i,"controller",function(){return ci.instance.gameContext.controller}),o(0,i,"view",function(){return ci.instance.gameContext.view}),e}(),j=function(){function e(e){this._skin=null,this._skin=e,this.reset()}n(e,"modules.srddzGame.srddzInerGame.view.calculate.CalculateRoundPart",null,"CalculateRoundPart$2");var i=e.prototype;return i.onClickShareBtn=function(){},i.onClickBackBtn=function(){h.isNewHall?I.gotoHall():ci.instance.gameContext.controller.endGameGotoHall()},i.show=function(){},i.showGetTicketNum=function(){},i.hide=function(){this._skin.visible=!1},i.reset=function(){this._skin.visible=!1},o(0,i,"model",function(){return ci.instance.gameContext.model}),o(0,i,"view",function(){return ci.instance.gameContext.view}),e}(),W=function(){function e(e){this._skin=null,this.headImg=null,this.headw=0,this.headh=0,this._skin=e,this.init()}n(e,"modules.srddzGame.srddzInerGame.view.calculate.item.CalculatePerItem",null,"CalculatePerItem$2");var i=e.prototype;return i.init=function(){this.headImg=this._skin.headImg,this.headw=this.headImg.width,this.headh=this.headImg.height},i.update=function(e,i,t){void 0===t&&(t=!1);var s=this.model.playerByPos(e);if(null==s&&(s=this.model.playerByUid(this.model.beKickedPlayer[e])),null==s)this._skin.visible=!1;else if(this._skin.visible=!0,this._skin.nameTf.text=s.nickname,""!=s.Icon){var n=new V;n.loadImage(s.Icon,0,0,this.headw,this.headh),this.headImg.addChild(n)}return e==this.model.dizhuPos?(this._skin.dizhuImg.visible=!0,this._skin.directImg.visible=i?this.model.isSeleStrictWin:!1):(this._skin.dizhuImg.visible=!1,this._skin.directImg.visible=!1),t?(this._skin.difenTf.text="0",this._skin.beishuTf.text="0",this._skin.zongfenTf.font=D.NumberYellowFont,this._skin.zongfenTf.text="0",this._skin.directImg.visible=!1,void 0):(i&&(this._skin.difenTf.text=void 0!=i.Difen?""+i.Difen:"0",this._skin.beishuTf.text=void 0!=i.Beishu?""+i.Beishu:"0",void 0==i.Score&&(i.Score=0),i.Score>0?(this._skin.zongfenTf.font=D.NumberYellowFont,this._skin.zongfenTf.text="+"+s.zongchengji,this._skin.zongfenTf.text="+"+i.Score):(this._skin.zongfenTf.font=D.NumberBlueFont,this._skin.zongfenTf.text=i.Score)),void 0)},i.reset=function(){},o(0,i,"model",function(){return ci.instance.gameContext.model}),e}(),J=function(){function e(e){this._perPage=null,this._roundPage=null,this._skin=null,this._skin=e,this._perPage=new H(this._skin.perPage),this._roundPage=new j(this._skin.roundPage),this.reset(),this._skin.showBtn.on("click",this,this.showPerCal)}n(e,"modules.srddzGame.srddzInerGame.view.CalculatePage",null,"CalculatePage$2");var i=e.prototype;return i.showPerShowBtn=function(){this._skin.showBtn.visible=!0},i.showPerCal=function(){this._skin.perPage.visible=!0,this._skin.showBtn.visible=!1},i.reset=function(){this._skin.visible=!1,this._skin.showBtn.visible=!1,this._perPage.reset(),this._roundPage.reset()},i.showGetTicket=function(){},i.show=function(){N.isReplay&&this.view.replayControlView.moveCalculate(),this._perPage.reset(),this._roundPage.reset(),this._skin.visible=!0,this._perPage.show(),c.instance.commonContext.view.timeWarView.hide()},i.gameTimeOver=function(){this._perPage.timeOver()},o(0,i,"perPage",function(){return this._perPage}),o(0,i,"view",function(){return ci.instance.gameContext.view}),o(0,i,"roundPage",function(){return this._roundPage}),o(0,i,"model",function(){return ci.instance.gameContext.model}),e}(),Z=function(){function e(e){this._skin=null,this._bottom=null,this._right=null,this._top=null,this._left=null,this._PiaoSelePart=null,this._PosChairVec=[],this._skin=e,this._skin.mouseThrough=!0,this._bottom=new $(this._skin.playerInfo0),this._right=new $(this._skin.playerInfo1),this._top=new $(this._skin.playerInfo2),this._left=new $(this._skin.playerInfo3),this._PiaoSelePart=new Y(this._skin.piaoPart),this._skin.startBtn.visible=!1,this._skin.leaveBtn.visible=!1,this._skin.disbandBtn.visible=!1,this._skin.startBtn.on("click",this,this.onClickStartBtn),this._skin.inviteBtn.on("click",this,this.onClickInviteBtn),this._skin.leaveBtn.on("click",this,this.onClickLeaveBtn),this._skin.disbandBtn.on("click",this,this.onClickDisbandBtn),this.allReset()}n(e,"modules.srddzGame.srddzInerGame.view.PlayerInfoPage",null,"PlayerInfoPage$3");var i=e.prototype;return i.onClickStartBtn=function(){var e={SID:N.SID};this.controller.sendMsgCommond(B.getProtoMessage(220,e))},i.onClickInviteBtn=function(){c.instance.commonContext.view.gameShareView.show()},i.onClickLeaveBtn=function(){var e={sid:N.SID};this.controller.sendMsgCommond(B.getProtoMessage(190,e),!1)},i.onClickDisbandBtn=function(){if(0==this.model.gameHasStarted){var e={sid:N.SID};this.controller.sendMsgCommond(B.getProtoMessage(151,e),!1)}else{var i={roomId:N.roomid};f.instance.event("SOCKET_SEND",B.getProtoMessage(400,i))}},i.updateLeaveDisbandBtns=function(){this._skin.leaveBtn.visible=!1,this._skin.disbandBtn.visible=!1,0==this.model.gameHasStarted?N.selfuid==this.model.roomOwnerUid?this._skin.disbandBtn.visible=!0:this._skin.leaveBtn.visible=!0:this._skin.disbandBtn.visible=!0},i.showStartBtn=function(e){void 0===e&&(e=!0),this._skin.startBtn.visible=e},i.hideBtnsByGameStart=function(){this._skin.startBtn.visible=!1,this._skin.inviteBtn.visible=!1,this._PiaoSelePart.hide()},i.updateStartBtn=function(){this._skin.startBtn.visible=!1},i.updateSitDownUpBtn=function(e){void 0===e&&(e=!0),e?this.model.isSelfSitDown&&0==this.model.isGameStart?c.instance.commonContext.view.functionOption.onClickBtn(!0):c.instance.commonContext.view.functionOption.onClickBtn(!0):this.model.isSelfSitDown?c.instance.commonContext.view.functionOption.onClickBtn(!0):c.instance.commonContext.view.functionOption.onClickBtn(!0)},i.showDizhuNM=function(){var e=0,i=this._PosChairVec.length;for(e=0;i>e;e++)this._PosChairVec[e].showDizhuNM(this.model.getChairPosByDir(e))},i.updateJiabei=function(){var e=0,i=this._PosChairVec.length;for(e=0;i>e;e++)this._PosChairVec[e].updateJiabei(this.model.getChairPosByDir(e))},i.hideDizhuNM=function(){var e=0,i=this._PosChairVec.length;for(e=0;i>e;e++)this._PosChairVec[e].hideDizhuNM()},i.hideReadyBtn=function(){},i.allReset=function(){this._bottom.reset(),this._right.reset(),this._top.reset(),this._left.reset(),this._PiaoSelePart.reset()},i.setChairNum=function(e){switch(void 0===e&&(e=4),this._PosChairVec.length=0,console.log("playerinfo setChairNum::"+e),e){case 4:this._PosChairVec.push(this._bottom,this._right,this._top,this._left),this._bottom.dir=0,this._right.dir=1,this._top.dir=2,this._left.dir=3;break;default:this._PosChairVec.push(this._bottom,this._right,this._top,this._left),this._bottom.dir=0,this._right.dir=1,this._top.dir=2,this._left.dir=3}this.bigReset()},i.bigReset=function(){this._skin.startBtn.visible=!1,this._skin.inviteBtn.visible=!0},i.reset=function(){var e=0,i=this._PosChairVec.length;for(e=0;i>e;e++)this._PosChairVec[e].reset();this.updateSitDownUpBtn()},i.havePiaoReset=function(){var e=0,i=this._PosChairVec.length;for(e=0;i>e;e++)this._PosChairVec[e].reset(!0);this._PiaoSelePart.reset()},i.resetOnePos=function(e){var i=this.model.getChairDirByPos(e);this._PosChairVec[i].reset()},i.hideReadySimbol=function(){var e=0,i=this._PosChairVec.length;for(e=0;i>e;e++)this._PosChairVec[e].hideReadySimbol()},i.showVoice=function(e){var i=this.model.getPlayerPosByUid(e),t=this.model.getChairDirByPos(i);console.log(t),-1==t?(this._skin.laba.visible=!0,this._skin.labaTip.play()):(this._PosChairVec[t].voice.visible=!0,this._PosChairVec[t].voice.ani.play())},i.hideVoice=function(e){var i=this.model.getPlayerPosByUid(e),t=this.model.getChairDirByPos(i);-1==t?(this._skin.laba.visible=!1,this._skin.labaTip.stop()):(this._PosChairVec[t].voice.visible=!1,this._PosChairVec[t].voice.ani.stop())},i.showReady=function(e){var i=this.model.getChairDirByPos(e);this._PosChairVec[i].showReady()},i.updateOnePlayerInfo=function(e,i){if(void 0===i&&(i=!1),-1!=e.pos){var t=this.model.getChairDirByPos(e.pos);t<this._PosChairVec.length&&this._PosChairVec[t].update(e,i)}},i.updateOnePlayerGolds=function(e){var i=this.model.getChairDirByPos(e.pos);i<this._PosChairVec.length&&(console.log("   updateOnePlayerInfo ::"+i+" obj.pos::"+e.pos),this._PosChairVec[i].updateGolds(e))},i.updatePlayerInfos=function(e,i,t){void 0===i&&(i=!0),void 0===t&&(t=!1),console.log("updatePlayerInfos ::"+e.length),this.reset(),i&&this._PiaoSelePart.reset();var s=0,n=e.length;for(s=0;n>s;s++)e[s]&&(console.log("updatePlayerInfos i::"+s),this.updateOnePlayerInfo(e[s],t))},i.updateHua=function(e){if(-1!=e){var i=this.model.getChairDirByPos(e);this._PosChairVec[i].updateHua(e)}},i.updateGolds=function(e){console.log("updatePlayerInfos ::"+e.length),console.log(e);var i=0,t=e.length;for(i=0;t>i;i++)e[i]&&(console.log("updatePlayerInfos i::"+i),this.updateOnePlayerGolds(e[i]))},i.updateTingImg=function(e){var i=this.model.getChairDirByPos(e);this._PosChairVec[i].showTingImg()},i.updateTirenBtn=function(){var e=0,i=this._PosChairVec.length;for(e=0;i>e;e++)this._PosChairVec[e].updateTirenBtn()},i.showExpress=function(e,i){this._PosChairVec[e].showExpress(i)},i.setGrayhead=function(e,i,t,s){this._PosChairVec[e].setHeadGray(i,t,s)},o(0,i,"model",function(){return ci.instance.gameContext.model}),o(0,i,"controller",function(){return ci.instance.gameContext.controller}),e}(),$=function(){function e(e){this.needPiao=!1,this._skin=null,this.zhenghuaBox=null,this.yehuaBox=null,this.huaTf_z=null,this.huaTf_y=null,this.huaImg_z=null,this.huaImg_y=null,this.headImg=null,this.nameTf=null,this.recordTf=null,this.readyImg=null,this.tingpaiImg=null,this.gangEff=null,this.tirenBtn=null,this.sitDownBtn=null,this.offlineTf=null,this.fenshuTf=null,this.voice=null,this.headw=0,this.headh=0,this.dir=0,this.expressImg=null,this.expressMov=null,this.expressUrl="res/swfs/Emoticon_",this.piaoImg=null,this.playingPiaoImg=null,this.offlineimg=null,this.gangAni=null,this._skin=e,this.init()}n(e,"modules.srddzGame.srddzInerGame.view.playerInfoPart.BasePlayerInfoItem",null,"BasePlayerInfoItem$3");var i=e.prototype;return i.init=function(){this._skin.mouseThrough=!0,this._skin.haveBox.mouseThrough=!0,this.zhenghuaBox=this._skin.zhenghuaBox,this.yehuaBox=this._skin.yehuaBox,this.huaTf_z=this._skin.huaTf_z,this.huaTf_y=this._skin.huaTf_y,this.huaImg_z=this._skin.huaZhenhua,this.huaImg_y=this._skin.huaYehua,this.zhenghuaBox.visible=!1,this.yehuaBox.visible=!1,this.huaTf_z.visible=!0,this.huaTf_y.visible=!0,this.huaImg_y.visible=!1,this.huaImg_z.visible=!0,this.offlineTf=this._skin.offlineTf,this.offlineTf.overflow="visible",this.piaoImg=this._skin.piaoImg,this.playingPiaoImg=this._skin.playingPiaoImg,this.headImg=this._skin.headImg,this.nameTf=this._skin.nameTf,this.recordTf=this._skin.recordTf,this.readyImg=this._skin.readyImg,this.voice=this._skin.voice,this.tingpaiImg=this._skin.mingpaiPic,this.gangEff=this._skin.gangEff,this.fenshuTf=this._skin.fenshuTf,this.tirenBtn=this._skin.tirenBtn,this.expressImg=this._skin.express,this.offlineimg=this._skin.offline,this.sitDownBtn=this._skin.sitdownBtn,this.tirenBtn.visible=!1,this.voice.visible=!1,this.offlineimg.visible=!1,this.headw=this.headImg.width,this.headh=this.headImg.height,this.loadGangEff(),this.loadExpressMov(),this.tirenBtn.on("click",this,this.onClickTiren),this.sitDownBtn.on("click",this,this.onClickSitdown)
},i.onClickSitdown=function(){if(N.isCanSitdown){if(this.model.isSelfSitDown)return this.onConFirm(0),void 0;if(this.model.srddzMsgs.ACK_RoomInfo.RoundCount>0)return I.popMessage("接替之前的玩家进行游戏不收费，祝您游戏愉快！"),this.onConFirm(0),void 0;var e=this.model.srddzMsgs.ACK_RoomInfo,i=e.Rule,t=h.getRule(i[1]),s="";s=0==t.type?"局数":"时间";var n="本游戏工具为收费软件，按游戏"+s+"扣除房卡。坐下不扣钱，开始游戏后才会扣钱，开始游戏后不予退还。是否花费"+h.costRule[N.roomtype][i[1]]/4+"房卡加入牌局？";I.popMessageBox(n,"BTN_LABEL_QUEDINGQUXIAO",this,this.onConFirm,"提示","left")}},i.onConFirm=function(e){if(0==e){if(!N.isCanSitdown)return;var i={sid:N.SID,index:this.model.getChairPosByDir(this.dir)};this.controller.sendMsgCommond(B.getProtoMessage(195,i)),N.isCanSitdown=!1,t.timer.once(400,this,this.restCanSitdown)}},i.restCanSitdown=function(){N.isCanSitdown=!0,t.timer.clear(this,this.restCanSitdown)},i.onClickTiren=function(){return 0==this.model.isSelfSitDown?(I.popMessage("围观用户没有权限踢人"),void 0):(this.model.isGameStart?I.popMessageBox("踢人会导致当前游戏流局，确认踢人吗？","BTN_LABEL_QUEDINGQUXIAO",this,this.onConFirmTiren,"提示","left"):this.onConFirmTiren(0),void 0)},i.onConFirmTiren=function(e){if(0==e){var i={pos:this.model.getChairPosByDir(this.dir)};this.controller.sendMsgCommond(B.getProtoMessage(405,i))}},i.loadGangEff=function(){},i.loadExpressMov=function(){this.expressImg.removeChildren(),this.expressImg.skin="",this.expressMov=new y,this.expressMov.width=200,this.expressMov.height=200,this.expressImg.addChild(this.expressMov),this.expressMov.on("complete",this,this.onCompleteMov)},i.showExpress=function(e){null!=this.expressMov&&(this.expressMov.alpha=1,M.clearAll(this.expressMov),this.expressMov.parent&&this.expressMov.removeSelf()),this.expressMov=new y,this.expressMov.width=200,this.expressMov.height=200,this.expressMov.x=-85,this.expressMov.y=-85,this.expressImg.addChild(this.expressMov),this.expressMov.visible=!0,this.expressMov.alpha=1,10>e?this.expressMov.load(this.expressUrl+"0"+e+".swf",!0):this.expressMov.load(this.expressUrl+e+".swf",!0),M.to(this.expressMov,{alpha:.3},500,null,new C(this,this.onCompeteTween,[null]),2500)},i.onCompeteTween=function(){null!=this.expressMov&&(this.expressMov.visible=!1,this.expressMov.alpha=1,this.expressMov.parent&&this.expressMov.removeSelf(),this.expressMov=null)},i.onCompleteMov=function(){},i.onGangAniComp=function(){this.gangEff.visible=!1,this.gangAni.stop()},i.playGangEff=function(e){0!=e&&(e>0?(this.gangEff.visible=!0,this.gangAni.play(0,!1),this.fenshuTf.color="#00ff00"):(this.gangEff.visible=!1,this.gangAni.stop(),this.fenshuTf.color="#ff0000"),this.fenshuTf.visible=!0,this.fenshuTf.text=e>0?"+"+e:e+"",this.fenshuTf.y=104,M.to(this.fenshuTf,{y:64},2e3,null,C.create(this,this.onFenshuEffComp),2))},i.onFenshuEffComp=function(){this.fenshuTf.visible=!1},i.update=function(e,i){void 0===i&&(i=!1),this.sitDownBtn.visible=!1,this._skin.haveBox.visible=!0,void 0==e.score&&(e.score=0),this.nameTf.text=e.nickname,this.recordTf.text=1==N.Rule[4]?e.Coin:""+e.score,N.uid==e.uid&&(N.Diamond=e.Diamond,N.score=e.score,N.Coin=e.Coin),1==e.readystate?(0==this.model.isGameStart&&(this.readyImg.visible=!0),this.setPiaoValue(e.piao),console.log("obj.piao::"+e.piao),this.showPiaoImage(this.model.isGameStart)):(this.readyImg.visible=!1,this.hidePiaoImage());var t=this.model.getPlayerPosByUid(e.uid);if(this.tingpaiImg.visible=!1,this._skin.chairPos.text="座位号："+t,this._skin.chairPos.visible=!1,this.headImg.width=this.headw,this.headImg.height=this.headh,this.headImg.on("click",this,this.onShowUserInfo,[e]),"h"==K.splitStr(e.Icon,"")[0]){var s=new V;s.loadImage(e.Icon,0,0,this.headw,this.headh,C.create(this,this.delayPhotoPhoto,[s,s])),s.mouseEnabled=!0,this.headImg.addChild(s)}var n=!1;2==e.state&&(n=!0),this.setHeadGray(n,!0,e.offlineTime),this.updateTirenBtn(),i&&this.playFlyHeadImg(this.model.getChairDirByPos(e.prePos))},i.onShowUserInfo=function(e){q.instance.show(e.uid,e.ip,e.Icon)},i.delayPhotoPhoto=function(){},i.updateGolds=function(e){this.recordTf.x=0,this.recordTf.y=1;var i=this.recordTf.text;this.recordTf.scaleX=this.recordTf.scaleY=.6,this.recordTf.x=0,this.recordTf.y=-2,e.score>=0?(this.recordTf.font=D.NumberYellowFont,this.recordTf.text=""+e.score,e.score/10<1?this.recordTf.x+=14:e.score/10<10?this.recordTf.x+=6:e.score/10<100?this.recordTf.x+=-2:e.score/10<1e3&&(this.recordTf.x+=-10)):(this.recordTf.font=D.NumberYellowFont,this.recordTf.text=e.score+"",e.score/10>-1?this.recordTf.x+=2:e.score/10>-10?this.recordTf.x+=-4:e.score/10>-100?this.recordTf.x+=-12:e.score/10>-1e3&&(this.recordTf.x+=-22)),this.playGangEff(e.score-i)},i.updateHua=function(){this.zhenghuaBox.visible=!1,this.yehuaBox.visible=!1},i.show=function(){this._skin.visible=!0},i.hide=function(){this._skin.visible=!1},i.reset=function(e){void 0===e&&(e=!1),this._skin.haveBox.visible=!1,this.sitDownBtn.visible=!0,this._skin.zhuangImg.visible=!1,this.readyImg.visible=!1,this.tingpaiImg.visible=!1,this.gangEff.visible=!1,this.fenshuTf.visible=!1,e&&(this.zhenghuaBox.visible=!1,this.yehuaBox.visible=!1),this.piaoImg.visible=!1,this.playingPiaoImg.visible=!1,this._skin.notPiaoTf.visible=!1,this.tirenBtn.visible=!1,this.voice.visible=!1,this.voice.ani.stop(),this._skin.jiabeiImg.visible=!1,this.hideDizhuNM()},i.showDizhuNM=function(e){var i=this._skin.shenfenImg;i.visible=!0,i.skin=e==this.model.dizhuPos?"gameCommon/dizhu.png":"gameCommon/nongming.png"},i.hideDizhuNM=function(){this._skin.shenfenImg.visible=!1},i.updateJiabei=function(e){this._skin.jiabeiImg.visible=1==this.model.jiabeiVec[e]?!0:!1},i.hideReadySimbol=function(){this.readyImg.visible=!1},i.showTingImg=function(){this.tingpaiImg.visible=!0},i.showReady=function(){this.readyImg.visible=!0},i.setPiaoValue=function(){this.needPiao},i.showPiaoImage=function(e){this.needPiao&&(e?(this.playingPiaoImg.visible=!0,this.piaoImg.visible=!1):(this.playingPiaoImg.visible=!1,this.piaoImg.visible=!0),this._skin.notPiaoTf.visible=!1)},i.hidePiaoImage=function(){this.needPiao&&(this.playingPiaoImg.visible=!1,this.piaoImg.visible=!1,this._skin.notPiaoTf.visible=!0)},i.updateTirenBtn=function(){var e=this.model.playerByPos(this.model.getChairPosByDir(this.dir));null!=e&&(this.tirenBtn.visible=e.canKick)},i.setHeadGray=function(e,i,s){void 0===s&&(s=0),e&&i?(this._skin.offLineSp.visible=!0,this.headImg.filters=[I.grayscaleFilter],this.offlineimg.visible=!0,this.offlineTf.visible=!0,this.offlineTf.text=s+"",this.startCutDownOffline()):e&&!i?(this._skin.offLineSp.visible=!0,t.timer.once(1e4,this,this.setGrayhead)):(this._skin.offLineSp.visible=!1,this.tirenBtn.visible=!1,this.headImg.filters=null,this.offlineimg.visible=!1,this.offlineTf.visible=!1,t.timer.clear(this,this.setGrayhead),this.model.playerByPos(this.model.getChairPosByDir(this.dir)).canKick=!1,this.stopCutDownOffline())},i.startCutDownOffline=function(){f.instance.on("ON_LITTLETIMEER",this,this.onCutdown)},i.stopCutDownOffline=function(){f.instance.off("ON_LITTLETIMEER",this,this.onCutdown),this.offlineTf.visible=!1},i.onCutdown=function(){null!=this.model.playerByPos(this.model.getChairPosByDir(this.dir))&&(this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime--,this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime<=0&&(this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime=0,this.stopCutDownOffline()),(0/0==this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime||void 0==this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime)&&(this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime=0),this.offlineTf.text=this.model.playerByPos(this.model.getChairPosByDir(this.dir)).offlineTime+"")},i.setGrayhead=function(){this.headImg.filters=[I.grayscaleFilter],this.offlineimg.visible=!0},i.playFlyHeadImg=function(e){var i=500;switch(this.dir){case 0:switch(e){case 1:M.from(this._skin,{x:946,y:150},i);break;case 2:M.from(this._skin,{x:199,y:47},i);break;case 3:M.from(this._skin,{x:12,y:150},i)}break;case 1:switch(e){case 0:M.from(this._skin,{x:12,y:378},i);break;case 2:M.from(this._skin,{x:202,y:46},i);break;case 3:M.from(this._skin,{x:12,y:150},i)}break;case 2:switch(e){case 0:M.from(this._skin,{x:-116,y:324},i);break;case 1:M.from(this._skin,{x:820,y:96},i);break;case 3:M.from(this._skin,{x:-116,y:96},i)}break;case 3:switch(e){case 0:M.from(this._skin,{x:12,y:378},i);break;case 1:M.from(this._skin,{x:946,y:150},i);break;case 2:M.from(this._skin,{x:199,y:47},i)}}},o(0,i,"model",function(){return ci.instance.gameContext.model}),o(0,i,"controller",function(){return ci.instance.gameContext.controller}),e}(),Q=function(){function e(){this.expressUrl="res/swfs/",this.loadedArr=[],this._mcMap=new u}var i;n(e,"modules.srddzGame.srddzInerGame.view.playerInfoPart.GiftEff",null,"GiftEff$3");var s=e.prototype;return s.showGiftEff=function(e,i,t){var s=new y;s.load(this.expressUrl+h.giftConfig[t-1].name+".swf",!0);var n=h.giftConfig[t-1].sound,o=parseInt(h.giftConfig[t-1].sounddelay);-1!=this.loadedArr.indexOf(s.basePath)?this.onLoaded(s,e,i,n,o):s.on("loaded",this,this.onLoaded,[s,e,i,n,o])},s.showPockTypeEff=function(e,i){void 0===i&&(i=!1);var t="",s="";switch(e){case 6:t="res/swfs/pokerType/shunzi.swf",this.playAni(t,-500,-150);break;case 7:t="",i?(t="res/swfs/pokerType/feijichibang.swf",s="pockerType/type_feijichibang"):(t="res/swfs/pokerType/feiji.swf",s="pockerType/type_feiji"),this.playAni(t,-70,-200,s);break;case 8:t="res/swfs/pokerType/zhadan.swf",this.playAni(t,-70,-200,"pockerType/type_zhadan");break;case 9:t="res/swfs/pokerType/huojian.swf",this.playAni(t,-70,-200,"pockerType/type_huojian")}},s.playAni=function(e,i,t,s){void 0===i&&(i=0),void 0===t&&(t=0),void 0===s&&(s="");var n=new y;n.load(e,!0),-1!=this.loadedArr.indexOf(n.basePath)?this.onLoadedPockTypeMc(n,"",0,i,t):n.on("loaded",this,this.onLoadedPockTypeMc,[n,s,0,i,t])},s.onLoaded=function(e,i,t,s,n){switch(-1==this.loadedArr.indexOf(e.basePath)&&this.loadedArr.push(e.basePath),e.stop(),G.instance.popLayer.addChild(e),i){case 0:e.x=-57,e.y=505;break;case 1:e.x=852,e.y=41;break;case 2:e.x=412,e.y=-51;break;case 3:e.x=-25,e.y=40;break;default:e.x=820,e.y=-50}var o=0,a=0;switch(t){case 0:o=-57,a=505;break;case 1:o=852,a=41;break;case 2:o=412,a=-51;break;case 3:o=-25,a=40;break;default:o=820,a=-50}M.to(e,{x:o,y:a},400,null,new C(this,this.onCompeteTween,[e,s,n]))},s.onLoadedPockTypeMc=function(e,i,s,n,o){void 0===n&&(n=0),void 0===o&&(o=0),-1==this.loadedArr.indexOf(e.basePath)&&this.loadedArr.push(e.basePath),e.stop(),G.instance.popLayer.addChild(e),e.x=n,e.y=200+o,e.playTo(0,e.count-2,C.create(this,this.playEnd,[e])),t.timer.once(3e3,this,this.playEnd,[e]),0==s?T.playEffect(i):t.timer.once(s,this,this.playSound,[i],!1)},s.onCompeteTween=function(e,i,s){e.playTo(0,e.count-2,C.create(this,this.playEnd,[e])),t.timer.once(3e3,this,this.playEnd,[e]),0==s?T.playEffect(i):t.timer.once(s,this,this.playSound,[i],!1)},s.playSound=function(e){T.playEffect(e)},s.playEnd=function(e){e&&e.removeSelf()},o(1,e,"instance",function(){return null==e._instance&&(e._instance=new e(new i)),e._instance}),e._instance=null,e.__init$=function(){i=function(){function e(){}return n(e,""),e}()},e}(),Y=function(){function e(e){this.needPiao=!0,this.skin=null,this.curPiaoValue=0,this.piaoCheckBoxVec=a(3,null),this.skin=e,this.init()}n(e,"modules.srddzGame.srddzInerGame.view.playerInfoPart.PiaoSelePart",null,"PiaoSelePart$2");var i=e.prototype;return i.init=function(){var e=0,i=this.piaoCheckBoxVec.length;for(e=0;i>e;e++)this.piaoCheckBoxVec[e]=this.skin["piao"+e],this.piaoCheckBoxVec[e].on("click",this,this.onClickCheckBox,[e,e]);this.seleIdx(0),this.hide()},i.onClickCheckBox=function(e,i){var t=i;console.log("onClickCheckBox::"+i),this.seleIdx(t)},i.seleIdx=function(e){var i=0,t=this.piaoCheckBoxVec.length;for(i=0;t>i;i++)this.piaoCheckBoxVec[i].selected=i==e?!0:!1;this.curPiaoValue=e},i.getCurPiaoValue=function(){return this.curPiaoValue},i.reset=function(){this.seleIdx(0),this.needPiao=11==N.roomtype?!0:!1},i.show=function(){this.skin.visible=this.needPiao?!0:!1},i.hide=function(){this.skin.visible=!1},e}(),q=function(){function e(){this.uid=0,this._skin=null,this._skin=new O,this._skin.giftList.itemRender=Ii,this._skin.giftList.spaceX=10,this._skin.giftList.selectEnable=!0,this._skin.giftList.selectHandler=new C(this,this.onSelectRound),this._skin.giftList.renderHandler=new C(this,this.updateRoundItem),this._skin.giftList.dataSource=h.giftConfig,this._skin.giftList.refresh()}var i;n(e,"modules.srddzGame.srddzInerGame.view.playerInfoPart.UserInfoPage",null,"UserInfoPage$3");var t=e.prototype;return t.show=function(e,i,t){this.uid=e,this._skin.idTf.text="ID: "+e,this._skin.nickName.text=ci.instance.gameContext.model.playerByUid(e).nickname,this._skin.diamondTf.text=N.Diamond+"",I.AddCenter(this._skin,G.instance.popLayer);var s=new V;s.loadImage(t,0,0,this._skin.imgPhoto.width,this._skin.imgPhoto.height),this._skin.imgPhoto.addChild(s),this._skin.mouseEnabled=!0,this._skin.clickBg.once("click",this,this.onCloseUserInfo),this._skin.giftList.refresh(),e==N.uid?(this._skin.diamond.visible=!0,this._skin.diamondTf.visible=!0):(this._skin.diamond.visible=!1,this._skin.diamondTf.visible=!1)},t.onCloseUserInfo=function(e){this._skin&&e.target==this._skin.clickBg&&this._skin&&this._skin.removeSelf()},t.hide=function(){this._skin&&this._skin.removeSelf()},t.onSelectRound=function(e){console.log("当前选择的索引："+e)},t.updateRoundItem=function(e){e.setData(e.dataSource,this.uid)},o(1,e,"instance",function(){return null==e._instance&&(e._instance=new e(new i)),e._instance}),e._instance=null,e.__init$=function(){i=function(){function e(){}return n(e,""),e}()},e}(),X=function(){function e(e,i,t,s){this.bottom=null,this.right=null,this.top=null,this.left=null,this._PosChairVec=[],this.bottom=new ai(e),this.right=new ai(i),this.top=new ai(t),this.left=new ai(s)}n(e,"modules.srddzGame.srddzInerGame.view.pockerPart.ActTipPart",null,"ActTipPart$1");var i=e.prototype;return i.setChairNum=function(e){switch(void 0===e&&(e=4),this._PosChairVec.length=0,e){case 4:this._PosChairVec.push(this.bottom,this.right,this.top,this.left)}},i.showActTip=function(e,i){var t=this.model.getChairDirByPos(e);this._PosChairVec[t].showActTip(i)},i.hideActTip=function(e){var i=this.model.getChairDirByPos(e);this._PosChairVec[i].hideAll()},i.hideJiabei=function(){},i.hideAllActTip=function(){var e=0;for(e=0;e<this._PosChairVec.length;e++)this._PosChairVec[e].hideAll()},o(0,i,"model",function(){return ci.instance.gameContext.model}),e}(),ei=function(){function e(e){this.skin=null,this.state=-1,this.cardIdx=0,this.skin=e,this.init()}n(e,"modules.srddzGame.srddzInerGame.view.pockerPart.card.BasePocker",null,"BasePocker$2");var i=e.prototype;return i.init=function(){},i.up=function(){0!=this.state&&(this.skin.valueImg.visible=!0,this.skin.backImg.visible=!1,this.state=0)},i.back=function(){1!=this.state&&(this.skin.backImg.visible=!0,this.skin.valueImg.visible=!1,this.state=1)},i.down=function(){2!=this.state&&(this.skin.backImg.visible=!1,this.skin.valueImg.visible=!0,this.state=2)},i.show=function(){this.skin.visible=!0},i.hide=function(){this.skin.visible=!1},i.setCardImg=function(i){this.cardIdx!=i&&(e.CARD_REFERENCE.hasOwnProperty(i.toString())&&(this.skin.valueImg.skin="poker/"+e.CARD_REFERENCE[i.toString()]),this.cardIdx=i)},i.showDizhuImg=function(e){this.skin.dizhuImg.visible=e},i.showMingImg=function(e){this.skin.mingImg.visible=e},i.reset=function(){this.hide(),this.skin.backImg.visible=!1,this.skin.valueImg.visible=!1,this.skin.dizhuImg.visible=!1,this.skin.shadowImg.visible=!1,this.skin.mingImg.visible=!1,this.state=-1,this.select=!1},o(0,i,"visible",function(){return this.skin.visible}),o(0,i,"canControl",null,function(){}),o(0,i,"select",function(){return!1},function(){}),o(0,i,"view",function(){return ci.instance.gameContext.view}),o(0,i,"model",function(){return ci.instance.gameContext.model}),e.getT=function(e){return Math.floor(e/100)},e.getV=function(e){return e%100},e.getVShang=function(e){var i=e%100;return 14==i?i=1:16==i&&(i=2),i},e.PAIXING_NON=-1,e.PAIXING_DAN=1,e.PAIXING_DUIZI=2,e.PAIXING_SAN=3,e.PAIXING_SANER=4,e.PAIXING_LIANDUI=5,e.PAIXING_SHUNZI=6,e.PAIXING_FEIJI=7,e.PAIXING_ZHADAN=8,e.PAIXING_TIANZHA=9,e.TYPE_WANG=5,e.PREPATH="poker/",e.STATE_UP=0,e.STATE_BACK=1,e.STATE_DOWN=2,s(e,["CARD_REFERENCE",function(){return this.CARD_REFERENCE={551:"xiao_w.png",552:"da_w.png",414:"hong_1.png",416:"hong_2.png",403:"hong_3.png",404:"hong_4.png",405:"hong_5.png",406:"hong_6.png",407:"hong_7.png",408:"hong_8.png",409:"hong_9.png",410:"hong_10.png",411:"hong_j.png",412:"hong_q.png",413:"hong_k.png",314:"fang_1.png",316:"fang_2.png",303:"fang_3.png",304:"fang_4.png",305:"fang_5.png",306:"fang_6.png",307:"fang_7.png",308:"fang_8.png",309:"fang_9.png",310:"fang_10.png",311:"fang_j.png",312:"fang_q.png",313:"fang_k.png",214:"hei_1.png",216:"hei_2.png",203:"hei_3.png",204:"hei_4.png",205:"hei_5.png",206:"hei_6.png",207:"hei_7.png",208:"hei_8.png",209:"hei_9.png",210:"hei_10.png",211:"hei_j.png",212:"hei_q.png",213:"hei_k.png",114:"mei_1.png",116:"mei_2.png",103:"mei_3.png",104:"mei_4.png",105:"mei_5.png",106:"mei_6.png",107:"mei_7.png",108:"mei_8.png",109:"mei_9.png",110:"mei_10.png",111:"mei_j.png",112:"mei_q.png",113:"mei_k.png"}}]),e}(),ii=function(){function e(e){this._leftTime=0,this._curHandPos=-1,this._skin=null,this._posChairVec=[],this._leftTfVec=[],this._skin=e,this.init()}n(e,"modules.srddzGame.srddzInerGame.view.pockerPart.ClockPart",null,"ClockPart$2");var i=e.prototype;return i.init=function(){this.allReset()},i.allReset=function(){this._skin.visible=!1},i.setChairNum=function(e){switch(void 0===e&&(e=4),this._posChairVec.length=0,this._leftTfVec.length=0,e){case 4:this._posChairVec.push(this._skin.pos0,this._skin.pos1,this._skin.pos2,this._skin.pos3),this._leftTfVec.push(this._skin.cutdownTf0,this._skin.cutdownTf1,this._skin.cutdownTf2,this._skin.cutdownTf3)}this.reset()},i.showjiabei=function(){},i.noticeShowClock=function(e,i){this._skin.visible=!0,this._curHandPos=e,this.model.curHandlePos=e,this._leftTime=i;var t=this.model.getChairDirByPos(e);this._leftTfVec[t].text=this._leftTime<10?"0"+this._leftTime:this._leftTime+"",R.instance.timer.clear(this,this.onTime),R.instance.timer.loop(1e3,this,this.onTime),this.showDir(t)},i.showDir=function(e){var i=0,t=this._posChairVec.length;for(i=0;t>i;i++)i==e?(this._posChairVec[i].visible=!0,this._leftTfVec[i].visible=!0):(this._posChairVec[i].visible=!1,this._leftTfVec[i].visible=!1)},i.onTime=function(){if(0==k.CurGameModule.inGame||0==this.model.isGameStart)return this._leftTime=0,this.reset(),R.instance.timer.clear(this,this.onTime),void 0;var e=this.model.getChairDirByPos(this._curHandPos);this._leftTime-=1,this._leftTime<0&&(this._leftTime=10),this._leftTfVec[e].text=this._leftTime<10?"0"+this._leftTime:this._leftTime+"",this._leftTime<5},i.reset=function(){this._skin.visible=!1;var e=0,i=this._posChairVec.length;for(e=0;i>e;e++)this._posChairVec[e].visible=!1,this._leftTfVec[e].text="00"},o(0,i,"model",function(){return ci.instance.gameContext.model}),e}(),ti=function(){function e(e){this._skin=null,this._pockers=a(8,null),this._skin=e,this.init()}n(e,"modules.srddzGame.srddzInerGame.view.pockerPart.DipaiPart",null,"DipaiPart$1");var i=e.prototype;return i.init=function(){var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e]=new Ci(this._skin["card"+e])},i.showBack=function(){var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].back(),this._pockers[e].show()},i.showCards=function(e){var i=0;for(i=0;i<this._pockers.length;i++)0!=e[i]?(this._pockers[i].setCardImg(e[i]),this._pockers[i].down(),this._pockers[i].show()):(this._pockers[i].back(),this._pockers[i].show())},i.reset=function(){var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].reset()},e}(),si=function(){function e(e){this.singleBtnW=183,this.gap=20,this._skin=null,this.state=-1,this._skin=e,this.init()}n(e,"modules.srddzGame.srddzInerGame.view.pockerPart.HandleBtnsPart",null,"HandleBtnsPart$3");var i=e.prototype;return i.init=function(){this.addListener()},i.resetBox=function(){this._skin.jiaofenBox.visible=!1,this._skin.baodaoBox.visible=!1,this._skin.wayBox.visible=!1,this._skin.ctlBox.visible=!1,this._skin.jiabeiBox.visible=!1},i.showJiaodizhu=function(){if(0!=this.model.isSelfSitDown){this.resetBox(),this._skin.jiaofenBox.visible=!0;var e=0;this._skin.fen0Btn.visible=!0,e+=1,102==this.model.srddzMsgs.ACK_RoomInfo.Rule[3]&&(this._skin.fen1Btn.visible=0==this.model.difen,this._skin.fen1Btn.visible&&(this._skin.fen1Btn.x=(this.singleBtnW+this.gap)*e,e+=1)),this._skin.fen2Btn.visible=this.model.difen<=1,this._skin.fen2Btn.visible&&(this._skin.fen2Btn.x=(this.singleBtnW+this.gap)*e,e+=1),this._skin.fen3Btn.visible=this.model.difen<=2,this._skin.fen3Btn.visible&&(this._skin.fen3Btn.x=(this.singleBtnW+this.gap)*e,e+=1),this._skin.jiaofenBox.x=(this.singleBtnW+this.gap)*(4-e)/2,h.autoPlay&&t.timer.once(80,this,this.onClickFenBtn,[3])}},i.showjiabei=function(){if(0!=this.model.isSelfSitDown){this.resetBox(),this._skin.jiabeiBox.visible=!0;var e=0;this._skin.jiabeiBtn.visible=!0,e+=1,this._skin.bujiaBtn.visible=!0,this._skin.bujiaBtn.x=(this.singleBtnW+this.gap)*e,e+=1,this._skin.jiabeiBox.x=(this.singleBtnW+this.gap)*(4-e)/2,h.autoPlay&&t.timer.once(80,this,this.onClickJiaBtn,[!1])}},i.showBaodao=function(e){if(0!=this.model.isSelfSitDown){this.resetBox(),this._skin.baodaoBox.visible=!0;var i=0;e>=1&&(this._skin.baoBtn.visible=!0,this._skin.baoBtn.x=(this.singleBtnW+this.gap)*i,i+=1),this._skin.notbaoBtn.visible=!0,this._skin.notbaoBtn.x=(this.singleBtnW+this.gap)*i,i+=1,this._skin.baodaoBox.x=(this.singleBtnW+this.gap)*(4-i)/2,h.autoPlay&&t.timer.once(80,this,this.onClickBaoBtn,[0])}},i.showWay=function(){if(0!=this.model.isSelfSitDown){this.resetBox(),this._skin.wayBox.visible=!0;var e=0;this._skin.normalBtn.visible=!0,e+=1,this._skin.directBtn.visible=!0,e+=1,this._skin.wayBox.x=(this.singleBtnW+this.gap)*(4-e)/2,h.autoPlay&&t.timer.once(80,this,this.onClickWayBtn,[!1])}},i.showCtlBtns=function(){var e=this;if(0!=this.model.isSelfSitDown){this.resetBox(),this._skin.ctlBox.visible=!0;var i=0;if(this._skin.mingpaiBtn.visible=!1,-1==this.model.curOutputPos&&this.model.dizhuPos==this.model.selfChairPos&&0==this.model.mingpaiVec[this.model.selfChairPos]&&(this._skin.mingpaiBtn.visible=!0,i+=1),this._skin.buchuBtn.visible=!1,this._skin.tishiBtn.visible=!1,this._skin.chupaiBtn.visible=!1,this._skin.buqiBtn.visible=!1,-1!=this.model.curOutputPos&&this.model.curOutputPos!=this.model.selfChairPos){var s=U.getBigThan(this.model.handleCards[this.model.selfChairPos],this.model.curOutputCards);s.length>0?(this._skin.buchuBtn.visible=!0,this._skin.buchuBtn.x=(this.singleBtnW+this.gap)*i,i+=1,this._skin.tishiBtn.visible=!0,this._skin.tishiBtn.x=(this.singleBtnW+this.gap)*i,i+=1,this._skin.chupaiBtn.visible=!0,this._skin.chupaiBtn.x=(this.singleBtnW+this.gap)*i,i+=1,h.autoPlay&&(t.timer.once(80,null,function(i){var t=U.getPaixing(i),s={Sid:N.SID,Type:t,Cards:i};e.controller.sendMsgCommond(B.getProtoMessage(1203,s))},[s]),this.reset())):(this._skin.buqiBtn.visible=!0,this._skin.buqiBtn.x=(this.singleBtnW+this.gap)*i,i+=1,h.autoPlay&&this._skin.buqiBtn.visible&&this.onClickBuchuBtn())}else if(this._skin.chupaiBtn.visible=!0,this._skin.chupaiBtn.x=(this.singleBtnW+this.gap)*i,i+=1,h.autoPlay){var n=this.model.handleCards[this.model.selfChairPos][0];t.timer.once(80,null,function(i){var t=1,s={Sid:N.SID,Type:t,Cards:[i]};e.controller.sendMsgCommond(B.getProtoMessage(1203,s))},[n]),this.reset()}this._skin.ctlBox.x=(this.singleBtnW+this.gap)*(4-i)/2}},i.addListener=function(){this._skin.fen0Btn.on("click",this,this.onClickFenBtn,[-1]),this._skin.fen1Btn.on("click",this,this.onClickFenBtn,[1]),this._skin.fen2Btn.on("click",this,this.onClickFenBtn,[2]),this._skin.fen3Btn.on("click",this,this.onClickFenBtn,[3]),this._skin.jiabeiBtn.on("click",this,this.onClickJiaBtn,[!0]),this._skin.bujiaBtn.on("click",this,this.onClickJiaBtn,[!1]),this._skin.mingpaiBtn.on("click",this,this.onClickMingBtn),this._skin.buchuBtn.on("click",this,this.onClickBuchuBtn),this._skin.tishiBtn.on("click",this,this.onClickTishiBtn),this._skin.chupaiBtn.on("click",this,this.onClickChupaiBtn),this._skin.buqiBtn.on("click",this,this.onClickBuchuBtn),this._skin.baoBtn.on("click",this,this.onClickBaoBtn,[1]),this._skin.notbaoBtn.on("click",this,this.onClickBaoBtn,[0]),this._skin.normalBtn.on("click",this,this.onClickWayBtn,[0]),this._skin.directBtn.on("click",this,this.onClickWayBtn,[1])},i.onClickBaoBtn=function(e){switch(e){case 0:var i={Sid:N.SID,BaodaoNum:0,Cards:[]},i={Sid:N.SID,BaodaoNum:t,Cards:s};this.controller.sendMsgCommond(B.getProtoMessage(1205,i));break;case 1:var t=this.model.getBaodaoNum(),s=this.model.getBaodaoCards(),i={Sid:N.SID,BaodaoNum:t,Cards:s};this.controller.sendMsgCommond(B.getProtoMessage(1205,i))}this.reset()},i.onClickWayBtn=function(e){var i=!1;0==e?i=!1:1==e&&(i=!0);var t={Sid:N.SID,IsStrictWin:i};this.controller.sendMsgCommond(B.getProtoMessage(1206,t)),this.reset()},i.onClickFenBtn=function(e){var i={Sid:N.SID,Fen:e};this.controller.sendMsgCommond(B.getProtoMessage(1200,i)),this.reset()},i.onClickJiaBtn=function(e){var i={Sid:N.SID,Jiabei:e};this.controller.sendMsgCommond(B.getProtoMessage(1202,i)),this.reset()},i.onClickMingBtn=function(){var e={Sid:N.SID};this.controller.sendMsgCommond(B.getProtoMessage(1201,e)),this._skin.mingpaiBtn.visible=!1},i.onClickBuchuBtn=function(){var e={Sid:N.SID};this.controller.sendMsgCommond(B.getProtoMessage(1204,e)),this.view.srddzPage.handlePart.setSelfPockSele([]),this.reset()},i.onClickTishiBtn=function(e){e.stopPropagation();var i;if(0!=this.model.baodaoState&&this.model.dizhuPos==this.model.selfChairPos){var t=this.model.handleCards[this.model.selfChairPos].concat();U.cutArrInArr(this.model.baodaoCards,t),i=U.getBigThan(t,this.model.curOutputCards),0==i.length&&(i=U.getBigThanWBaodao(this.model.baodaoCards,this.model.curOutputCards))}else i=U.getBigThan(this.model.handleCards[this.model.selfChairPos],this.model.curOutputCards);i.length>0&&this.view.srddzPage.handlePart.setSelfPockSele(i)},i.onClickChupaiBtn=function(){var e=this.view.srddzPage.handlePart.getSelfSelePockers();0==e.length&&(T.playEffect("audio_warning"),I.popMessage("你的出牌不能为空"));var i=U.getPaixing(e);if(i==ei.PAIXING_NON)return T.playEffect("audio_warning"),I.popMessage("你的牌型不合法"),void 0;if(i>=8&&this.model.selfChairPos!=this.model.dizhuPos){var t=this.model.jiaofenVec[this.model.selfChairPos],s=this.model.outZhadanNumVec[this.model.selfChairPos];if((-1==t||1==t)&&s>=1)return T.playEffect("audio_warning"),I.popMessage("你选择了不叫，只能出一个炸弹"),void 0;if(2==t&&s>=2)return T.playEffect("audio_warning"),I.popMessage("你选择了叫2分，只能出两个炸弹"),void 0}if(0!=this.model.baodaoState&&this.model.dizhuPos==this.model.selfChairPos){var n=!0,o=0,a=0;for(o=0;o<e.length;o++)if(a=this.model.baodaoCards.indexOf(e[o]),-1!=a){var r=ei.getV(e[o]),h=F.getJishuArrData(this.model.baodaoCards);n=-1!=h.eightArr.indexOf(r)?8==e.length&&8==i?!0:!1:-1!=h.sevenArr.indexOf(r)?7==e.length&&8==i?!0:!1:9==i?!0:!1;break}if(0==n)return T.playEffect("audio_warning"),I.popMessage("报到的牌必须要一起出"),void 0}var l;if(0==this.model.curOutputCards.length||this.model.curOutputPos==this.model.selfChairPos)l={Sid:N.SID,Type:i,Cards:e},this.controller.sendMsgCommond(B.getProtoMessage(1203,l)),this.reset();else{var d=U.getBigThan(e,this.model.curOutputCards);9==i||8==i?d.length>0&&(l={Sid:N.SID,Type:i,Cards:e},this.controller.sendMsgCommond(B.getProtoMessage(1203,l)),this.reset()):d.length==e.length?(l={Sid:N.SID,Type:i,Cards:e},this.controller.sendMsgCommond(B.getProtoMessage(1203,l)),this.reset()):(T.playEffect("audio_warning"),I.popMessage("你的出牌不能大于当前牌"))}},i.show=function(){this._skin.visible=!0},i.hide=function(){this._skin.visible=!1},i.reset=function(){this.resetBox()},o(0,i,"model",function(){return ci.instance.gameContext.model}),o(0,i,"visible",function(){return this._skin.visible}),o(0,i,"controller",function(){return ci.instance.gameContext.controller}),o(0,i,"view",function(){return ci.instance.gameContext.view}),e}(),ni=function(){function e(e,i,t,s){this._bottom=null,this._right=null,this._top=null,this._left=null,this._PosChairVec=[],this._bottom=new vi(e),this._right=new Pi(i),this._top=new Pi(t),this._left=new Pi(s),this.allReset()}n(e,"modules.srddzGame.srddzInerGame.view.pockerPart.HandlePart",null,"HandlePart$3");var i=e.prototype;return i.allReset=function(){this._bottom.reset(),this._right.reset(),this._top.reset(),this._left.reset()},i.setChairNum=function(e){switch(void 0===e&&(e=4),this._PosChairVec.length=0,e){case 4:this._PosChairVec.push(this._bottom,this._right,this._top,this._left)}this.reset()},i.updateAllCards=function(e){var i=0,t=e.length;for(i=0;t>i;i++){var s=this.model.getChairDirByPos(i);this._PosChairVec[s].showCards(e[i],s)}},i.updateOnePosAllCards=function(e,i){console.log("pos ::"+e);var t=this.model.getChairDirByPos(e);console.log("dir ::"+t),console.log("_PosChairVec[dir] ::"+this._PosChairVec[t]),this._PosChairVec[t].showCards(i,t)},i.setSelfPockSele=function(e){var i=this.model.getChairDirByPos(this.model.selfChairPos);this._PosChairVec[i].seleCards=e},i.getSelfSelePockers=function(){var e=this.model.getChairDirByPos(this.model.selfChairPos);return this._PosChairVec[e].seleCards},i.reset=function(){var e=0,i=this._PosChairVec.length;for(e=0;i>e;e++)this._PosChairVec[e].reset();this.canControl(this.model.selfChairPos,!1)},i.canControl=function(e,i){this._PosChairVec[this.model.getChairDirByPos(e)].canControl=i},o(0,i,"model",function(){return ci.instance.gameContext.model}),e}(),oi=function(){function e(e,i,t,s){this._bottom=null,this._right=null,this._top=null,this._left=null,this._PosChairVec=[],this._bottom=new ki(e),this._right=new wi(i),this._top=new ki(t),this._left=new yi(s),this.allReset()}n(e,"modules.srddzGame.srddzInerGame.view.pockerPart.OutputPart",null,"OutputPart$2");var i=e.prototype;return i.allReset=function(){this._bottom.reset(),this._right.reset(),this._top.reset(),this._left.reset()},i.setChairNum=function(e){switch(void 0===e&&(e=4),this._PosChairVec.length=0,e){case 4:this._PosChairVec.push(this._bottom,this._right,this._top,this._left)}},i.showCards=function(e,i){if(0!=e.length){var t=this.model.getChairDirByPos(i),s=0,n=this._PosChairVec.length;for(s=0;n>s;s++)s==t&&this._PosChairVec[s].showCards(e)}},i.hideCards=function(e){var i=this.model.getChairDirByPos(e),t=0,s=this._PosChairVec.length;for(t=0;s>t;t++)t==i&&this._PosChairVec[t].hide()},i.reset=function(){var e=0,i=this._PosChairVec.length;for(e=0;i>e;e++)this._PosChairVec[e].reset()},o(0,i,"model",function(){return ci.instance.gameContext.model}),e}(),ai=function(){function e(e){this._skin=null,this._skin=e,this.init()}n(e,"modules.srddzGame.srddzInerGame.view.pockerPart.singlePart.BaseActTipItem",null,"BaseActTipItem$1");var i=e.prototype;return i.init=function(){this.reset()},i.hideAll=function(){this.reset()},i.showActTip=function(e){switch(this.hideAll(),e){case 0:this._skin.bujiao.visible=!0;break;case 1:this._skin.dang1.visible=!0;break;case 2:this._skin.dang2.visible=!0;break;case 3:this._skin.dang3.visible=!0;break;case 4:this._skin.buchu.visible=!0}},i.reset=function(){this._skin.bujiao.visible=!1,this._skin.dang1.visible=!1,this._skin.dang2.visible=!1,this._skin.dang3.visible=!1,this._skin.buchu.visible=!1},i.show=function(){this._skin.visible=!0},i.hide=function(){this._skin.visible=!1},i.showEff=function(){},e.ACTTIP_BUJIAO=0,e.ACTTIP_FEN1=1,e.ACTTIP_FEN2=2,e.ACTTIP_FEN3=3,e.ACTTIP_BUCHU=4,e.ACTTIP_JIABEI=5,e.ACTTIP_BUJIABEI=6,e}(),ri=function(){function e(e){this.state=0,this.skin=null,this._pockers=a(33,null),this.skin=e,this.init()}n(e,"modules.srddzGame.srddzInerGame.view.pockerPart.singlePart.handlePart.BaseSingleHandlePart",null,"BaseSingleHandlePart$3");var i=e.prototype;return i.init=function(){},i.updateState=function(e){this.state=1==e?1:0},i.showCards=function(){},i.up=function(){var e=0;
for(e=0;e<this._pockers.length;e++)this._pockers[e].up()},i.back=function(){var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].back()},i.down=function(){var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].down()},i.hideAll=function(){var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].hide()},i.playQipaiEff=function(){var e=0,i=this._pockers.length;for(e=0;i>e;e++)this._pockers[e].skin.alpha=0,t.timer.frameOnce(e,this,this.onSingleQiEff,[e],!1)},i.onSingleQiEff=function(e){M.to(this._pockers[e].skin,{alpha:1},100)},i.reset=function(){var e=0,i=this._pockers.length;for(e=0;i>e;e++)this._pockers[e].reset()},i.show=function(){this.skin.visible=!0},i.hide=function(){this.skin.visible=!1},o(0,i,"canControl",null,function(e){var i=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].canControl=e}),o(0,i,"visible",function(){return this.skin.visible}),o(0,i,"seleCards",function(){return null},function(){}),o(0,i,"model",function(){return ci.instance.gameContext.model}),e.STATE_NOMAL=0,e.STATE_MINGPAI=1,e}(),hi=function(){function e(e){this.skin=null,this._pockers=a(32,null),this.skin=e,this.init()}n(e,"modules.srddzGame.srddzInerGame.view.pockerPart.singlePart.outputPart.BaseSingleOutputPart",null,"BaseSingleOutputPart$2");var i=e.prototype;return i.init=function(){var e=0,i=this._pockers.length;for(e=0;i>e;e++)this._pockers[e]=new ei(this.skin["card"+e]);this.hide()},i.showCards=function(){},i.show=function(){this.skin.visible=!0},i.hide=function(){this.skin.visible=!1},i.hideAll=function(){var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].hide()},i.reset=function(){this.hide();var e=0;for(e=0;e<this._pockers.length;e++)this._pockers[e].reset(),this._pockers[e].down()},o(0,i,"visible",function(){return this.skin.visible}),o(0,i,"model",function(){return ci.instance.gameContext.model}),e}(),li=function(){function e(e){this._skin=null,this.handlePart=null,this.outputPart=null,this.handleBtns=null,this.dipaiPart=null,this.clockPart=null,this.actTipPart=null,e&&(this._skin=e,this._skin.mouseThrough=!0,this.handlePart=new ni(this._skin.handlePart0,this._skin.handlePart1,this._skin.handlePart2,this._skin.handlePart3),this.outputPart=new oi(this._skin.outputPart0,this._skin.outputPart1,this._skin.outputPart2,this._skin.outputPart3),this.handleBtns=new si(this._skin.ctlPart),this.dipaiPart=new ti(this._skin.dipaiPart),this.clockPart=new ii(this._skin.clockPart),this.actTipPart=new X(this._skin.actTip0,this._skin.actTip1,this._skin.actTip2,this._skin.actTip3))}n(e,"modules.srddzGame.srddzInerGame.view.SrddzPage");var i=e.prototype;return i.setChairNum=function(e){void 0===e&&(e=4),e=4,this.handlePart.setChairNum(e),this.outputPart.setChairNum(e),this.clockPart.setChairNum(e),this.actTipPart.setChairNum(e)},i.reset=function(){this.handlePart.reset(),this.outputPart.reset(),this.handleBtns.reset(),this.clockPart.reset(),this.dipaiPart.reset(),this.actTipPart.hideAllActTip()},o(0,i,"skin",function(){return this._skin}),e}(),di=function(){function e(e){this._skin=null,this._PowerBarOrignalW=0/0,this._infosimbol=null,this._skin=e,this._infosimbol=this._skin.infoSImg,this._infosimbol.visible=!1,e.mouseThrough=!0,this._skin.setBtn.on("click",this,this.onClickSetBtn),this._skin.scoreList.on("click",this,this.onClickScoreListBtn),this._skin.infoListBtn.on("click",this,this.onClickInfoListBtn),this._skin.helpBtn.on("click",this,this.onClickHelpBtn),f.instance.on("COMMON_INFOLIST_NOTICE",this,this.onGotInfo)}n(e,"modules.srddzGame.srddzInerGame.view.TableInfoPage",null,"TableInfoPage$3");var i=e.prototype;return i.onClickHelpBtn=function(){c.instance.commonContext.view.gameHelpView.show()},i.playVoicePlay=function(){t.timer.frameLoop(1,this,this.onTimeLoop)},i.onTimeLoop=function(){this._skin.voicePlay.rotation%360==0&&(this._skin.voicePlay.rotation=0),this._skin.voicePlay.rotation+=10},i.stopVoicePlay=function(){t.timer.clear(this,this.onTimeLoop)},i.updateRoomId=function(){Number(this._skin.roomNumTf.text)!=N.roomid&&(this._skin.roomNumTf.text=""+N.roomid)},i.updateDifen=function(){this._skin.difenTf.text=this.model.difen+"档"},i.updateBeishu=function(){this._skin.beishuTf.text=this.model.beishu+"倍"},i.updatePlayState=function(){switch(this._skin.huangfanImg.skin=1==this.model.isHuang?"srddzGame/icon_huang.png":"srddzGame/icon_huang0.png",this._skin.tanImg.skin=-1==this.model.dizhuPos?"srddzGame/icon_tan0.png":1==this.model.mingpaiVec[this.model.dizhuPos]?"srddzGame/icon_tan.png":"srddzGame/icon_tan0.png",this._skin.touImg.skin=1==this.model.isTouliao?"srddzGame/icon_tou.png":"srddzGame/icon_tou0.png",this._skin.wangImg.skin=1==this.model.isMingW?"srddzGame/icon_wang.png":"srddzGame/icon_wang0.png",this._skin.baoImg.visible=!1,this._skin.shBaoImg.visible=!1,this.model.baodaoState){case 0:this._skin.baoImg.visible=!0,this._skin.baoImg.skin="srddzGame/icon_bao0.png";break;case 1:this._skin.baoImg.visible=!0,this._skin.baoImg.skin="srddzGame/icon_bao.png";break;case 2:this._skin.shBaoImg.visible=!0}},i.onClickSetBtn=function(){c.instance.commonContext.view.settingView.showOrHide()},i.onClickScoreListBtn=function(e){var i={uniqueCode:N.uniqueCode};console.log(N.roomid),f.instance.event("SOCKET_SEND",B.getProtoMessage(404,i)),T.instance.playClickBtnSound(),c.instance.commonContext.view.timeWarView.showOrHide(),e.stopPropagation()},i.onClickInfoListBtn=function(e){this._infosimbol.visible=!1,T.instance.playClickBtnSound(),c.instance.commonContext.view.infoListView.showOrHide(),e.stopPropagation()},i.onGotInfo=function(){this._infosimbol.visible=!0},i.updateLeftRound=function(e){void 0===e&&(e=!0);var i=this.model.srddzMsgs.ACK_RoomInfo,t=i.Rule,s=h.getRule(t[1]);0==s.type&&(i.totalRound=s.value,this._skin.roundCountTf.text=i.RoundCount+1>s.value?""+i.RoundCount+"/"+s.value:""+(i.RoundCount+1)+"/"+s.value),1==this.model.isGameStart||i.RoundCount>=1?this._skin.weikaishiBox.visible=!1:(N.leftDissolveTime=i.disbandLeftTime,this._skin.leftDissolveTf.text=h.getTFmt(N.leftDissolveTime,!0),this._skin.weikaishiBox.visible=!0,this.startDissolveCutdown())},i.updateKaijuren=function(e){(null==e||""==e)&&(e="无"),this._skin.kaijuTf.text="开局人："+e;var i=this.model.srddzMsgs.ACK_RoomInfo,t=i.Rule,s=h.getRule(t[2]);this._skin.payType.text=24==s.id?"房主付费":"共同付费"},i.startDissolveCutdown=function(){f.instance.on("ON_LITTLETIMEER",this,this.onCutDown1)},i.stopDissolveCutdown=function(){f.instance.off("ON_LITTLETIMEER",this,this.onCutDown1)},i.onCutDown1=function(e){N.leftDissolveTime-=e,N.leftDissolveTime<0&&(N.leftDissolveTime=0,this.stopDissolveCutdown()),this._skin.leftDissolveTf.text=h.getTFmt(N.leftDissolveTime,!0)},i.reset=function(){},o(0,i,"model",function(){return ci.instance.gameContext.model}),e}(),ci=function(e){function i(){if(this.needResize=!0,this._main=null,this._gameContext=null,this._mainContext=null,i.__super.call(this),null!=i._instance)throw new z(this);i._instance=this}n(i,"modules.srddzGame.SrddzGameModule",e);var s=i.prototype;return s.startup=function(){null==this._mainContext&&(this._mainContext=new g("srddzGameMainmain",this),this._main=new Ai("srddzGameMain",this,this._mainContext),this._gameContext=new Si("srddzGame",this,this._main)),this.switchState(this._mainContext)},s.stopGame=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1),t&&this._gameContext.controller.clear(),i.inGame=!1,i.isSettlement=!1,this.switchState(this._mainContext),e&&(this.inHallResize(),_.instance.gotoHall())},s.startGame=function(){l.window.document.title=h.nameTitle+"四人斗地主",1!=i.inGame&&(_.instance.goEmpty(),i.inGame=!0,c.instance.gotoCommonContext(),this.switchState(this.gameContext),this.inGameResize(),A.gameName="四人斗地主",K.onMenuShareTimeline(N.nickname+"-"+h.nameTitle+"四人斗地主("+h.costRule[N.roomtype+""][N.Rule[3]]+")【房间号："+N.roomid+"】",N.roomid+"--"+N.uniqueCode),K.onMenuShareAppMessage(N.nickname+"-"+h.nameTitle+"四人斗地主("+h.costRule[N.roomtype+""][N.Rule[3]]+")【房间号："+N.roomid+"】","房主创建了四人斗地主 【房间号:"+N.roomid+"】"+h.getRule(N.Rule[1]).desc,N.roomid+"--"+N.uniqueCode),console.log("startSrddzGame..........."))},s.inGameResize=function(e){void 0===e&&(e=!0),"windows"!=I.sysem()&&(t.stage.screenMode="horizontal"),t.stage.size(1038,640),modules.srddzGame.SrddzGameModule.instance.gameContext.view.gui.visible=!1,1==e?t.timer.once(200,this,this.onCheckInGameResize):t.timer.frameOnce(1,this,this.onCheckInGameResize)},s.onCheckInGameResize=function(){if(1==k.CurGameModule.inGame){var e=l.getElementById("layaCanvas");e.width<e.height?(I.showChScreenGuideView(),this.inGameResize(!1)):(I.hideChScreenGuideView(),modules.srddzGame.SrddzGameModule.instance.gameContext.view.gui.visible=!0)}else I.hideChScreenGuideView()},s.inHallResize=function(){"windows"==I.sysem()||(t.stage.screenMode="ipad"==I.sysem()||"mac"==I.sysem()?"vertical":"vertical"),t.stage.size(640,1038)},o(0,s,"main",function(){return this._main}),o(0,s,"gameContext",function(){return this._gameContext}),o(1,i,"instance",function(){return null==i._instance&&(i._instance=new i),i._instance},rb.framework.mvc.Module._$SET_instance),i.inGame=!1,i.isPauseGameQueue=!1,i.isSettlement=!1,i._instance=null,i}(P),fi=function(e){function i(){i.__super.call(this)}n(i,"modules.srddzGame.controller.SrddzMainController",e);var t=i.prototype;return t.onAdd=function(){N.isReplay||f.instance.on("MESSAGE_GAME",this,this.onMsg)},t.onRemove=function(){N.isReplay||f.instance.off("MESSAGE_GAME",this,this.onMsg)},t.onMsg=function(e){1!=ci.isPauseGameQueue&&this.procMsg(e)},t.procMsg=function(e){e instanceof net.Message&&e.complete(),console.log("acc msgId::"+e.messageId);var i;switch(e.messageId){case 560:i=N.isReplay?e.body:h.proto.ACKBC_Into_Room.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Into_Room(i);break;case 607:i=N.isReplay?e.body:h.proto.ACKBC_Sitdown.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Sitdown(i);break;case 608:i=N.isReplay?e.body:h.proto.ACKBC_Standup.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Standup(i);break;case 520:i=N.isReplay?e.body:h.proto.ACK_RoomInfo.decode(e.params[0]),ci.instance.gameContext.controller.ACK_RoomInfo(i);break;case 525:i=N.isReplay?e.body:h.proto.ACK_Room_User.decode(e.params[0]),ci.instance.gameContext.controller.ACK_Room_User(i);break;case 1506:i=N.isReplay?e.body:h.proto.ACKBC_Sddz_Start.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Sddz_Start(i);break;case 615:i=N.isReplay?e.body:h.proto.ACK_User_SeatCard.decode(e.params[0]),ci.instance.gameContext.controller.ACK_User_SeatCard(i);break;case 1508:i=N.isReplay?e.body:h.proto.ACKBC_Sddz_JiaoDizhu.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Sddz_JiaoDizhu(i);break;case 1509:i=N.isReplay?e.body:h.proto.ACKBC_Sddz_Mingpai.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Sddz_Mingpai(i);break;case 1510:i=N.isReplay?e.body:h.proto.ACKBC_Sddz_Jiabei.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Sddz_Jiabei(i);break;case 1511:i=N.isReplay?e.body:h.proto.ACKBC_Srddz_Baodao.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Srddz_Baodao(i);break;case 1512:i=N.isReplay?e.body:h.proto.ACKBC_Srddz_StrictWin.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Srddz_StrictWin(i);break;case 700:i=N.isReplay?e.body:h.proto.ACKBC_CurPlayer.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_CurPlayer(i);break;case 1500:N.isReplay||(i=h.proto.ACKBC_Sddz_Jiaofen.decode(e.params[0])),ci.instance.gameContext.controller.ACKBC_Sddz_Jiaofen(i);break;case 1501:N.isReplay||(i=h.proto.ACKBC_Sddz_Dizhu.decode(e.params[0])),ci.instance.gameContext.controller.ACKBC_Sddz_Dizhu(i);break;case 1507:if(N.isReplay){i={};{e.body}}else i=h.proto.ACKBC_Sddz_Chupai.decode(e.params[0]);ci.instance.gameContext.controller.ACKBC_Sddz_Chupai(i);break;case 600:i=N.isReplay?e.body:h.proto.ACKBC_Ready.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Ready(i);break;case 580:i=N.isReplay?e.body:h.proto.ACKBC_Exit_Room.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Exit_Room(i);break;case 900:i=N.isReplay?e.body:h.proto.NotifyStartGame.decode(e.params[0]),ci.instance.gameContext.controller.NotifyStartGame(i);break;case 880:i=N.isReplay?e.body:h.proto.ACKBC_SendMsg.decode(e.params[0]),ci.instance.gameContext.view.onRecChat(i);break;case 1503:i=N.isReplay?e.body:h.proto.ACKBC_Sddz_End.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Sddz_End(i);break;case 1505:i=N.isReplay?e.body:h.proto.ACKBC_Sddz_Card_Init.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Sddz_Card_Init(i);break;case 1504:i=N.isReplay?e.body:h.proto.ACKBC_Sddz_Total.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Sddz_Total(i);break;case 920:i=N.isReplay?e.body:h.proto.TotalSummary.decode(e.params[0]),ci.instance.gameContext.controller.NOTIFY_Summary(i);break;case 800:i=N.isReplay?e.body:h.proto.AckDisband.decode(e.params[0]),ci.instance.gameContext.controller.AckDisband(i);break;case 940:i=N.isReplay?e.body:h.proto.NotifyDisband.decode(e.params[0]),ci.instance.gameContext.controller.NotifyDisband(i);break;case 960:i=N.isReplay?e.body:h.proto.NotifyUserState.decode(e.params[0]),ci.instance.gameContext.controller.NotifyUserState(i);break;case 972:i=N.isReplay?e.body:h.proto.NotifyDestoryRoom.decode(e.params[0]),ci.instance.gameContext.controller.NotifyDestoryRoom(i);break;case 971:i=N.isReplay?e.body:h.proto.NotifyKick.decode(e.params[0]),ci.instance.gameContext.controller.NotifyKick(i);break;case 980:i=N.isReplay?e.body:h.proto.KickResponse.decode(e.params[0]),ci.instance.gameContext.controller.KickResponse(i);break;case 1e3:i=N.isReplay?e.body:h.proto.MSG_ACK_Gift.decode(e.params[0]),ci.instance.gameContext.controller.MSG_ACK_Gift(i);break;case 1502:N.isReplay?(i=e.body,console.log("Message.Pass",i)):i=h.proto.ACKBC_Sddz_Pass.decode(e.params[0]),ci.instance.gameContext.controller.ACKBC_Sddz_Pass(i);break;case"":break;case"":}N.isReplay},i}(r),gi=function(e){function i(){this.pop=null,this.dissolvePage=null,i.__super.call(this),this.setType(2)}n(i,"modules.srddzGame.srddzInerGame.controller.SrddzController",e);var s=i.prototype;return s.onAdd=function(){e.prototype.onAdd.call(this)},s.onRemove=function(){e.prototype.onRemove.call(this)},s.discard=function(){},s.ACK_RoomInfo=function(e){console.log("ACK_Room_Info",e,"ACK_Room_Info"),this.model.srddzMsgs.ACK_RoomInfo=e,this.model.roomOwnerUid=e.RoomOwner,N.uniqueCode=e.uniqueCode,N.roomtype=e.Type,N.Rule=e.Rule,N.isReplay&&(N.roomid=e.RID),console.log(N.uniqueCode),1==e.gameState&&(this.model.isGameStart=!0,this.view.playerInfoPage.hideBtnsByGameStart(),this.view.playerInfoPage.hideReadySimbol()),this.view.playerInfoPage.updateLeaveDisbandBtns(),N.isReplay&&(this.model.srddzMsgs.ACK_RoomInfo.isGameStart=1),this.view.tableInfoPage.updateLeftRound(),this.view.tableInfoPage.updateKaijuren(e.nickName),e.direction||(e.direction=0),this.view.tableInfoPage.updateRoomId(),this.view.tableInfoPage.updateDifen(),this.view.tableInfoPage.updateBeishu(),this.view.tableInfoPage.updatePlayState(),N.needOneTwo=101==e.Rule[3]?!0:!1},s.ACK_Room_User=function(e){if(console.log("ACK_Room_User",e,"ACK_Room_User"),this.model.srddzMsgs.ACK_Room_User=e,this.model.updatePlayerInfoVec(e.Users),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),0==this.model.isSelfSitDown&&0==this.model.isGameStart)for(var i=0;i<this.model.chairNum;i++)if(null==this.model.playerByPos(i)){var t={sid:N.SID,index:i};this.sendMsgCommond(B.getProtoMessage(195,t));break}},s.ACKBC_Into_Room=function(e){console.log("ACKBC_Into_Room"),console.log(e),console.log("ACKBC_Into_Room"),this.model.srddzMsgs.ACKBC_Into_Room=e,N.roomid=e.RID,this.view.tableInfoPage.updateRoomId(),e.nickname=e.Name,e.uid=e.UID,e.ip=e.IP,e.pos=e.Index,e.golds=e.Coin,this.model.updateOnePlayerInfo(e),this.view.playerInfoPage.updateOnePlayerInfo(e),this.view.playerInfoPage.updateSitDownUpBtn(),f.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+e.nickname+"]进入了房间！"})},s.ACKBC_Sitdown=function(e){if(this._actived){if(console.log("MSG_ACKBC_Sitdown",e),this.model.srddzMsgs.ACKBC_Sitdown=e,this.model.sitDown(e.uid,e.index,e.score),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.updateSitDownUpBtn(),this.view.tableInfoPage.updateKaijuren(e.nickName),e.uid==N.selfuid){var i={sid:N.SID};this.sendMsgCommond(B.getProtoMessage(210,i)),f.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+this.model.getPlayerNicknameByUid(e.uid)+"]坐下了"+e.index+"号座位！"})}this.view.calculatePage.perPage&&this.view.calculatePage.perPage.updateBtns()}},s.ACKBC_Standup=function(e){this._actived&&(console.log("MSG_ACKBC_Standup",e),this.model.srddzMsgs.ACKBC_Standup=e,this.model.standup(e.uid,e.index),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.updateSitDownUpBtn(),this.view.playerInfoPage.updateStartBtn(),this.view.tableInfoPage.updateKaijuren(e.nickName),this.view.calculatePage.perPage&&this.view.calculatePage.perPage.updateBtns(),f.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+this.model.getPlayerNicknameByUid(e.uid)+"]站起了！"}))},s.ACKBC_Ready=function(e){if(this.actived){if(console.log("ACKBC_Ready"),console.log(e),console.log("ACKBC_Ready"),1==this.model.isGameStart)return;T.instance.playReadySound(),this.model.srddzMsgs.ACKBC_Ready=e,e.uid=e.UID,e.pos=this.model.getPlayerPosByUid(e.uid),this.model.updateReadyState(e.pos,!0,0),this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec,!1),e.pos==this.model.selfChairPos&&(this.view.playerInfoPage.hideReadyBtn(),this.view.playerInfoPage.hideDizhuNM(),console.log("ready.........."),this.view.calculatePage.reset(),this.view.calculatePage.reset(),this.model.reset(),this.view.srddzPage.reset())}},s.NotifyStartGame=function(e){this.actived&&(console.log("NotifyStartGame::"+e+"NotifyStartGame"),this.model.srddzMsgs.NotifyStartGame=e,e.uid==N.selfuid&&this.view.playerInfoPage.showStartBtn())},s.ACKBC_Sddz_Start=function(e){this.actived&&(console.log("ACKBC_Sddz_Start",e,"ACKBC_Sddz_Start"),this.model.srddzMsgs.ACKBC_Sddz_Start=e,this.model.srddzMsgs.ACK_RoomInfo.RoundCount=e.RoundCount,this.resetSelf(),this.model.isGameStart=!0,this.view.startGame(),this.view.playerInfoPage.hideReadySimbol(),this.view.playerInfoPage.hideBtnsByGameStart(),this.view.playerInfoPage.updateLeaveDisbandBtns(),this.view.tableInfoPage.updateRoomId(),this.view.tableInfoPage.updateLeftRound(),this.view.tableInfoPage.updateDifen())},s.ACK_User_SeatCard=function(e){if(this.actived){this.model.isClientPrePop=!1,console.log("ACK_User_SeatCard",e,"ACK_User_SeatCard"),console.log(this.model.srddzMsgs.ACKBC_Sddz_Start,"----------------------------------"),this.model.srddzMsgs.ACK_User_SeatCard=e,this.model.resetCard(),this.view.srddzPage.handlePart.reset(),this.view.srddzPage.outputPart.reset();var i=0,t=0,s=0,n=[];for(i=0;i<e.Cards.length;i++){if(e.Cards[i].List.length!=e.Cards[i].ListLen)for(s=0;s<e.Cards[i].ListLen;s++)e.Cards[i].List.push({CID:0});for(n.length=0,t=0;t<e.Cards[i].List.length;t++)n.push(e.Cards[i].List[t].CID);if(this.model.updateHandleCards(i,n),this.view.srddzPage.handlePart.updateOnePosAllCards(i,this.model.handleCards[i]),e.Cards[i].Out)for(t=0;t<e.Cards[i].Out.length;t++)this.model.outputCards[i].push(e.Cards[i].Out[t].CID)}this.view.srddzPage.dipaiPart.showBack()}},s.ACKBC_Sddz_Card_Init=function(e){if(this.actived){console.log("ACKBC_Sddz_Card_Init",e,"ACKBC_Sddz_Card_Init"),this.model.srddzMsgs.ACKBC_Sddz_Card_Init=e,this.model.stage=e.Stage,this.model.difen=e.Difen,this.model.beishu=e.Beishu,this.model.isHuang=void 0==e.IsHuang?!1:e.IsHuang,this.model.isTouliao=void 0==e.IsTouliao?!1:e.IsTouliao,this.model.isMingW=void 0==e.IsMingW?!1:e.IsMingW,this.model.baodaoState=void 0==e.BaodaoState?0:e.BaodaoState,this.model.baodaoNum=void 0==e.BaodaoNum?0:e.BaodaoNum,this.model.isStrictWin=void 0==e.IsStrictWin?!1:e.IsStrictWin,this.model.isSeleBaodao=void 0==e.IsSeleBaodao?!1:e.IsSeleBaodao,this.model.isSeleStrictWin=void 0==e.IsSeleStrictWin?!1:e.IsSeleStrictWin,this.model.baodaoCards=void 0==e.BaodaoCards?[]:e.BaodaoCards;var i=0;for(i=0;i<this.model.chairNum;i++)this.model.jiaofenVec[i]=e.JiaoFen[i],this.model.outZhadanNumVec[i]=e.OutZhadan[i],1==this.model.stage?1==e.HaveJiao[i]&&this.view.srddzPage.actTipPart.showActTip(i,e.JiaoFen[i]):(this.model.jiabeiVec[i]=e.IsJiabei[i],this.model.mingpaiVec[i]=e.IsMing[i],2==this.model.stage?1==e.HaveJiabei[i]?1==e.IsJiabei[i]?this.view.srddzPage.actTipPart.showActTip(i,5):this.view.srddzPage.actTipPart.showActTip(i,6):this.model.isSelfSitDown&&i==this.model.selfChairPos&&(this.view.srddzPage.handleBtns.showjiabei(),this.view.srddzPage.clockPart.showjiabei(10)):3==this.model.stage&&(1==e.LastOpt[i]?this.view.srddzPage.actTipPart.showActTip(i,4):2==e.LastOpt[i]&&this.view.srddzPage.outputPart.showCards(e.LastOptParam[i].Cards,i)));(2==this.model.stage||3==this.model.stage)&&(this.model.dipaiCards=e.Dipai.concat(),this.view.srddzPage.dipaiPart.showCards(this.model.dipaiCards),this.view.playerInfoPage.updateJiabei(),this.model.dizhuPos=e.DizhuIndex,this.view.playerInfoPage.showDizhuNM(),this.view.srddzPage.handlePart.updateAllCards(this.model.handleCards),3==this.model.stage&&(this.model.curOutputPos=e.CurOutputIndex,this.model.curOutputPos>=0&&(this.model.curOutputCards=e.CurCards,this.view.srddzPage.outputPart.showCards(this.model.curOutputCards,this.model.curOutputPos)),this.view.srddzPage.clockPart.noticeShowClock(e.CurIndex,10),this.view.srddzPage.outputPart.hideCards(e.CurIndex))),this.view.tableInfoPage.updateBeishu(),this.view.tableInfoPage.updateDifen(),this.view.tableInfoPage.updatePlayState()}},s.ACKBC_Sddz_JiaoDizhu=function(e){if(this.actived){console.log("ACKBC_Sddz_JiaoDizhu",e,"ACKBC_Sddz_JiaoDizhu"),this.model.srddzMsgs.ACKBC_Sddz_JiaoDizhu=e;var i=this.model.getPlayerPosByUid(e.Uid);this.model.difen=e.CurFen,this.view.tableInfoPage.updateDifen(),i==this.model.selfChairPos&&this.view.srddzPage.handleBtns.showJiaodizhu(),this.view.srddzPage.clockPart.noticeShowClock(i,10)}},s.ACKBC_Sddz_Jiaofen=function(e){if(this.actived){console.log("ACKBC_Sddz_Jiaofen",e,"ACKBC_Sddz_Jiaofen"),this.model.srddzMsgs.ACKBC_Sddz_Jiaofen=e;var i=this.model.getPlayerPosByUid(e.Uid);this.view.srddzPage.actTipPart.showActTip(i,e.Fen),this.model.jiaofenVec[i]=e.Fen;var t=e.Fen;-1==t&&(t=0),x.playSound("res/sounds/sddz/"+T.instance.getSexRef(this.model.playerByPos(i).sex)+"fen"+t+".mp3"),e.Fen>0&&(this.model.difen=e.Fen,this.view.tableInfoPage.updateDifen())}},s.ACKBC_Sddz_Dizhu=function(e){if(this.actived){console.log("ACKBC_Sddz_Dizhu",e,"ACKBC_Sddz_Dizhu"),this.model.srddzMsgs.ACKBC_Sddz_Dizhu=e;var i=this.model.getPlayerPosByUid(e.Uid);this.model.dizhuPos=i,this.model.difen=e.Fen,this.view.srddzPage.actTipPart.hideAllActTip(),this.view.playerInfoPage.showDizhuNM(),this.view.tableInfoPage.updateDifen(),this.model.addDipaiToHandleCards(this.model.dizhuPos,e.Dipai),this.view.srddzPage.dipaiPart.showCards(this.model.dipaiCards),this.view.srddzPage.handlePart.updateOnePosAllCards(this.model.dizhuPos,this.model.handleCards[this.model.dizhuPos]),this.view.srddzPage.clockPart.showjiabei(10)}},s.ACKBC_Sddz_Mingpai=function(e){if(this.actived){console.log("ACKBC_Sddz_Mingpai",e,"ACKBC_Sddz_Mingpai"),this.model.srddzMsgs.ACKBC_Sddz_Mingpai=e;var i=this.model.getPlayerPosByUid(e.Uid);1==e.Mingpai&&(this.model.beishu=2*this.model.beishu,this.model.updateMingpai(i,e.Cards),this.view.srddzPage.handlePart.updateOnePosAllCards(i,this.model.handleCards[i]),x.playSound("res/sounds/sddz/"+T.instance.getSexRef(this.model.playerByPos(i).sex)+"mingpai.mp3"),this.view.tableInfoPage.updateBeishu(),this.view.tableInfoPage.updatePlayState())}},s.ACKBC_Sddz_Jiabei=function(e){if(this.actived){console.log("ACKBC_Sddz_Jiabei",e,"ACKBC_Sddz_Jiabei"),this.model.srddzMsgs.ACKBC_Sddz_Jiabei=e;var i=this.model.getPlayerPosByUid(e.Uid);1==e.Jiabei?(this.model.jiabeiVec[i]=!0,this.view.srddzPage.actTipPart.showActTip(i,5),this.view.playerInfoPage.updateJiabei(),x.playSound("res/sounds/sddz/"+T.instance.getSexRef(this.model.playerByPos(i).sex)+"jiabei.mp3")):(this.model.jiabeiVec[i]=!1,this.view.srddzPage.actTipPart.showActTip(i,6),x.playSound("res/sounds/sddz/"+T.instance.getSexRef(this.model.playerByPos(i).sex)+"bujiabei.mp3"))}},s.ACKBC_CurPlayer=function(e){if(this.actived){console.log("ACKBC_CurPlayer",e,"ACKBC_CurPlayer"),this.model.srddzMsgs.ACKBC_CurPlayer=e;var i=e.Seat;if(this.view.srddzPage.clockPart.noticeShowClock(i,10),i==this.model.selfChairPos&&this.model.isSelfSitDown){if(-1==this.model.curOutputPos&&this.model.dizhuPos==this.model.selfChairPos){var t=this.model.getBaodaoNum();0==t?this.view.srddzPage.handleBtns.showCtlBtns():0==this.model.isSeleBaodao&&0==this.model.isStrictWin?this.view.srddzPage.handleBtns.showBaodao(t):1==this.model.isSeleBaodao&&0==this.model.isSeleStrictWin?0!=this.model.baodaoState?this.view.srddzPage.handleBtns.showWay():this.view.srddzPage.handleBtns.showCtlBtns():1==this.model.isSeleBaodao&&1==this.model.isSeleStrictWin&&this.view.srddzPage.handleBtns.showCtlBtns()}else this.view.srddzPage.handleBtns.showCtlBtns();this.view.srddzPage.handlePart.canControl(i,!0)}this.view.srddzPage.actTipPart.hideJiabei(),this.view.srddzPage.outputPart.hideCards(i),this.view.srddzPage.actTipPart.hideActTip(i)}},s.ACKBC_Srddz_Baodao=function(e){if(this.actived){console.log("ACKBC_Srddz_Baodao",e,"ACKBC_Srddz_Baodao"),this.model.srddzMsgs.ACKBC_Srddz_Baodao=e;var i=this.model.getPlayerPosByUid(e.Uid);if(i!=this.model.dizhuPos)return I.popMessage("报到信息有误，报道的玩家可能作弊！"),void 0;this.model.isSeleBaodao=!0,this.model.baodaoNum=e.BaodaoNum,this.model.baodaoCards=e.Cards,0==this.model.baodaoNum?(this.model.baodaoState=0,i==this.model.selfChairPos&&this.view.srddzPage.handleBtns.showCtlBtns()):(1==this.model.baodaoNum?this.model.baodaoState=1:this.model.baodaoNum>=1&&(this.model.baodaoState=2),i==this.model.selfChairPos&&(0==this.model.isSeleStrictWin?this.view.srddzPage.handleBtns.showWay():this.view.srddzPage.handleBtns.showCtlBtns())),this.view.tableInfoPage.updatePlayState(),this.view.srddzPage.handlePart.updateAllCards(this.model.handleCards)}},s.ACKBC_Srddz_StrictWin=function(e){if(this.actived){console.log("ACKBC_Srddz_StrictWin",e,"ACKBC_Srddz_StrictWin"),this.model.srddzMsgs.ACKBC_Srddz_StrictWin=e;var i=this.model.getPlayerPosByUid(e.Uid);if(i!=this.model.dizhuPos)return;this.model.isSeleStrictWin=!0,this.model.isStrictWin=e.IsStrictWin,0==this.model.isStrictWin&&i==this.model.selfChairPos&&this.view.srddzPage.handleBtns.showCtlBtns()}},s.preSelfOutputCards=function(e,i,t){if(!h.autoPlay){var s={Uid:e,Type:i,Cards:t};this.ACKBC_Sddz_Chupai(s,!1),this.model.isClientPrePop=!0}},s.ACKBC_Sddz_Chupai=function(e,i){if(void 0===i&&(i=!0),this.actived){console.log("ACKBC_Sddz_Chupai",e,"ACKBC_Sddz_Chupai"),this.model.srddzMsgs.ACKBC_Sddz_Chupai=e;var t=this.model.getPlayerPosByUid(e.Uid);if(i&&e.Type>=8&&(this.model.outZhadanNumVec[t]+=1),e.pos==this.model.selfChairPos&&1==this.model.isClientPrePop)return this.model.isClientPrePop=!1,void 0;var s=!0;-1!=this.model.curOutputPos&&this.model.curOutputPos!=t&&(s=!1),this.model.outputPockers(t,e.Cards),this.view.srddzPage.outputPart.showCards(e.Cards,t),this.view.srddzPage.handlePart.updateOnePosAllCards(t,this.model.handleCards[t]),this.model.beishu=e.Beishu,this.view.tableInfoPage.updateBeishu();var n=F.getJishuArrData(this.model.curOutputCards),o="";switch(e.Type){case 1:o="1-"+ei.getV(this.model.curOutputCards[0]);break;case 2:o="2-"+ei.getV(this.model.curOutputCards[0]);break;case 3:o="3-"+ei.getV(this.model.curOutputCards[0]);break;case 4:o="3d2";break;case 6:Q.instance.showPockTypeEff(6),o="shunzi";break;case 5:o="liandui";break;case 7:o="feiji";var a=E.getFeiji(n);0==a.type?Q.instance.showPockTypeEff(7):Q.instance.showPockTypeEff(7,!0);break;case 8:o="zhadan",Q.instance.showPockTypeEff(8);break;case 9:Q.instance.showPockTypeEff(9),o="huojian"}var r="yao"+(1+Math.round(Math.random()));if(0==s){var h=Math.random();h>=.5&&(o=r)}x.playSound("res/sounds/sddz/"+T.instance.getSexRef(this.model.playerByPos(t).sex)+o+".mp3")}},s.ACKBC_Sddz_Pass=function(e){if(this.actived){console.log("ACKBC_Sddz_Pass",e,"ACKBC_Sddz_Pass"),this.model.srddzMsgs.ACKBC_Sddz_Pass=e;var i=this.model.getPlayerPosByUid(e.Uid);this.view.srddzPage.actTipPart.showActTip(i,4);var t="guo"+(1+Math.round(2*Math.random()));x.playSound("res/sounds/sddz/"+T.instance.getSexRef(this.model.playerByPos(i).sex)+t+".mp3")}},s.ACKBC_Sddz_End=function(e){if(this.actived){if(console.log("ACKBC_Sddz_End",e,"ACKBC_Sddz_End"),this.model.srddzMsgs.ACKBC_Sddz_End=e,N.isReplay&&1==this.model.isStrictShowCalc)return;var i;if(-1==e.Uid){if(this.view.srddzPage.handleBtns.reset(),this.model.isLiu=!0,N.isReplay&&1==this.model.isStrictShowCalc)return;i="audio_liuju",T.playEffect(i),this.pauseGameQueue(),t.timer.once(4e3,this,this.contineGameQueue)}else{var s=this.model.getPlayerPosByUid(e.Uid),n=!1,o=!1;s==this.model.selfChairPos&&(n=!0),s==this.model.dizhuPos&&(o=!0),this.model.isLiu=!1,i=1==n?"js_win":"js_fail",T.playEffect(i),t.timer.once(2e3,this,this.contineGameQueue)}this.gameOverDownCards(e),this.pauseGameQueue()}},s.gameOverDownCards=function(e){this.model.isEnd=!0,this.model.dipaiCards=e.Dipai,this.view.srddzPage.dipaiPart.showCards(this.model.dipaiCards);var i=[],t=0,s=0,n=0;for(t=0;t<e.Cards.length;t++){if(e.Cards[t].List.length!=e.Cards[t].ListLen)for(n=0;n<e.Cards[t].ListLen;n++)e.Cards[t].List.push({CID:0});for(i.length=0,s=0;s<e.Cards[t].List.length;s++)i.push(e.Cards[t].List[s].CID);this.model.updateHandleCards(t,i),this.view.srddzPage.handlePart.updateOnePosAllCards(t,this.model.handleCards[t])}},s.ACKBC_Sddz_Total=function(e){if(this.actived){console.log("ACKBC_Sddz_Total",e,"ACKBC_Sddz_Total"),this.model.srddzMsgs.ACKBC_Sddz_Total=e,this.model.srddzMsgs.ACK_RoomInfo.RoundCount=e.RoundCount,this.view.tableInfoPage.updateLeftRound(!1),this.view.playerInfoPage.updateSitDownUpBtn(!1);var i=I.getLocalVar("hasConcern",0);0==i?(I.setLocalVar("hasConcern",1),c.instance.commonContext.view.showNotice("       微信搜索公众号<span style='color:#f6d368;'> "+h.nameTitle+"  </span>关注后即可获得更多福利哦！<br />",this,this.showCalculate)):this.showCalculate(),this.showCalculate()}},s.showCalculate=function(){this.model.isGameStart=!1,this.view.calculatePage.show(),this.model.setPlayerReadyFalse()},s.NOTIFY_Summary=function(){},s.ACKBC_Exit_Room=function(e){if(this.actived){if(console.log("ACKBC_Exit_Room"),console.log(e),console.log("ACKBC_Exit_Room"),this.model.srddzMsgs.ACKBC_Exit_Room=e,e.uid=e.UID,e.uid==N.selfuid)return h.isNewHall?I.gotoHall():this.endGameGotoHall(!0),void 0;f.instance.event("COMMON_INFOLIST_NOTICE",{color:1,msg:"玩家["+this.model.getPlayerNicknameByUid(e.uid)+"]离开了房间！"});var i=this.model.getPlayerPosByUid(e.uid);this.model.leavePlayer(e.uid),-1!=i&&(this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.showStartBtn(!1)),(this.model.isGameStart||0!=this.model.srddzMsgs.ACK_RoomInfo.RoundCount)&&this.view.playerInfoPage.showDizhuNM()}},s.AckDisband=function(e){this.actived&&(console.log("AckDisband::",e,"解散相关"),this.model.srddzMsgs.AckDisband=e,this.popDissolveRoomDetail(e))},s.NotifyDisband=function(e){if(this.actived){console.log("NotifyDisband::",e,"解散相关"),this.model.srddzMsgs.NotifyDisband=e,this.hideDissolveRoomDetail();var i="";1==e.result?i="解散成功！":(i="解散失败！",I.popMessageBox(i,"BTN_NONE",this,null))}},s.NotifyUserState=function(e){if(this.actived){console.log("NotifyUserState",e,"NotifyUserState"),this.model.srddzMsgs.NotifyUserState=e;var i=this.model.playerByUid(e.id);i.state=e.state,i.offlineTime=e.offlineTime;var t=this.model.getPlayerPosByUid(parseInt(e.id)),s=this.model.getChairDirByPos(t),n=!1;2==e.state&&(n=!0),this.view.playerInfoPage.setGrayhead(s,n,!0,e.offlineTime)}},s.NotifyKick=function(e){if(this.actived){console.log("NotifyKick",e,"NotifyKick");var i,t=0,s=e.indexs.length;for(t=0;s>t;t++)i=this.model.playerByPos(e.indexs[t]),i.offlineTime=0,i.canKick=!0;
this.view.playerInfoPage.updateTirenBtn()}},s.KickResponse=function(e){this.actived&&(I.popBox&&I.popBox.onhide(),this.model.standup(e.uid,-1),this.model.beKickedPlayer[e.pos]=e.uid,this.model.playerByUid(e.uid).offlineTime=0,this.view.playerInfoPage.updatePlayerInfos(this.model.playerInfoVec),this.view.playerInfoPage.updateSitDownUpBtn(),this.view.playerInfoPage.updateStartBtn(),this.view.tableInfoPage.updateKaijuren(e.nickName),f.instance.event("COMMON_INFOLIST_NOTICE",{color:0,msg:"玩家["+this.model.getPlayerNicknameByUid(e.uid)+"]站起了！"}),I.popMessageBox("玩家["+this.model.getPlayerNicknameByUid(e.uid)+"]被其他玩家请离座位!","BTN_QUEREN",this,this.onQuerenBeiTi))},s.onQuerenBeiTi=function(){},s.NotifyDestoryRoom=function(e){this.actived&&(console.log("NotifyDestoryRoom",e,"NotifyDestoryRoom"),this.pop=void 0!=e.IsOwnerDisband&&1==e.IsOwnerDisband?I.popMessageBox("房主解散了房间！","BTN_QUEREN",this,this.onQueRenExit,"提示","left"):I.popMessageBox("由于在规定时间内未开始游戏，房间已经强制解散！","BTN_QUEREN",this,this.onQueRenExit,"提示","left"))},s.onQueRenExit=function(){h.isNewHall?I.gotoHall():this.endGameGotoHall()},s.onPopPanelCallBack=function(){h.isNewHall?I.gotoHall():this.endGameGotoHall()},s.endGameGotoHall=function(e){void 0===e&&(e=!0),console.log("send MsgTypes.BASE_QUEUE,PomeloMessage.hall_g_o..."),null!=this.pop&&this.pop.onhide(),this.hideDissolveRoomDetail(),this.contineGameQueue(),v.instance.resetGameQueue(),this.model.reset(),this.view.reset(),this.model.playerInfoVec.length=0,N.isReplay&&(N.isPreReplay=!0),c.instance.regotoCommonText(),ci.instance.stopGame(e),N.isReplay=!1,0==this.model.isGameStart},s.popDissolveRoomDetail=function(e){null==this.dissolvePage&&(this.dissolvePage=new w),this.dissolvePage.update(e),I.AddCenter(this.dissolvePage,G.instance.popLayer),I.popBox&&I.popBox.onhide()},s.hideDissolveRoomDetail=function(){this.dissolvePage&&this.dissolvePage.parent&&this.dissolvePage.parent.removeChild(this.dissolvePage)},s.clear=function(){this.model.reset(),this.view.reset(),this.model.playerInfoVec.length=0,N.isReplay&&f.instance.event("REPLAY_back",null),N.isReplay=!1,0==this.model.isGameStart},s.MSG_ACK_Gift=function(e){if(this.actived){console.log("MSG_ACK_Gift",e,"MSG_ACK_Gift");var i=this.model.playerByUid(e.uid),t=this.model.playerByUid(e.tUid);i.Diamond=e.diamond;var s=this.model.getChairDirByPos(i.pos),n=this.model.getChairDirByPos(t.pos);e.uid==N.uid&&(N.Diamond=e.diamond),Q.instance.showGiftEff(s,n,e.id)}},s.clearTimeDelay=function(){t.timer.clear(this,this.contineGameQueue)},s.resetSelf=function(){this.model.reset(),this.view.playerInfoPage.hideReadyBtn(),this.view.playerInfoPage.hideDizhuNM(),this.view.playerInfoPage.updateJiabei(),this.view.calculatePage.reset(),this.view.srddzPage.reset()},s.sendMsgCommond=function(e,i){void 0===i&&(i=!0),i&&this.view.srddzPage.handlePart.canControl(this.model.selfChairPos,!1),f.instance.event("SOCKET_SEND",e)},s.pauseGameQueue=function(){N.isReplay?this.model.needCutdownReplay=!0:v.instance.pauseQueue("MESSAGE_GAME")},s.contineGameQueue=function(){N.isReplay?this.model.needCutdownReplay=!1:v.instance.continueQueue("MESSAGE_GAME")},s.onTimeOver=function(){this.model.isGameStart||(this.view.calculatePage.perPage.isShow?this.view.calculatePage.perPage.timeOver():this.view.calculatePage.perPage.onClickConfirmBtn())},o(0,s,"model",function(){return ci.instance.gameContext.model}),o(0,s,"view",function(){return ci.instance.gameContext.view}),i}(r),mi=function(e){function i(){this.roomOwnerUid="",this.isMouseDwon=!1,this.dizhuPos=-1,this.difen=0,this.beishu=1,this.isHuang=!1,this.isTouliao=!1,this.isMingW=!1,this.isStrictWin=!1,this.baodaoState=0,this.isSeleBaodao=!1,this.isSeleStrictWin=!1,this.baodaoCards=[],this.baodaoNum=0,this.stage=0,this.curHandlePos=0,this.isStrictShowCalc=!1,this.beKickedPlayer={},this.isAutoHandle=!1,this.isDragingcard=!1,this.isGameStart=!1,this.preStepNum=4,this.replayData=[],this.replayCurStep=0,this.replayState=0,this.needCutdownReplay=!1,this.isClientPrePop=!1,this.isClientPrePopCards=0,this.dipaiCards=[],this.curOutputPos=-1,this.curOptPos=-1,this.isLiu=!1,this.isEnd=!1,this.isSelfSitDown=!1,this.selfChairPos=0,this._chairNum=4,this.curOutputCards=[],this.srddzMsgs=new L,this.playerInfoVec=[],this.mingpaiVec=[],this.jiabeiVec=[],this.jiaofenVec=[],this.outZhadanNumVec=[],this.handleCards=[],this.outputCards=[],i.__super.call(this)}n(i,"modules.srddzGame.srddzInerGame.model.SrddzModel",e);var t=i.prototype;return t.onAdd=function(){},t.onRemove=function(){},t.resetCard=function(){this.dizhuPos=-1,this.difen=0,this.beishu=1,this.isTouliao=!1,this.isMingW=!1,this.baodaoState=0,this.baodaoNum=0,this.isSeleBaodao=!1,this.isSeleStrictWin=!1,this.baodaoCards=[],this.curOutputPos=-1,this.curOptPos=-1,this.curOutputCards.length=0,this.dipaiCards.length=0;var e=0,i=this._chairNum;for(e=0;i>e;e++)this.outputCards[e].length=0,this.handleCards[e].length=0,this.mingpaiVec[e]=!1,this.jiabeiVec[e]=!1,this.jiaofenVec[e]=0,this.outZhadanNumVec[e]=0;this.isEnd=!1,this.isLiu=!1},t.reset=function(){this.beKickedPlayer={},this.resetCard()},t.updateHandleCards=function(e,i){this.handleCards[e]=i.concat(),this.handleCards[e].sort(U.compCardsFun)},t.addDipaiToHandleCards=function(e,i){this.dipaiCards=i.concat(),this.handleCards[e]=this.handleCards[e].concat(i),this.handleCards[e].sort(U.compCardsFun)},t.updateMingpai=function(e,i){this.mingpaiVec[e]=!0,this.handleCards[e]=i.concat(),this.handleCards[e].sort(U.compCardsFun)},t.outputPockers=function(e,i){this.curOutputPos=e,this.curOutputCards=i.concat(),this.curOutputCards.sort(U.compCardsFun),this.outputCards[e].push(i);var t=0,s=i.length;for(t=0;s>t;t++){var n=this.handleCards[e].indexOf(i[t]);-1!=n?this.handleCards[e].splice(n,1):this.handleCards[e].splice(0,1),e==this.dizhuPos&&0!=this.baodaoState&&(n=this.baodaoCards.indexOf(i[t]),-1!=n&&this.baodaoCards.splice(n,1))}},t.getChairDirByPos=function(e){if(-1==e)return-1;var i=0;return i=e-this.selfChairPos,0>i&&(i+=this.chairNum),i},t.getChairPosByDir=function(e){var i=0;return i=this.selfChairPos+e,i>this.chairNum-1&&(i-=this.chairNum),i},t.updateOnePlayerInfo=function(e){var i=0,t=this.playerInfoVec.length+0,s=!1;for(i=0;t>i;i++)if(this.playerInfoVec[i]&&this.playerInfoVec[i].uid==e.uid){this.playerInfoVec[i].pos!=e.pos&&console.log("传过来的数据有错误!!!!!!"),this.updateObjFromObj(this.playerInfoVec[i],e),s=!0;break}0==s&&this.playerInfoVec.push(e),e.uid==N.selfuid&&(this.selfChairPos=e.pos,-1==this.selfChairPos?(this.isSelfSitDown=!1,this.selfChairPos=0):this.isSelfSitDown=!0)},t.playerByPos=function(e){var i=0,t=this.playerInfoVec.length;for(i=0;t>i;i++)if(this.playerInfoVec[i]&&this.playerInfoVec[i].pos==e)return this.playerInfoVec[i];return null},t.playerByUid=function(e){var i=0,t=this.playerInfoVec.length;for(i=0;t>i;i++)if(this.playerInfoVec[i]&&this.playerInfoVec[i].uid==e)return this.playerInfoVec[i];return null},t.getPlayerPosByUid=function(e){var i=0,t=this.playerInfoVec.length;for(i=0;t>i;i++)if(this.playerInfoVec[i]&&this.playerInfoVec[i].uid==e)return this.playerInfoVec[i].pos;return 0},t.getPlayerUidByPos=function(e){var i=0,t=this.playerInfoVec.length;for(i=0;t>i;i++)if(this.playerInfoVec[i]&&this.playerInfoVec[i].pos==e)return this.playerInfoVec[i].uid;return 0},t.getPlayerNicknameByUid=function(e){var i=0,t=this.playerInfoVec.length;for(i=0;t>i;i++)if(this.playerInfoVec[i]&&this.playerInfoVec[i].uid==e)return this.playerInfoVec[i].nickname;return""},t.updateObjFromObj=function(e,i){e.prePos=e.pos;for(var t in i)void 0!=i[t]&&(e[t]=i[t])},t.sitDown=function(e,i,t){var s=0,n=this.playerInfoVec.length;for(s=0;n>s;s++)this.playerInfoVec[s]&&this.playerInfoVec[s].uid==e&&(this.playerInfoVec[s].pos=i,this.playerInfoVec[s].score=t,this.playerInfoVec[s].canKick=!1,e==N.selfuid&&(-1!=i?(this.isSelfSitDown=!0,this.selfChairPos=i):(this.isSelfSitDown=!1,this.selfChairPos=0)))},t.standup=function(e,i){var t=0,s=this.playerInfoVec.length;for(t=0;s>t;t++)this.playerInfoVec[t]&&this.playerInfoVec[t].uid==e&&(this.playerInfoVec[t].pos=i,this.playerInfoVec[t].canKick=!1,e==N.selfuid&&(-1!=i?(this.isSelfSitDown=!0,this.selfChairPos=i):(this.isSelfSitDown=!1,this.selfChairPos=0)))},t.updateReadyState=function(e,i,t){var s=0,n=this.playerInfoVec.length;for(s=0;n>s;s++)if(this.playerInfoVec[s]&&this.playerInfoVec[s].pos==e){this.playerInfoVec[s].readystate=!0,this.playerInfoVec[s].piao=t;break}},t.leavePlayer=function(e){var i=0,t=this.playerInfoVec.length;for(i=0;t>i;i++)if(this.playerInfoVec[i]&&this.playerInfoVec[i].uid==e){this.playerInfoVec.splice(i,1);break}},t.updatePlayerInfoVec=function(e){var i,t=0,s=e.length;for(t=0;s>t;t++)i=e[t],N.isReplay&&(i.index=void 0!=i.index?i.index:0,i.diamond=void 0!=i.diamond?i.diamond:0,i.Icon=void 0!=i.Icon?i.Icon:"",i.score=void 0!=i.score?i.score:0,i.coin=void 0!=i.coin?i.coin:0,i.readystate=void 0!=i.readystate?i.readystate:0,i.uid=void 0!=i.uid?i.uid:0,i.IP=void 0!=i.IP?i.IP:"",i.Name=i.name,i.Index=i.index,i.Coin=i.coin,i.readystate=1,i.UID=i.uid,i.Diamond=i.diamond,i.icon&&(i.Icon=i.icon)),i.nickname=i.Name,i.uid=i.UID,i.ip=i.IP,i.pos=i.Index,i.golds=i.Coin,(""!=i.uid||0!=i.uid)&&(3==i.state?(this.beKickedPlayer[i.pos]=i.uid,i.state=1,i.pos=-1):4==i.state&&(this.beKickedPlayer[i.pos]=i.uid,i.state=2,i.pos=-1),this.updateOnePlayerInfo(e[t]))},t.setPlayerReadyFalse=function(){var e=0,i=this.playerInfoVec.length;for(e=0;i>e;e++)this.playerInfoVec[e].readystate=0},t.getBaodaoNum=function(){return U.getBaodaoNum(this.handleCards[this.selfChairPos])},t.getBaodaoCards=function(){return U.getBaodaoCards(this.handleCards[this.selfChairPos])},o(0,t,"gameHasStarted",function(){return this.isGameStart||this.srddzMsgs.ACK_RoomInfo.RoundCount>0?!0:!1}),o(0,t,"chairNum",function(){return this._chairNum},function(e){this._chairNum=e,this.playerInfoVec.length=0,this.outputCards.length=this.chairNum,this.handleCards.length=this.chairNum,this.mingpaiVec.length=this.chairNum,this.jiabeiVec.length=this.chairNum,this.jiaofenVec.length=this.chairNum,this.outZhadanNumVec.length=this.chairNum,this.dipaiCards.length=0;var i=0,t=this._chairNum;for(i=0;t>i;i++)this.outputCards[i]=[],this.handleCards[i]=[],this.mingpaiVec[i]=!1,this.jiabeiVec[i]=!1,this.jiaofenVec[i]=0,this.outZhadanNumVec[i]=0;this.isGameStart=!1,this.isEnd=!1,this.isLiu=!1}),i.Stage_jiaofen=1,i.Stage_jiabei=2,i.Stage_dapai=3,s(i,["DissolveResult_REF",function(){return this.DissolveResult_REF=["等待操作","同意","拒绝"]}]),i}(r),pi=function(e){function i(){this.popChatArr=null,this.expressloaderArr=null,this._replayControlView=null,this._srddzPage=null,this._playerInfoPage=null,this._tableInfoPage=null,this._chatPage=null,this._gui=null,this._voiceRecording=-1,this.isPlayVoice=!1,this.isClick=!1,this.isRecording=!1,this._calculatePage,i.__super.call(this),this.setType(3)}n(i,"modules.srddzGame.srddzInerGame.view.SrddzView",e);var s=i.prototype;return s.onAdd=function(){this.onAddUI(),this.onAddListener()},s.onRemove=function(){this.onRemoveUI(),this.onRemoveListener()},s.onAddUI=function(){null==this._gui&&(this._gui=new m,this._gui.mouseThrough=!0),console.log("桌面被添加到舞台！！"),G.instance.uiLayer.addChild(this._gui),null==this._srddzPage&&(this._srddzPage=new li(new b),this._gui.pokerContainer.addChild(this._srddzPage.skin)),null==this._tableInfoPage&&(this._tableInfoPage=new di(this.gui.tableInfoPage)),null==this._playerInfoPage&&(this._playerInfoPage=new Z(this.gui.playerInfoPage)),null==this._calculatePage&&(this._calculatePage=new J(this.gui.calculatePart)),null==this._replayControlView&&(this._replayControlView=new S(this.gui.replayControlView)),this._chatPage=d.schatPage,this.gui.chatContainer.addChild(this._chatPage.skin),this._chatPage.hide(),1==N.isReplay?this._replayControlView.show():this._replayControlView.hide(),this._gui.popChat0.visible=!1,this._gui.popChat1.visible=!1,this._gui.popChat2.visible=!1,this._gui.popChat3.visible=!1,f.instance.on("SEND_CHAT_MESSAGE",this,this.onSendChat),this._gui.tableInfoPage.voiceIntercomBtn.on("click",this,this.onVoiceOpClick),this._gui.tableInfoPage.voiceIntercomBtn.on("mouseout",this,this.onVoiceOpOut),this._gui.tableInfoPage.chatBtn.on("click",this,this.onShowChatPage)},s.initPopChat=function(e){switch(void 0===e&&(e=4),this.popChatArr=[],e){case 4:this.popChatArr.push(this._gui.popChat0,this._gui.popChat1,this._gui.popChat2,this._gui.popChat3)}},s.onSendChat=function(e){this.chatPage.switchState();var i={message:e,type:2};f.instance.event("SOCKET_SEND",B.getProtoMessage(370,i))},s.onVoiceOpClick=function(e){this.isClick=!0,console.log("点击了？？？？？？ "),this.isRecording?this.stopRecord():this.startRecord(),e.stopPropagation()},s.onVoiceOpOut=function(){return this.isClick?(this.isClick=!1,void 0):(console.log("滑动了？？？？？？ "),1==this.isRecording&&(K.stopRecord(-1),t.timer.clear(this,this.onRecording),this._gui.tableInfoPage.voiceTip.visible=!1,this._gui.tableInfoPage.voicePlay.visible=!1,this.tableInfoPage.stopVoicePlay(),this.onStopSuccess(),this.isRecording=!1,this.isPlayVoice||this.Voice()),void 0)},s.startRecord=function(){K.startRecord(),this._gui.tableInfoPage.voicePlay.visible=!0,this.tableInfoPage.playVoicePlay(),this._gui.tableInfoPage.voiceTip.visible=!0,this._voiceRecording=R.unixtime,this._gui.tableInfoPage._time.text="15'",t.timer.loop(100,this,this.onRecording),this.isRecording=!0},s.stopRecord=function(){var e=R.unixtime-this._voiceRecording;500>e||(1e3>e?(K.stopRecord(-1),I.VoiceTip(3),t.timer.clear(this,this.onRecording),this._gui.tableInfoPage.voiceTip.visible=!1,this._gui.tableInfoPage.voicePlay.visible=!1,this.tableInfoPage.stopVoicePlay(),this.onStopSuccess()):(K.stopRecord(0,this,this.onStopSuccess),t.timer.clear(this,this.onRecording),this._gui.tableInfoPage.voiceTip.visible=!1,this._gui.tableInfoPage.voicePlay.visible=!1,this.tableInfoPage.stopVoicePlay(),ci.instance.gameContext.view.gui.tableInfoPage.voiceIntercomBtn.disabled=!0,ci.instance.gameContext.view.gui.tableInfoPage.voiceDis.visible=!0),this.isRecording=!1,this.isPlayVoice||this.Voice())},s.onStopSuccess=function(){ci.instance.gameContext.view.gui.tableInfoPage.voiceIntercomBtn.disabled=!1,ci.instance.gameContext.view.gui.tableInfoPage.voiceDis.visible=!1},s.onRecording=function(){var e=(R.unixtime-this._voiceRecording)/1e3;this._gui.tableInfoPage._time.text=15-Math.floor(e)+"'",e>=h.maxVoiceTime&&this.stopRecord()},s.onRecChat=function(e){console.log("onRecChat::",e);var i=e.message.split("#");i.length>1&&this.showPopChat(i[0],i[1])},s.showPopChat=function(e,i){null==this.popChatArr&&this.initPopChat(this.model.chairNum);var t=this.model.getPlayerPosByUid(e),s=this.model.getChairDirByPos(t),n=i.split("|");if(n.length>1){if("express"==n[0]){var o=parseInt(n[1]);return this._playerInfoPage.showExpress(s,o+1),void 0}"VoiceId"==n[0]&&(console.log("youyuyinguolaile"),K.voiceArr.push([parseInt(e),n[1]]),this.isPlayVoice||0!=this.isRecording||this.Voice())}else{this.popChatArr[s].visible=!0,this.popChatArr[s].tf.text=i,this.popChatArr[s].backimg.width=this.popChatArr[s].tf.textField.textWidth+30,this.popChatArr[s].backimg.height=this.popChatArr[s].tf.textField.textHeight+40,M.clearAll(this.popChatArr[s]),this.popChatArr[s].alpha=1;var a=2e3*this.popChatArr[s].tf.textField.lines.length;x.playSound(T.instance.getSddzChatPath(this.model.playerByPos(t).sex,h.getChatSound(i,2)),1)}this.popChatArr[s]==this._gui.popChat1&&(this.popChatArr[s].x=576+(392-this.popChatArr[s].tf.textField.textWidth)),M.to(this.popChatArr[s],{alpha:.3},a,null,new C(this,this.onCompeteTween,[this.popChatArr[s]]),500)},s.Voice=function(){var e=this;if(!(K.voiceArr.length<=0||K.isUpLoading)){this.isPlayVoice=!0;var i=K.voiceArr.shift();K.downloadVoice(i[1],this,this.playVoice,[i[0]]),l.window.wx.onVoicePlayEnd({success:function(){console.log("声音播放完成了！！ uid：："+i[0]),console.log("WX.voiceArr.length::"+K.voiceArr.length),t.timer.clear(ci.instance.gameContext.view,e.recoverSoundVolume),ci.instance.gameContext.view.playerInfoPage.hideVoice(i[0]),h.isPlayingRecord=!1,t.timer.once(1e3,null,T.swithMusic,["game"]),K.voiceArr.length>0?e.Voice():(K.isDownLoading=!1,K.uploadArr.length>0&&(K.uploadVoice(K.uploadArr[0]),K.uploadArr.length=0),ci.instance.gameContext.view.isPlayVoice=!1,0==K.isUpLoading&&(ci.instance.gameContext.view.gui.tableInfoPage.voiceIntercomBtn.disabled=!1,ci.instance.gameContext.view.gui.tableInfoPage.voiceDis.visible=!1))}})}},s.playVoice=function(e){t.timer.once(15e3,this,this.recoverSoundVolume,[parseInt(e)]),this._playerInfoPage.showVoice(parseInt(e))},s.recoverSoundVolume=function(e){0!=this.isPlayVoice&&(this.isPlayVoice=!1,h.isPlayingRecord=!1,T.swithMusic("game"),this._playerInfoPage.hideVoice(e),this._gui.tableInfoPage.voiceIntercomBtn.disabled=!1,this._gui.tableInfoPage.voiceDis.visible=!1)},s.playend=function(e){this._playerInfoPage.hideVoice(e)},s.onCompeteTween=function(e){e.alpha=1,e.visible=!1},s.onShowChatPage=function(e){T.instance.playClickBtnSound(),this.chatPage.switchState(),e.stopPropagation()},s.setChairNmu=function(e){this.srddzPage.setChairNum(e),this._playerInfoPage.setChairNum(e),this.reset()},s.startGame=function(){},s.onAddListener=function(){},s.onticketCardChange=function(e){this.calculatePage.showGetTicket(e[0]),e&&e.complete()},s.onRemoveUI=function(){null!=this._gui&&(G.instance.uiLayer.removeChild(this._gui),console.log("桌面被移除舞台！！"),this._gui.tableInfoPage.chatBtn.off("mousedown",this,this.onShowChatPage),f.instance.off("SEND_CHAT_MESSAGE",this,this.onSendChat),this._gui.tableInfoPage.voiceIntercomBtn.off("click",this,this.onVoiceOpClick),this._gui.tableInfoPage.voiceIntercomBtn.off("mouseout",this,this.onVoiceOpOut))},s.reset=function(){q.instance.hide(),this._srddzPage.reset(),this._tableInfoPage.reset(),this._playerInfoPage.havePiaoReset(),this._calculatePage.reset(),this._replayControlView.reset()},s.replayup_reset=function(){this._srddzPage.reset(),this._tableInfoPage.reset(),this._playerInfoPage.havePiaoReset(),this._calculatePage.reset(),this._replayControlView.replayup_reset()},s.onRemoveListener=function(){},o(0,s,"model",function(){return ci.instance.gameContext.model}),o(0,s,"replayControlView",function(){return this._replayControlView}),o(0,s,"srddzPage",function(){return this._srddzPage}),o(0,s,"playerInfoPage",function(){return this._playerInfoPage}),o(0,s,"gui",function(){return this._gui}),o(0,s,"chatPage",function(){return this._chatPage}),o(0,s,"tableInfoPage",function(){return this._tableInfoPage}),o(0,s,"calculatePage",function(){return this._calculatePage}),i}(r),_i=function(e){function i(e){this.orignalY=0,this.readyOffsetY=-20,this.orignalY=e.y,i.__super.call(this,e),this.canControl=!0}n(i,"modules.srddzGame.srddzInerGame.view.pockerPart.card.BottomHandlePocker",e,"BottomHandlePocker$2");var s=i.prototype;return s.up=function(){0!=this.state&&(this.skin.valueImg.visible=!0,this.skin.backImg.visible=!1,this.state=0)},s.back=function(){1!=this.state&&(this.skin.backImg.visible=!0,this.skin.valueImg.visible=!1,this.state=1)},s.down=function(){2!=this.state&&(this.skin.backImg.visible=!1,this.skin.valueImg.visible=!0,this.state=2)},s.onMouseOver=function(){this.model.isMouseDwon&&(this.skin.shadowImg.visible=!this.skin.shadowImg.visible,this.select=!this.select)},s.onMouseMove=function(){},s.onClickStage=function(e){e.target instanceof ui.srddzGame.ddzPart.item.PockerItemUI==0&&e.target!=this.skin.parent&&e.target.parent!=this.skin.parent.parent&&(this.select=!1)},s.onMouseDown=function(){this.select=!this.select,this.skin.shadowImg.visible=!this.skin.shadowImg.visible},s.onMouseUp=function(){this.skin.shadowImg.visible=!1,this.model.isMouseDwon=!1},s.onSkinMouseUp=function(){T.playEffect("audio_deal_card")},s.reset=function(){e.prototype.reset.call(this)},o(0,s,"canControl",null,function(e){e=!0,e?(this.skin.on("mouseover",this,this.onMouseOver),t.stage.on("click",this,this.onClickStage),this.skin.on("mousedown",this,this.onMouseDown),t.stage.on("mouseup",this,this.onMouseUp),this.skin.on("mouseup",this,this.onSkinMouseUp)):(this.skin.off("mouseover",this,this.onMouseOver),t.stage.off("click",this,this.onClickStage),this.skin.off("mousedown",this,this.onMouseDown),t.stage.off("mouseup",this,this.onMouseUp),this.skin.off("mouseup",this,this.onSkinMouseUp))}),o(0,s,"select",function(){return this.skin.y==this.orignalY+this.readyOffsetY},function(e){this.skin.y=e?this.orignalY+this.readyOffsetY:this.orignalY}),i}(ei),Ci=function(e){function i(e){i.__super.call(this,e)}n(i,"modules.srddzGame.srddzInerGame.view.pockerPart.card.OtherHandlePocker",e,"OtherHandlePocker$2");var t=i.prototype;return t.up=function(){0!=this.state&&(this.skin.valueImg.visible=!1,this.skin.backImg.visible=!0,this.state=0)},t.back=function(){1!=this.state&&(this.skin.backImg.visible=!0,this.skin.valueImg.visible=!1,this.state=1)},t.down=function(){2!=this.state&&(this.skin.backImg.visible=!1,this.skin.valueImg.visible=!0,this.state=2)},i}(ei),vi=function(e){function i(e){this.gap=55,this._skin=null,this._skin=e,i.__super.call(this,e)}n(i,"modules.srddzGame.srddzInerGame.view.pockerPart.singlePart.handlePart.BottomSingleHandlePart",e,"BottomSingleHandlePart$3");var s=i.prototype;return s.init=function(){var e=0,i=this._pockers.length;for(e=0;i>e;e++)this._pockers[e]=new _i(this._skin["card"+e]);t.stage.on("mousedown",this,this.onDownStage)},s.onDownStage=function(){this.model.isMouseDwon=!0},s.showCards=function(e,i){var t=this.model.getChairPosByDir(i);0!=this.model.baodaoState&&this.model.dizhuPos==t?(e=e.concat(),U.cutArrInArr(this.model.baodaoCards,e),U.sortHandleCards(e),U.sortHandleCards(this.model.baodaoCards),e=e.reverse(),this.model.baodaoCards=this.model.baodaoCards.reverse(),e=this.model.baodaoCards.concat(e)):(U.sortHandleCards(e),e=e.reverse()),this.hideAll(),this.updateState(this.model.mingpaiVec[t]);var s=0;for(s=0;s<e.length;s++)this._pockers[s].setCardImg(e[s]),this._pockers[s].show(),this._pockers[s].select=!1,this._pockers[s].showDizhuImg(!1),1==this.state?this._pockers[s].down():this.model.isSelfSitDown?this._pockers[s].up():0!=this.model.baodaoState&&this.model.dizhuPos==t?s<this.model.baodaoCards.length?this._pockers[s].down():this._pockers[s].back():this._pockers[s].back(),s==e.length-1&&(t==this.model.dizhuPos&&this._pockers[s].showDizhuImg(!0),this._pockers[s].showMingImg(this.model.mingpaiVec[t]));this._skin.box1.x=e.length<=17?this.gap*(17-e.length)/2:0},s.updateState=function(i){e.prototype.updateState.call(this,i),1==this.state?this.down():this.model.isSelfSitDown?this.up():this.back()},s.reset=function(){this.updateState(!1),e.prototype.reset.call(this)},o(0,s,"seleCards",function(){var e=[],i=0;for(i=0;i<this._pockers.length;i++)1==this._pockers[i].visible&&1==this._pockers[i].select&&e.push(this._pockers[i].cardIdx);return e},function(e){var i=0,t=0,s=0;for(i=0;i<this._pockers.length;i++)this._pockers[i].select=!1,this._pockers[i].visible&&(s=this._pockers[i].cardIdx,t=e.indexOf(s),-1!=t&&(this._pockers[i].select=!0,e.splice(t,1)))}),o(0,s,"canControl",null,function(e){t.superSet(ri,this,"canControl",e)}),i}(ri),Pi=function(e){function i(e){this._oneCard=null,this._oneNum=null,this._skin,this._skin=e,i.__super.call(this,e)}n(i,"modules.srddzGame.srddzInerGame.view.pockerPart.singlePart.handlePart.OtherSingleHandlePart",e,"OtherSingleHandlePart$2");var t=i.prototype;return t.init=function(){var e=0,i=this._pockers.length;for(e=0;i>e;e++)this._pockers[e]=new Ci(this._skin["card"+e]);this._oneCard=new Ci(this._skin.card),this._oneNum=this._skin.numTxt},t.showCards=function(e,i){e=e.concat();var t=this.model.getChairPosByDir(i);this.updateState(this.model.mingpaiVec[t]);var s=0;if(1==this.state||this.model.isEnd)if(t==this.model.dizhuPos&&0!=this.model.baodaoState){for(U.cutArrInArr(this.model.baodaoCards,e),U.sortHandleCards(e),U.sortHandleCards(this.model.baodaoCards),e=e.reverse(),this.model.baodaoCards=this.model.baodaoCards.reverse(),e=this.model.baodaoCards.concat(e),this._skin.backBox.visible=!1,this._skin.mingBox.visible=!0,this.hideAll(),s=0;s<e.length;s++)this._pockers[s].setCardImg(e[s]),this._pockers[s].show(),this._pockers[s].showDizhuImg(!1),s==e.length-1&&(t==this.model.dizhuPos&&this._pockers[s].showDizhuImg(!0),this._pockers[s].showMingImg(this.model.mingpaiVec[t]));this.down()}else{for(U.sortHandleCards(e),e=e.reverse(),this._skin.backBox.visible=!1,this._skin.mingBox.visible=!0,this.hideAll(),s=0;s<e.length;s++)this._pockers[s].setCardImg(e[s]),this._pockers[s].show(),this._pockers[s].showDizhuImg(!1),s==e.length-1&&(t==this.model.dizhuPos&&this._pockers[s].showDizhuImg(!0),this._pockers[s].showMingImg(this.model.mingpaiVec[t]));this.down()}else if(0==this.state)if(t==this.model.dizhuPos&&0!=this.model.baodaoState)for(this._skin.backBox.visible=!1,this._skin.mingBox.visible=!0,U.sortHandleCards(this.model.baodaoCards),this.model.baodaoCards=this.model.baodaoCards.reverse(),this.hideAll(),s=0;s<e.length;s++)s<this.model.baodaoCards.length?(this._pockers[s].setCardImg(this.model.baodaoCards[s]),this._pockers[s].down()):(this._pockers[s].setCardImg(e[s]),this._pockers[s].back()),this._pockers[s].show(),this._pockers[s].showDizhuImg(!1),s==e.length-1&&(t==this.model.dizhuPos&&this._pockers[s].showDizhuImg(!0),this._pockers[s].showMingImg(this.model.mingpaiVec[t]));else this._skin.backBox.visible=!0,this._skin.mingBox.visible=!1,this._oneCard.back(),this._oneCard.show(),this._oneNum.text=e.length+"",this.up()},t.reset=function(){this.updateState(!1),e.prototype.reset.call(this),this._oneCard.reset(),this._skin.mingBox.visible=!1,this._skin.backBox.visible=!1},i}(ri),ki=function(e){function i(e){this._skin=null,this.gap=30,this._skin=e,i.__super.call(this,e)}n(i,"modules.srddzGame.srddzInerGame.view.pockerPart.singlePart.outputPart.BottomSingleOutputPart",e,"BottomSingleOutputPart$2");var t=i.prototype;return t.showCards=function(e){this.show(),e=U.sortOutputCards(e),this.hideAll(),this._skin.box.x=e.length<this._pockers.length/2?this.gap*(this._pockers.length/2-e.length)/2:0;var i=0;for(i=0;i<e.length;i++)this._pockers[i].setCardImg(e[i]),this._pockers[i].show()},i}(hi),yi=function(e){function i(e){this._skin=null,this._skin=e,i.__super.call(this,e)}n(i,"modules.srddzGame.srddzInerGame.view.pockerPart.singlePart.outputPart.LeftSingleOutputPart",e,"LeftSingleOutputPart$2");var t=i.prototype;return t.showCards=function(e){this.show(),e=U.sortOutputCards(e),this.hideAll();var i=0;for(i=0;i<e.length;i++)this._pockers[i].setCardImg(e[i]),this._pockers[i].show()},i}(hi),wi=function(e){function i(e){this.gap=30,this._skin=null,this._skin=e,i.__super.call(this,e)}n(i,"modules.srddzGame.srddzInerGame.view.pockerPart.singlePart.outputPart.RightSingleOutputPart",e,"RightSingleOutputPart$2");var t=i.prototype;return t.showCards=function(e){this.show(),e=U.sortOutputCards(e),this.hideAll();var i=0;for(i=0;i<e.length;i++)this._pockers[i].setCardImg(e[i]),this._pockers[i].show();this._skin.box.x=e.length>6?0:this.gap*(6-e.length)},i}(hi),bi=function(e){function i(){i.__super.call(this)}return n(i,"modules.srddzGame.srddzInerGame.controller.RSrddzController",e),i}(gi),Bi=function(e){function i(){i.__super.call(this)}return n(i,"modules.srddzGame.srddzInerGame.model.RSrddzModel",e),i}(mi),Ii=function(e){function i(){this.tUid=null,this.dat=null,i.__super.call(this),this.on("click",this,this.onClick)}n(i,"modules.srddzGame.srddzInerGame.view.playerInfoPart.GiftItem",e,"GiftItem$3");var t=i.prototype;return t.setData=function(e,i){if(e){this.dat=e,this.tUid=i,this.img.disabled=i==N.uid||0==ci.instance.gameContext.model.isSelfSitDown?!0:!1,this.img.skin="ani/"+e.name+".png";var t=parseInt(e.price);this.costTf.color=t>N.Diamond?"#ff3d01":"#2dc509",this.costTf.text=e.price}},t.onClick=function(){if(this.tUid!=N.uid){if(0==ci.instance.gameContext.model.isSelfSitDown)return I.popMessage("围观用户禁止送礼物！"),void 0;q.instance.hide(),console.log("送礼物咯：： id:"+this.dat.id+"  tUid:"+this.tUid);var e={id:this.dat.id,tUid:this.tUid};f.instance.event("SOCKET_SEND",B.getProtoMessage(410,e))}},i}(p),Ai=function(e){function i(e,t,s){this._socketControl=null,void 0===e&&(e=""),i.__super.call(this,e,t,s)}n(i,"modules.srddzGame.context.SrddzMainContext",e);var t=i.prototype;return t.open=function(){e.prototype.open.call(this),null==this._socketControl&&(this._socketControl=new fi),this.addController(this.socketControl)},o(0,t,"socketControl",function(){return this._socketControl}),i}(g),Si=function(e){function i(e,t,s){this._view=null,this._controller=null,this._rcontroller=null,this._model=null,this._rmodel=null,void 0===e&&(e=""),i.__super.call(this,e,t,s)}n(i,"modules.srddzGame.srddzInerGame.context.SrddzContext",e);var t=i.prototype;return t.open=function(){e.prototype.open.call(this),this.initUI(),console.log("addView(srddz)////////////////"),this.addView(this._view),N.isReplay?(this.addController(this._rcontroller),this.addModel(this._rmodel)):(this.addController(this._controller),this.addModel(this._model)),console.log("srddzgamecontext UserData.roomtype::"+N.roomtype),this.setChairNum(4),T.swithMusic("game"),console.log("srddzGameContext open:::..."),console.log("注册了游戏内的消息！！！"),v.instance.continueQueue("MESSAGE_GAME"),f.instance.event("GameContextReady",null)},t.close=function(){e.prototype.close.call(this),x.stopMusic()},t.initUI=function(){this._view||(this._view=new pi),N.isReplay?(this._rcontroller||(this._rcontroller=new bi),this._rmodel&&(this._rmodel=new Bi)):(this._controller||(this._controller=new gi),this._model||(this._model=new mi))},t.setChairNum=function(e){N.isReplay?this._rmodel.chairNum=e:this._model.chairNum=e,this._view.setChairNmu(e)},o(0,t,"view",function(){return this._view}),o(0,t,"controller",function(){return N.isReplay?this._rcontroller:this._controller}),o(0,t,"model",function(){return N.isReplay?this._rmodel:this._model}),i}(g);t.__init([q,Q])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});for(var t in Laya){var s=Laya[t];s&&s.__isclass&&(i[t]=s)}});